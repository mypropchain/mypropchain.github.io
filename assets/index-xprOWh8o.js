import{j as e,L as Ke,c as ws,r as Es,f as Is,a as xe,b as Xe,d as Ze,e as ie,g as je,h as pe,i as o,u as oe,k as F,M as W,B as Fs,C as Ps,X as Os,Y as Rs,T as Ts,l as Ds,m as Ms,n as Te,S as Le,o as es,E as Ls,p as Us,q as qs,F as $s,s as Hs,t as Ys,H as zs,v as Vs,w as te,x as I,y as Bs,z as Gs,A as _s,D as he,I as Qs,G as Ue,U as Js,J as Ws,O as ss,K as p,N as O,P as Ks,Q as ae,R as Xs,V as se,W as H,Z as Zs,_ as et,$ as st,a0 as ts,a1 as tt,a2 as at,a3 as fe,a4 as ge,a5 as ve,a6 as le,a7 as z,a8 as U,a9 as L,aa as nt,ab as lt,ac as qe,ad as rt,ae as it,af as ot,ag as ct,ah as ne,ai as dt,aj as ut,ak as mt,al as ht,am as $e,an as xt,ao as jt,ap as He,aq as Ye,ar as pt,as as Y,at as ft,au as gt,av as vt}from"./vendor-eAehwAjO.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))m(u);new MutationObserver(u=>{for(const l of u)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&m(a)}).observe(document,{childList:!0,subtree:!0});function n(u){const l={};return u.integrity&&(l.integrity=u.integrity),u.referrerPolicy&&(l.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?l.credentials="include":u.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function m(u){if(u.ep)return;u.ep=!0;const l=n(u);fetch(u.href,l)}})();const ze=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center",children:[e.jsx("h1",{children:"404"}),e.jsx("p",{children:"Page not found"}),e.jsx("br",{className:""}),e.jsx("p",{children:"Something is wrong, the page you trying to acces do not exist"}),e.jsx("p",{children:"Or you have not enought rights"}),e.jsx("br",{className:""}),e.jsx(Ke,{to:"/",children:"Go to Home"})]})}),Nt="https://myprop.joselimardo.com/api",J=ws({baseQuery:Es(Is({baseUrl:Nt,prepareHeaders:(t,{getState:s})=>{const n=s().auth.token;if(n)return t.set("Authorization",`Bearer ${n}`),t.set("Content-Type","application/json"),t}})),keepUnusedDataFor:60,refetchOnMountOrArgChange:!0,refetchOnFocus:!0,refetchOnReconnect:!0,tagTypes:["Users","Tenants","Assets","Locations"],endpoints:t=>({})}),yt=t=>xe.create({baseURL:"https://myprop.joselimardo.com/api",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}),St=xe.create({baseURL:"https://myprop.joselimardo.com/api",headers:{"Content-Type":"application/json"}}),bt=t=>xe.create({baseURL:"https://myprop.joselimardo.com/api",headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${t}`}}),Ct=async(t,s,n)=>{try{return await yt(s).post(`/${t}`,n)}catch(m){return m}},At=async t=>{try{const s=await St.post("/auth/login",t);if(s.data.token){const n=Xe(s.data.token),m={loading:!1,isLoggedIn:!0,token:s.data.token,active:n.user_active,deleted:n.user_is_deleted,error:null};sessionStorage.setItem("session",JSON.stringify(m,null,2))}return s.data}catch(s){throw s}},as=async(t,s,n)=>{console.log("DATOS RECIBIDOS",t,s,n);try{return await bt(s).post(`/${t}`,n)}catch(m){throw m}};let X=JSON.parse(sessionStorage.getItem("session"));const Ce=Ze("auth/loginUser",async(t,s)=>{try{return await At(t)}catch(n){return s.rejectWithValue(n.response.data)}}),ns=Ze("auth/logoutUser",async(t,s)=>{try{sessionStorage.removeItem("session")}catch(n){return s.rejectWithValue(n.response)}}),kt={loading:X?X.loading:!1,isLoggedIn:X?X.isLoggedIn:!1,token:X?X.token:null,error:X?X.error:null},wt=ie({name:"auth",initialState:kt,extraReducers:t=>{t.addCase(Ce.pending,s=>{s.loading=!0,s.isLoggedIn=!1,s.token=null,s.error=null}).addCase(Ce.fulfilled,(s,n)=>{s.loading=!1,s.isLoggedIn=!0,s.token=n.payload.token,s.error=null}).addCase(Ce.rejected,(s,n)=>{s.loading=!1,s.isLoggedIn=!1,s.token=null,s.error=n.payload}).addCase(ns.fulfilled,s=>{s.loading=!1,s.isLoggedIn=!1,s.token=null,s.error=null})}}),Et=wt.reducer,It=t=>t.auth.token,Ft=t=>t.auth.isLoggedIn,ls=je({}),Pt=ls.getInitialState(),G=J.injectEndpoints({endpoints:t=>({getUsers:t.query({query:()=>"/users",providesTags:["Users"]}),getUser:t.query({query:s=>`/users/${s}`}),getMe:t.query({query:()=>"/users/me",extraOptions:{maxRetries:0}}),addNewUser:t.mutation({query:s=>({url:"/users",method:"POST",body:s}),invalidatesTags:["Users"],extraOptions:{maxRetries:0}}),updateUser:t.mutation({query:s=>({url:"/users",method:"PUT",body:{...s}}),invalidatesTags:["Users"]}),deleteUser:t.mutation({query:({id:s,email:n})=>({url:`/users/${s}/email/${n}`,method:"DELETE"}),invalidatesTags:["Users"]}),softDeleteUser:t.mutation({query:s=>({url:"/users/soft_delete/",method:"PUT",body:{...s}}),invalidatesTags:["Users"]}),changePassword:t.mutation({query:s=>({url:"/users/change_password/",method:"POST",body:{...s}}),invalidatesTags:["Users"]}),resetPassword:t.mutation({query:s=>({url:`/users/reset_password/${s}`,method:"POST"}),invalidatesTags:["Users"]})})}),{useGetUsersQuery:Ot,useGetUserQuery:Rt,useGetMeQuery:Un,useAddNewUserMutation:Tt,useUpdateUserMutation:qn,useDeleteUserMutation:$n,useSoftDeleteUserMutation:Hn,useChangePasswordMutation:Yn,useResetPasswordMutation:zn}=G,Dt=G.endpoints.getUsers.select(),Mt=pe(Dt,t=>t.data);ls.getSelectors(t=>Mt(t)??Pt);const Lt={users:[],user:null,loading:!1,error:null},rs=ie({name:"users",initialState:Lt,reducers:{setUser(t,s){t.user=s.payload},setUsers(t,s){t.users=s.payload}},extraReducers:t=>{t.addMatcher(G.endpoints.getUsers.matchFulfilled,(s,{payload:n})=>{s.users=n.users,s.loading=!1,s.error=null}),t.addMatcher(G.endpoints.getUsers.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(G.endpoints.getUsers.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n}),t.addMatcher(G.endpoints.getUser.matchFulfilled,(s,{payload:n})=>{s.user=n[0],s.loading=!1,s.error=null}),t.addMatcher(G.endpoints.getMe.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(G.endpoints.getMe.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n}),t.addMatcher(G.endpoints.getMe.matchFulfilled,(s,{payload:n})=>{s.user=n.user,s.loading=!1,s.error=null}),t.addMatcher(G.endpoints.getUser.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(G.endpoints.getUser.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n})}}),Ve=rs.actions,Ut=rs.reducer,is=je({}),qt=is.getInitialState(),Q=J.injectEndpoints({endpoints:t=>({getLocations:t.query({query:()=>"/locations",providesTags:["Locations"]}),getLocation:t.query({query:s=>`/locations/${s}`}),addLocation:t.mutation({query:s=>({url:"/locations",method:"POST",body:s}),invalidatesTags:["Locations"],extraOptions:{maxRetries:0}})})}),{useGetLocationQuery:Vn,useGetLocationsQuery:$t,useAddLocationMutation:Ht}=Q,Yt=Q.endpoints.getLocations.select(),zt=pe(Yt,t=>t.data);is.getSelectors(t=>zt(t)??qt);const Vt={locations:[],location:null,loading:!1,error:null},os=ie({name:"locations",initialState:Vt,reducers:{setLocation(t,s){t.location=s.payload},setLocations(t,s){t.locations=s.payload.data}},extraReducers:t=>{t.addMatcher(Q.endpoints.getLocations.matchFulfilled,(s,{payload:n})=>{s.locations=n.data,s.loading=!1,s.error=null}),t.addMatcher(Q.endpoints.getLocations.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(Q.endpoints.getLocations.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n}),t.addMatcher(Q.endpoints.getLocation.matchFulfilled,(s,{payload:n})=>{s.location=n.data,s.loading=!1,s.error=null}),t.addMatcher(Q.endpoints.getLocation.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(Q.endpoints.getLocation.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n})}}),Be=os.actions,Bt=os.reducer,cs=je({}),Gt=cs.getInitialState(),Z=J.injectEndpoints({endpoints:t=>({getTenants:t.query({query:()=>"/tenants",providesTags:["Tenants"]}),getTenant:t.query({query:s=>`/tenants/${s}`}),addTenant:t.mutation({query:s=>({url:"/tenants",method:"POST",body:s}),invalidatesTags:["Tenants"],extraOptions:{maxRetries:0}})})}),{useGetTenantQuery:Bn,useGetTenantsQuery:_t,useAddTenantMutation:Qt}=Z,Jt=Z.endpoints.getTenants.select(),Wt=pe(Jt,t=>t.data);cs.getSelectors(t=>Wt(t)??Gt);const Kt={tenants:[],tenant:null,loading:!1,error:null},ds=ie({name:"tenants",initialState:Kt,reducers:{setTenant(t,s){t.tenant=s.payload},setTenants(t,s){t.tenants=s.payload.data}},extraReducers:t=>{t.addMatcher(Z.endpoints.getTenants.matchFulfilled,(s,{payload:n})=>{s.tenants=n.data,s.loading=!1,s.error=null}),t.addMatcher(Z.endpoints.getTenants.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(Z.endpoints.getTenants.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n}),t.addMatcher(Z.endpoints.getTenant.matchFulfilled,(s,{payload:n})=>{s.tenant=n.data,s.loading=!1,s.error=null}),t.addMatcher(Z.endpoints.getTenant.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(Z.endpoints.getTenant.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n})}}),Ge=ds.actions,Xt=ds.reducer,us=je({}),Zt=us.getInitialState(),ee=J.injectEndpoints({endpoints:t=>({getAssets:t.query({query:()=>"/assets",providesTags:["Assets"]}),getAsset:t.query({query:s=>`/assets/${s}`}),addAsset:t.mutation({query:s=>({url:"/assets",method:"POST",body:s}),invalidatesTags:["Assets"],extraOptions:{maxRetries:0}})})}),{useGetAssetQuery:Gn,useGetAssetsQuery:ea,useAddAssetMutation:sa}=ee,ta=ee.endpoints.getAssets.select(),aa=pe(ta,t=>t.data);us.getSelectors(t=>aa(t)??Zt);const na={assets:[],asset:null,loading:!1,error:null},ms=ie({name:"assets",initialState:na,reducers:{setAsset(t,s){t.asset=s.payload},setAssets(t,s){t.assets=s.payload.data}},extraReducers:t=>{t.addMatcher(ee.endpoints.getAssets.matchFulfilled,(s,{payload:n})=>{s.assets=n.data,s.loading=!1,s.error=null}),t.addMatcher(ee.endpoints.getAssets.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(ee.endpoints.getAssets.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n}),t.addMatcher(ee.endpoints.getAsset.matchFulfilled,(s,{payload:n})=>{s.asset=n.data,s.loading=!1,s.error=null}),t.addMatcher(ee.endpoints.getAsset.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(ee.endpoints.getAsset.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n})}}),_e=ms.actions,la=ms.reducer,hs=o.createContext(),ra=({children:t})=>{const s=oe(),n=F(Ft),m=F(It),[u,l]=o.useState(null),[a,r]=o.useState(!0),[x,N]=o.useState(null),[c,y]=o.useState(null),{data:C,error:b,isLoading:j,isSuccess:k}=Rt(c,{skip:a});o.useEffect(()=>{if(m){const g=Xe(m);N({role:g.role,email:g.email,tenantId:g.tenantId}),y(g.id),r(!1)}},[m]),o.useEffect(()=>{k&&(l(C),N({...x,name:C[0].name,lastName:C[0].lastname}))},[k,C]);const f=async g=>{await s(Ce(g)).then(v=>{var w;console.log("login",v),((w=v.error)==null?void 0:w.message)==="Rejected"&&W.error({title:"Invalid login attempt",content:`${v.payload.message}`})})},i=()=>{r(!0),setSkipTenant(!0),s(_e.setAssets([])),s(_e.setAsset(null)),s(Be.setLocations([])),s(Be.setLocation(null)),s(Ge.setTenants([])),s(Ge.setTenant(null)),s(Ve.setUsers([])),s(Ve.setUser(null)),s(J.util.resetApiState())},h=async()=>{await s(ns()).then(()=>{r(!0),i()})};if(j)return e.jsx("div",{children:"We are loading data, please wait..."});const d={isLoggedIn:n,token:m,login:f,logout:h,credentials:x};return e.jsx(hs.Provider,{value:d,children:t})},re=()=>o.useContext(hs),ia=[{name:"Enero",permisos:4e3,pv:2400,amt:2400},{name:"Febrero",permisos:3e3,pv:1398,amt:2210},{name:"Marzo",permisos:2e3,pv:9800,amt:2290},{name:"Abril",permisos:2780,pv:3908,amt:2e3},{name:"Mayo",permisos:1890,pv:4800,amt:2181},{name:"Junio",permisos:2390,pv:3800,amt:2500}];function xs(){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"",children:[" ",e.jsx("h6",{className:"",children:"Cantidad de permisos por mes"}),e.jsxs(Fs,{width:500,height:300,data:ia,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(Ps,{strokeDasharray:"3 3"}),e.jsx(Os,{dataKey:"name"}),e.jsx(Rs,{}),e.jsx(Ts,{}),e.jsx(Ds,{}),e.jsx(Ms,{dataKey:"permisos",fill:"#82ca9d"})]})]})})}const js=()=>e.jsxs("div",{className:"row",children:[e.jsx("h6",{className:"mb-3",children:"Estadísticas en tiempo real"}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(Te,{bordered:!0,style:{width:300},children:e.jsx(Le,{title:"Completados",value:8e3,precision:0,valueStyle:{color:"#3f8600"},prefix:e.jsx(es,{}),suffix:""})})})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(Te,{bordered:!0,style:{width:300},children:e.jsx(Le,{title:"En proceso",value:560,precision:0,valueStyle:{color:"#cf1322"},prefix:e.jsx(Ls,{}),suffix:""})})})})]}),oa=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"",style:{marginTop:"20px"},children:[e.jsx("h3",{style:{color:"blue"},children:"Estadísticas"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col box1 me-1",children:e.jsx("div",{className:"d-flex justify-content-center mt-5",children:e.jsx(xs,{})})}),e.jsx("div",{className:"col box1 ms-1",children:e.jsx("div",{className:"mt-5",children:e.jsx(js,{})})})]})]})})}),ca=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"",style:{marginTop:"20px"},children:[e.jsx("h3",{style:{color:"blue"},children:"Estadísticas"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col box1 me-1",children:e.jsx("div",{className:"d-flex justify-content-center mt-5",children:e.jsx(xs,{})})}),e.jsx("div",{className:"col box1 ms-1",children:e.jsx("div",{className:"mt-5",children:e.jsx(js,{})})})]})]})})}),da=()=>{const{credentials:t}=re(),s=t==null?void 0:t.role;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsxs("div",{className:"",style:{marginTop:"20px"},children:[s==="root"&&e.jsx(oa,{}),s==="autoridadArea"&&e.jsx(ca,{})]})})})};function ua(){const t=Us();return console.error(t),e.jsxs("div",{id:"error-page",children:[e.jsx("h1",{children:"Oops!"}),e.jsx("p",{children:"Sorry, an unexpected error has occurred."}),e.jsx("p",{children:e.jsx("i",{children:t.statusText||t.message})})]})}const ma=[{label:"Settings",key:"settings",icon:e.jsx(qs,{style:{fontSize:20}}),children:[]}],ha=[{label:"Permisos",key:"permissions",icon:e.jsx($s,{style:{fontSize:20}}),children:[]}],xa=[{label:"Reports",key:"reports",icon:e.jsx(Hs,{style:{fontSize:20}}),children:[]}],ja=[{label:"Logout",key:"logout",icon:e.jsx(Ys,{style:{fontSize:20,color:"#faad14"}}),children:[]}],pa=[{label:"Home",key:"/",icon:e.jsx(zs,{style:{fontSize:20}}),children:[]}],fa=[{label:"Assets",key:"assets-settings",icon:e.jsx(Vs,{style:{fontSize:20}}),children:[]}],ce=(t,s,n,m,u,l)=>({key:s,icon:n,children:m,label:t,type:u,disabled:l}),ga=ha.map(t=>ce(t.label,t.key,t.icon)),va=xa.map(t=>ce(t.label,t.key,t.icon)),Na=ma.map(t=>ce(t.label,t.key,t.icon)),ya=ja.map(t=>ce(t.label,t.key,t.icon)),Sa=pa.map(t=>ce(t.label,t.key,t.icon)),ba=fa.map(t=>ce(t.label,t.key,t.icon)),{Sider:Ca}=he,Aa=[Sa[0],Na[0],ba[0],ga[0],va[0],ya[0]],ka=()=>{const t=te(),{logout:s}=re(),[n,m]=o.useState(!0);let u={};n?u={textAlign:"center",paddingTop:20,paddingBottom:10}:u={textAlign:"right",paddingTop:20,paddingBottom:10};const l={backgroundColor:"#333035",borderRadius:"0px 20px 20px 0px",height:"88vh"},a={backgroundColor:"#333035",color:"#fff",borderRadius:"0px 20px 20px 0px",maxWidth:200,minHeight:"50vh"},r=N=>{m(N)},x=()=>{t("/"),s()};return e.jsxs(Ca,{breackpoint:"md",trigger:null,collapsible:!0,collapsed:n,onCollapse:r,style:l,children:[e.jsx("div",{style:u,children:e.jsx(I,{type:"text",icon:n?e.jsx(Bs,{style:{fontSize:20,color:"#fff"}}):e.jsx(Gs,{style:{fontSize:20,color:"#fff"}}),onClick:()=>m(!n)})}),e.jsx(_s,{style:a,mode:"inline",items:Aa,onClick:({key:N})=>{N==="logout"?x():N==="openClose"?m(!n):t(N)},selectable:!0})]})},wa="/assets/LogoHorizontal-aIQiJSsu.png",Ea=()=>{const t=te(),s=F(l=>l.permits.permits),n=s.some(l=>l.status==="waiting"),m=s.some(l=>l.status==="approved"),u=()=>{t("/permissions")};return e.jsxs("div",{children:[n&&e.jsx(I,{className:"notification",onClick:u,children:"Hay pendientes de autorización!"}),m&&e.jsx(I,{className:"notification",onClick:u,children:"Hay permisos para Completar!"})]})},{Header:Ia}=he,be=["#f56a00","#7265e6","#ffbf00","#00a2ae"],Fa=()=>{const[t,s]=o.useState("U"),[n,m]=o.useState(be[1]);te();const{isLoggedIn:u,credentials:l}=re(),a=()=>{const x=Math.floor(Math.random()*4);m(x<be.length-1?be[x+1]:be[0])},r=x=>x.split(" ").map(y=>y[0].toUpperCase()).join("");return o.useEffect(()=>{l!=null&&l.name&&(l!=null&&l.lastName)?s(r(`${l==null?void 0:l.name} ${l==null?void 0:l.lastName}`)):s("U")},[u,l]),e.jsxs(Ia,{className:"header",children:[e.jsx(Ke,{to:"/",children:e.jsx(Qs,{preview:!1,width:150,src:wa})}),e.jsx(Ea,{}),e.jsx("div",{className:"",style:{paddingRight:20,paddingLeft:20},children:u?e.jsx(Ue,{style:{backgroundColor:n,cursor:"pointer"},size:35,onClick:a,children:t}):e.jsx(Ue,{style:{backgroundColor:n,cursor:"pointer"},size:35,icon:e.jsx(Js,{style:{fontSize:35}}),onClick:a})})]})},Pa=()=>{const{Header:t,Content:s,Footer:n}=he,{token:{colorBgContainer:m}}=Ws.useToken(),u={margin:"0px",background:m,textAlign:"center",height:"88vh",width:"100%"},l={padding:0,background:m,textAlign:"center",height:40,display:"flex",justifyContent:"center",alignItems:"center"},a={display:"flex",alignContent:"center",alignItems:"center",background:"#fff"},r={backgroundColor:"#fff",height:"100%"};return e.jsxs(he,{className:"conatiner-fluid",style:r,children:[e.jsx(Fa,{}),e.jsxs(he,{style:a,children:[e.jsx(ka,{}),e.jsx(s,{style:u,children:e.jsx(ss,{})})]}),e.jsx(n,{style:l,children:"MyPropChain © 2024 all rights reserved"})]})},{RangePicker:Oa}=ae,Ne=({fields:t,onFinish:s,formName:n,name:m,buttonTitle:u,layout:l})=>{l||(l="vertical");const a="DD/MM/YYYY HH:mm";return e.jsxs(p,{form:n,name:m,onFinish:s,layout:l,labelCol:{span:8},wrapperCol:{span:24},style:{maxWidth:600},children:[t.map((r,x)=>e.jsxs(p.Item,{label:r.label,name:r.name,rules:r.type==="confirmPassword"?[{required:!0,message:`Please input a ${r.label}`},{min:8,message:"Password must be at least 8 characters"},({getFieldValue:N})=>({validator(c,y){return!y||N("password")===y?Promise.resolve():Promise.reject(new Error("The two passwords that you entered do not match!"))}})]:[{required:!0,message:`Please input ${r.label}`},{type:`${r.type}`},r.type==="password"&&{min:8,message:"Password must be at least 8 characters"}],children:[r.type==="text"&&e.jsx(O,{id:r.name,placeholder:r.placeholder}),r.type==="inputnumber"&&e.jsx(Ks,{min:"0",max:"1",step:"0.01",stringMode:!0,style:{width:"100%"},id:r.name,placeholder:r.placeholder}),r.type==="number"&&e.jsx(O,{type:"number",id:r.name,placeholder:r.placeholder}),r.type==="email"&&e.jsx(O,{type:"email",id:r.name,placeholder:r.placeholder}),r.type==="date"&&e.jsx(ae,{id:r.name,format:a}),r.type==="datetime"&&e.jsx(Oa,{id:r.name,placeholder:r.placeholder}),r.type==="password"&&e.jsx(O.Password,{id:r.name,placeholder:r.placeholder}),r.type==="confirmPassword"&&e.jsx(O.Password,{id:r.name,placeholder:r.placeholder}),r.type==="textarea"&&e.jsx(O.TextArea,{id:r.name}),r.type==="select"&&e.jsx(Xs,{id:r.name,options:r.options,placeholder:r.placeholder}),r.type==="radio"&&e.jsx(se,{id:r.name}),r.type==="checkbox"&&e.jsx(H,{id:r.name}),r.type==="switch"&&e.jsx(Zs,{id:r.name}),r.type==="slider"&&e.jsx(et,{id:r.name}),r.type==="rate"&&e.jsx(st,{id:r.name}),r.type==="upload"&&e.jsx(ts,{id:r.name}),r.type==="button"&&e.jsx(I,{id:r.name}),r.type==="treeselect"&&e.jsx(tt,{id:r.name}),r.type==="timepicker"&&e.jsx(at,{id:r.name})]},x)),e.jsx(p.Item,{children:e.jsxs("div",{className:"",style:{display:"flex",flexDirection:"row"},children:[e.jsx(I,{type:"primary",htmlType:"submit",children:u}),e.jsx(I,{type:"",htmlType:"reset",style:{marginLeft:"20px"},children:"Reset"})]})})]})},ke=({message:t})=>e.jsx("div",{className:"alert alert-success",children:e.jsx("div",{className:"",children:t})}),we=({message:t})=>e.jsx("div",{className:"alert alert-danger",children:e.jsx("div",{className:"",children:t})}),Qe=({title:t,content:s})=>{W.error({title:t,content:s})},Ee=({title:t,content:s})=>{W.success({title:t,content:s})},Ra=({title:t,content:s})=>{W.info({title:t,content:s})},ps=()=>{const t=F(v=>v.tenants.tenants),[s]=p.useForm(),[n,m]=o.useState(!1);o.useState(null);const[u,l]=o.useState(!1),[a,r]=o.useState(!1),[x,N]=o.useState(null),[c,{isSuccess:y,error:C,reset:b}]=Tt(),j=[{value:"admin",label:"Admin"},{value:"user",label:"User"},{value:"root",label:"Root"},{value:"operator",label:"Operator"},{value:"contractor",label:"Contractor"},{value:"autoridadEstatal",label:"Autoridad Estatal"},{value:"autoridadMunicipal",label:"Autoridad Municipal"},{value:"autoridadArea",label:"Autoridad de Area"},{value:"autoridadAreaLocal",label:"Autoridad de Area Local"},{value:"otraAutoridad",label:"Otra Autoridad"}],f=[{label:"Tenant",name:"tenant",type:"select",placeholder:"Tenant",options:t==null?void 0:t.map(v=>({value:v._id,label:v.name}))},{label:"Nombre",name:"name",type:"text",placeholder:"Nombre"},{label:"Apellido",name:"lastname",type:"text",placeholder:"Apellido"},{label:"Email",name:"email",type:"email",placeholder:"Email"},{label:"Password",name:"password",type:"password",placeholder:"Password"},{label:"Confirm password",name:"confirmPassword",type:"confirmPassword",placeholder:"Confirm password"},{label:"Role",name:"role",type:"select",placeholder:"Role",options:j}],i=()=>{r(!1),l(!1),m(!0)},h=()=>{r(!1),l(!1),s.resetFields(),m(!1)},d=()=>{r(!1),l(!1),s.resetFields(),m(!1)},g=v=>{const w={...v,isActive:!0};c(w).unwrap(),b()};return o.useEffect(()=>{y&&(l(!0),N("User added successfully"))},[y]),o.useEffect(()=>{C&&(r(!0),N("Error adding user"))},[C]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"",children:e.jsx("div",{className:"col-md",children:e.jsx(I,{type:"primary",className:"",onClick:i,children:"Add User"})})}),e.jsxs(W,{open:n,forceRender:!0,title:"Add user",onOk:h,onCancel:d,cancelButtonProps:{form:s,key:"cancel",htmlType:"reset"},footer:[e.jsx(I,{type:"default",onClick:d,children:"Exit"},"exit")],children:[e.jsx(Ne,{fields:f,onFinish:g,name:"userForm",buttonTitle:"Submit",formName:s}),a&&we({message:x}),u&&ke({message:x})]})]})},Ta=()=>{var f;o.useState([]);const t=F(i=>i.tenants.tenants);o.useState(!0),oe();const[s,n]=o.useState({}),[m,u]=o.useState({}),l=(i,h,d)=>{console.log("Various parameters",i,h,d),n(h),u(d)},{data:a=[],isSuccess:r,error:x,isFetching:N,refetch:c}=Ot({}),y=t==null?void 0:t.map(i=>({text:i.name,value:i.name})),C=(f=a==null?void 0:a.users)==null?void 0:f.map(i=>{var h;return{key:i._id,name:i.name+" "+i.lastname,email:i.email,role:i.role,tenant:(h=i.tenant)==null?void 0:h.name}}),b=[{title:"Name",dataIndex:"name",key:"name",render:i=>e.jsx("a",{children:i}),sorter:(i,h)=>{var d,g;return((d=i.name)==null?void 0:d.length)-((g=h.name)==null?void 0:g.length)}},{title:"Email",dataIndex:"email",key:"email"},{title:"Role",dataIndex:"role",key:"role"},{title:"Organizacion",dataIndex:"tenant",key:"tenant",filters:y,filteredValue:s.tenant||null,onFilter:(i,h)=>h.tenant.includes(i),sorter:(i,h)=>{var d,g;return((d=i.tenant)==null?void 0:d.length)-((g=h.tenant)==null?void 0:g.length)},sortOrder:m.columnKey==="tenant"?m.order:null,ellipsis:!0},{title:"Action",key:"action",render:(i,h)=>e.jsxs(fe,{size:"middle",children:[e.jsx(ge,{style:{fontSize:20,color:"#008000",marginRight:10},onClick:()=>j(h)}),e.jsx(ve,{style:{fontSize:20,color:"#FF0000",marginRight:10},onClick:()=>k(h)})]})}],j=i=>{console.log(i)},k=i=>{console.log(i.tenant.length)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(le,{dataSource:C,columns:b,onChange:l})})})})})},Da=()=>e.jsxs(e.Fragment,{children:[e.jsxs(z,{children:[e.jsx(U,{span:12,className:"text-center",children:e.jsx("h4",{children:"Users administration"})}),e.jsx(U,{span:12,className:"text-center",children:e.jsx(ps,{})})]}),e.jsx(z,{className:"pt-3",children:e.jsx(U,{span:24,children:e.jsx(Ta,{})})})]}),_=["autoridadArea","autoridadMunicipal","autoridadEstatal","autoridadAreaLocal","otraAutoridad","root"],Ma=["owner","contractor","client"],La=()=>{const[t]=p.useForm(),[s,n]=o.useState(!1);o.useState(null);const[m,u]=o.useState(!1),[l,a]=o.useState(!1),[r,x]=o.useState(null),[N,{isSuccess:c,error:y,reset:C}]=Qt(),j=[{label:"Tipo",name:"tenantType",type:"select",placeholder:"Tipo",options:Ma.map(d=>({label:d,value:d}))},{label:"Nombre",name:"tenantName",type:"text",placeholder:"Nombre"},{label:"Nombre Legal",name:"tenantLegalname",type:"text",placeholder:"Nombre"},{label:"Email",name:"tenantEmail",type:"email",placeholder:"Email"}],k=()=>{a(!1),u(!1),n(!0)},f=()=>{a(!1),u(!1),t.resetFields(),n(!1)},i=()=>{a(!1),u(!1),t.resetFields(),n(!1)},h=d=>{const g={name:d.tenantName,legalName:d.tenantLegalname,email:d.tenantEmail,isActive:!0,more:{type:d.tenantType}};N(g).unwrap(),C()};return o.useEffect(()=>{c&&(u(!0),x("Tenant added successfully"))},[c]),o.useEffect(()=>{y&&(a(!0),x("Error adding tenant"))},[y]),e.jsxs(e.Fragment,{children:[e.jsx(I,{type:"primary",onClick:k,children:"Add new tenant"}),e.jsxs(W,{open:s,forceRender:!0,title:"Add tenant",onOk:f,onCancel:i,cancelButtonProps:{form:t,key:"cancel",htmlType:"reset"},footer:[e.jsx(I,{type:"default",onClick:i,children:"Exit"},"exit")],children:[e.jsx(Ne,{fields:j,onFinish:h,name:"tenantForm",buttonTitle:"Submit",formName:t}),l&&we({message:r}),m&&ke({message:r})]})]})},Ua=()=>{var N;o.useState([]),o.useState(!0),oe();const{data:t=[],isSuccess:s,error:n,isFetching:m,refetch:u}=_t({}),l=(N=t==null?void 0:t.data)==null?void 0:N.map(c=>({key:c._id,name:c.name,email:c.email})),a=[{title:"Name",dataIndex:"name",key:"name",render:c=>e.jsx("a",{children:c})},{title:"Email",dataIndex:"email",key:"email"},{title:"Action",key:"action",render:(c,y)=>e.jsxs(fe,{size:"middle",children:[e.jsx(ge,{style:{fontSize:20,color:"#008000",marginRight:10},onClick:()=>r(y)}),e.jsx(ve,{style:{fontSize:20,color:"#FF0000",marginRight:10},onClick:()=>x(y)})]})}],r=c=>{console.log(c)},x=c=>{console.log(c)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(le,{dataSource:l,columns:a})})})})})},qa=()=>e.jsxs(e.Fragment,{children:[e.jsxs(z,{children:[e.jsx(U,{span:12,className:"text-center",children:e.jsx("h4",{children:"Tenants administration"})}),e.jsx(U,{span:12,className:"text-center",children:e.jsx(La,{})})]}),e.jsx(z,{className:"pt-3",children:e.jsx(U,{span:24,children:e.jsx(Ua,{})})})]}),$a=()=>{const[t]=p.useForm(),[s,n]=o.useState(!1);o.useState(null);const[m,u]=o.useState(!1),[l,a]=o.useState(!1),[r,x]=o.useState(null),[N,{isSuccess:c,error:y,reset:C}]=Ht(),b=[{label:"Nombre",name:"locationName",type:"text",placeholder:"Nombre"},{label:"Descripción",name:"description",type:"text",placeholder:"Descripcion"},{label:"Ciudad",name:"city",type:"text",placeholder:"Ciudad"},{label:"Departamento",name:"state",type:"text",placeholder:"Departamento"},{label:"Pais",name:"country",type:"text",placeholder:"Pais"}],j=()=>{a(!1),u(!1),n(!0)},k=()=>{a(!1),u(!1),t.resetFields(),n(!1)},f=()=>{a(!1),u(!1),t.resetFields(),n(!1)},i=h=>{const d={...h,isActive:!0};N(d).unwrap(),C()};return o.useEffect(()=>{c&&(u(!0),x("Location added successfully"))},[c]),o.useEffect(()=>{y&&(a(!0),x("Error adding location"))},[y]),e.jsxs(e.Fragment,{children:[e.jsx(I,{type:"primary",onClick:j,children:"Add location"}),e.jsxs(W,{open:s,forceRender:!0,title:"Add tenant",onOk:k,onCancel:f,cancelButtonProps:{form:t,key:"cancel",htmlType:"reset"},footer:[e.jsx(I,{type:"default",onClick:f,children:"Exit"},"exit")],children:[e.jsx(Ne,{fields:b,onFinish:i,name:"locationForm",buttonTitle:"Submit",formName:t}),l&&we({message:r}),m&&ke({message:r})]})]})},Ha=()=>{var N;const{data:t=[],isSuccess:s,error:n,isFetching:m,refetch:u}=$t({}),l=(N=t==null?void 0:t.data)==null?void 0:N.map(c=>({key:c._id,name:c.locationName,city:c.city,state:c.state,country:c.country})),a=[{title:"Name",dataIndex:"name",key:"name",render:c=>e.jsx("a",{children:c})},{title:"Ciudad",dataIndex:"city",key:"city"},{title:"Departamento",dataIndex:"state",key:"state"},{title:"Action",key:"action",render:(c,y)=>e.jsxs(fe,{size:"middle",children:[e.jsx(ge,{style:{fontSize:20,color:"#008000",marginRight:10},onClick:()=>r(y)}),e.jsx(ve,{style:{fontSize:20,color:"#FF0000",marginRight:10},onClick:()=>x(y)})]})}],r=c=>{console.log(c)},x=c=>{console.log(c)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(le,{dataSource:l,columns:a})})})})})},Ya=()=>e.jsxs(e.Fragment,{children:[e.jsxs(z,{children:[e.jsx(U,{span:12,className:"text-center",children:e.jsx("h4",{children:"Location administration"})}),e.jsx(U,{span:12,className:"text-center",children:e.jsx($a,{})})]}),e.jsx(z,{className:"pt-3",children:e.jsx(U,{span:24,children:e.jsx(Ha,{})})})]}),za=()=>{const t=F(x=>x.users.user),[s,n]=o.useState(!0),[m,u]=o.useState(!1),[l,a]=o.useState(!1);console.log("USER",t);const r=x=>{switch(x){case 1:n(!0),u(!1),a(!1);break;case 2:n(!1),u(!0),a(!1);break;case 3:n(!1),u(!1),a(!0);break;default:n(!0),u(!1),a(!1);break}};return e.jsxs("div",{className:"pageContainer",children:[e.jsx("div",{className:"tabs",children:e.jsxs("ul",{className:"tab-container",children:[e.jsx("li",{id:"tab1",className:s?"tab activeItem activeList":"tab",children:e.jsx("a",{onClick:()=>r(1),children:"Users settings"})}),(t==null?void 0:t.role)==="root"&&e.jsx("li",{id:"tab2",className:m?"tab activeItem activeList":"tab",children:e.jsx("a",{onClick:()=>r(2),children:"Tenants settings"})}),(t==null?void 0:t.role)==="root"&&e.jsx("li",{id:"tab3",className:l?"tab activeItem activeList":"tab",children:e.jsx("a",{onClick:()=>r(3),children:"Location settings"})})]})}),e.jsxs("div",{className:"blockBorder",children:[s&&e.jsx(Da,{}),m&&(t==null?void 0:t.role)==="root"&&e.jsx(qa,{}),l&&(t==null?void 0:t.role)==="root"&&e.jsx(Ya,{})]})]})},Va=()=>e.jsx("div",{children:"Reports"}),fs=je({}),Ba=fs.getInitialState(),V=J.injectEndpoints({endpoints:t=>({getPermits:t.query({query:()=>"/permits",providesTags:["Permits"]}),getPermit:t.query({query:s=>`/permits/${s}`,providesTags:["Permits"]}),addPermit:t.mutation({query:s=>({url:"/permits",method:"POST",body:s}),invalidatesTags:["Permits"],extraOptions:{maxRetries:0}}),updatePermit:t.mutation({query:({id:s,data:n})=>({url:`/permits/${s}`,method:"PUT",body:n}),invalidatesTags:["Permits"],extraOptions:{maxRetries:0}})})}),{useGetPermitQuery:Ga,useGetPermitsQuery:_a,useAddPermitMutation:Qa,useUpdatePermitMutation:K}=V,Ja=V.endpoints.getPermits.select(),Wa=pe(Ja,t=>t.data);fs.getSelectors(t=>Wa(t)??Ba);const Ka={permits:[],permit:null,loading:!1,error:null},gs=ie({name:"permits",initialState:Ka,reducers:{setPermit(t,s){t.permit=s.payload},setPermits(t,s){t.permits=s.payload.data}},extraReducers:t=>{t.addMatcher(V.endpoints.getPermits.matchFulfilled,(s,{payload:n})=>{s.permits=n.data,s.loading=!1,s.error=null}),t.addMatcher(V.endpoints.getPermits.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(V.endpoints.getPermits.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n}),t.addMatcher(V.endpoints.getPermit.matchFulfilled,(s,{payload:n})=>{s.permit=n,s.loading=!1,s.error=null}),t.addMatcher(V.endpoints.getPermit.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(V.endpoints.getPermit.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n}),t.addMatcher(V.endpoints.updatePermit.matchFulfilled,(s,{payload:n})=>{s.permit=n.data,s.loading=!1,s.error=null}),t.addMatcher(V.endpoints.updatePermit.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(V.endpoints.updatePermit.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n})}}),Re=gs.actions,Xa=gs.reducer,Za=({setValue:t,number:s,setShow:n,show:m})=>{const[u]=p.useForm();oe();const l=F(E=>E.permits.permit),a=F(E=>E.users.user),[r,x]=o.useState({}),[N,c]=o.useState(s),[y,C]=o.useState(null);o.useState(!0);const[b,j]=o.useState(!1),[k,{isSuccess:f,error:i,reset:h}]=K(),d="DD/MM/YYYY HH:mm";o.useEffect(()=>{var E;if((l==null?void 0:l.formNumber)===parseInt(s)){const R={...l==null?void 0:l.section1,date:L((E=l==null?void 0:l.section1)==null?void 0:E.date)};(l==null?void 0:l.status)==="waiting"&&_.includes(a==null?void 0:a.role)?j(!0):j(!1),u.setFieldsValue(R)}},[]);const g=E=>{const R={...l,section1:{...E,completed:!0}};k({id:l._id,data:R}).then(A=>{A.data.status===200&&(n("2"),t("2"))})},v=[{label:"Alto",value:"alto",style:{color:"red"}},{label:"Medio",value:"medio",style:{color:"orange"}}],w=E=>{C(E.target.value)};return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"INFORMACION GENERAL"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",N]})]}),e.jsx("hr",{}),e.jsx("div",{style:{marginRight:50,marginTop:30},children:e.jsxs(p,{form:u,name:"seccion1",layout:"vertical",onFinish:g,initialValues:r,children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex flex-row justify-content-start",children:e.jsx(p.Item,{label:"Fecha de Solicitud",name:"date",rules:[{required:!0,message:"Please input!"}],children:e.jsx(ae,{format:d,disabled:b})})})}),e.jsx("div",{className:"col",children:e.jsx(p.Item,{label:"Compañía que requiere el servicio",name:"company",rules:[{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:b})})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsx(p.Item,{label:"Instalación",name:"location",rules:[{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:b})})}),e.jsx("div",{className:"col",children:e.jsx(p.Item,{label:"Area",name:"area",rules:[{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:b})})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsx(p.Item,{label:"Equipos a intervenir",name:"equipment",rules:[{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:b})})}),e.jsx("div",{className:"col",children:e.jsx(p.Item,{label:"Alcance del trabajo",name:"alcance",rules:[{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:b})})})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col",children:[e.jsx("div",{className:"d-flex flex-row justify-content-start",children:e.jsx(p.Item,{label:"Nivel Potencial de Peligro Identificado",name:"warning",rules:[{required:!0,message:"Please input!"}],children:e.jsx(se.Group,{options:v,optionType:"button",onChange:w,disabled:b})})}),e.jsxs(nt,{children:[y==="alto"&&e.jsxs("p",{className:"textSubtitle",children:["Nivel de Peligro:"," ",e.jsx("span",{style:{color:"red"},children:y.toUpperCase()})]}),y==="medio"&&e.jsxs("p",{className:"textSubtitle",children:["Nivel de Peligro:"," ",e.jsx("span",{style:{color:"orange"},children:y.toUpperCase()})]})]})]}),e.jsx("div",{className:"col",children:e.jsx(p.Item,{label:"Equipos y Herramientas a Usar",name:"tools",rules:[{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:b})})})]}),e.jsx("div",{className:"d-flex justify-content-end mt-4",children:e.jsx(p.Item,{children:e.jsx(I,{type:"primary",htmlType:"submit",className:"float-right",children:"Seguir"})})})]})})]})},en=({value:t,setValue:s,number:n,setShow:m,show:u})=>{const[l,a]=p.useForm(),r=F(P=>P.permits.permit),x=F(P=>P.users.user),N=F(P=>P.auth.token),[c,y]=o.useState(n);o.useState(!1);const[C,b]=o.useState(!1),[j,k]=o.useState(!1),[f,i]=o.useState(!1),[h,d]=o.useState(!1),[g,v]=o.useState(!1),[w,E]=o.useState(!1),[R,A]=o.useState(!1),[D,T]=o.useState(!1),[M,S]=o.useState(!1),[q,B]=o.useState(!1),[$,ye]=o.useState(!1),[Ie,Fe]=o.useState(!1),[Ns,{isSuccess:Tn,error:Dn,reset:Mn}]=K();o.useEffect(()=>{if((r==null?void 0:r.formNumber)===parseInt(n)){const P={...r==null?void 0:r.section2};l.setFieldsValue(P),b(P.check1),T(P.check2),k(P.check3),i(P.check4),d(P.check5),v(P.check6),E(P.check7),A(P.check8),S(P.check9),B(P.check10),(r==null?void 0:r.status)==="waiting"&&_.includes(x==null?void 0:x.role)?ye(!0):ye(!1)}},[]);const ys=P=>{const Pe={...r,section2:{...P,completed:!0}};Ns({id:r._id,data:Pe}).then(Oe=>{Oe.data.status===200&&(m([...u,"3"]),s("3"))})},Ss=()=>{Fe(!0)},bs=()=>{Fe(!1)},Cs=()=>{Fe(!1)},As=async P=>{const{onSuccess:Pe,onError:Oe,file:De}=P;try{const de=new FormData;de.append("file",De);for(const[Se,ue]of de.entries())ue instanceof File?(console.log(`${Se}: ${ue.name}`),console.log(`${Se}: ${ue.size} bytes`),console.log(`${Se}: ${ue.type}`)):console.log(`${Se}: ${ue}`);const Me=await as("upload",N,de);console.log("file upload: >>> ",Me),Pe(Me.data,De)}catch(de){Oe(de)}},ks=P=>{P.file.status!=="uploading"&&console.log(P.file,P.fileList),P.file.status==="done"?qe.success(`${P.file.name} file uploaded successfully`):P.file.status==="error"&&qe.error(`${P.file.name} file upload failed.`)};return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"ANALISIS DE RIESGOS, CERTIFICADOS DE APOYO Y DOCUMENTOS SOPORTE REQUERIDOS"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",c]})]}),e.jsx("hr",{}),e.jsx("div",{style:{marginRight:10},children:e.jsxs(p,{form:l,name:"seccion2",layout:"horizontal",onFinish:ys,children:[e.jsxs("div",{children:[e.jsx("p",{className:"textFormItalic w-100",children:"ANALISIS DE RIESGOS REQUERIDOS"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[e.jsx(p.Item,{label:"Análisis de Seguridad en el Trabajo - AST",name:"check1",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(H,{onChange:()=>b(!C),checked:C,disabled:$})}),e.jsx(p.Item,{label:"Nro.",name:"astNumber",style:{paddingLeft:20},rules:[C&&{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:!C})})]})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex flex-row",children:e.jsx(p.Item,{label:"Análisis de Peligro en la Etapa de Planificación - APEP",name:"apep",children:e.jsxs(se.Group,{disabled:$,children:[e.jsx(se,{value:"si",children:" Si "}),e.jsx(se,{value:"no",children:" No "})]})})})})]})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[e.jsx(p.Item,{label:"Otro",name:"check2",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(H,{onChange:()=>T(!D),checked:D,disabled:$})}),e.jsx(p.Item,{label:"Cual?",name:"oAnalysisDescription",style:{paddingLeft:20},rules:[D&&{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:!D})})]})})}),e.jsxs("div",{children:[e.jsx("p",{className:"textFormItalic w-100",children:"CERTIFICADOS DE APOYO REQUERIDOS"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[e.jsx(p.Item,{label:"Certificado Apoyo de Trabajo en Caliente",name:"check3",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(H,{onChange:()=>k(!j),checked:j,disabled:$})}),e.jsx(p.Item,{label:"Nro.",name:"atcNumber",style:{paddingLeft:20},rules:[j&&{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:!j})})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[" ",e.jsx(p.Item,{label:"Certificado Apoyo de Radiaciones",name:"check4",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(H,{onChange:()=>i(!f),checked:f,disabled:$})}),e.jsx(p.Item,{label:"Nro.",name:"certARNumber",style:{paddingLeft:20},rules:[f&&{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:!f})})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[e.jsx(p.Item,{label:"Certificado Apoyo de Excavación",name:"check5",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(H,{onChange:()=>d(!h),checked:h,disabled:$})}),e.jsx(p.Item,{label:"Nro.",name:"certAENumber",style:{paddingLeft:20},rules:[h&&{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:!h})})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[" ",e.jsx(p.Item,{label:"Certificado Apoyo Trabajo en Altura",name:"check6",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(H,{onChange:()=>v(!g),checked:g,disabled:$})}),e.jsx(p.Item,{label:"Nro.",name:"certATANumber",style:{paddingLeft:20},rules:[g&&{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:!g})})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[e.jsx(p.Item,{label:"Certificado Apoyo Izaje de Carga",name:"check7",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(H,{onChange:()=>E(!w),checked:w,disabled:$})}),e.jsx(p.Item,{label:"Nro.",name:"certAICNumber",style:{paddingLeft:20},rules:[w&&{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:!w})})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[" ",e.jsx(p.Item,{label:"Certificado Apoyo de Espacios Confinados",name:"check8",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(H,{onChange:()=>A(!R),checked:R,disabled:$})}),e.jsx(p.Item,{label:"Nro.",name:"certAECNumber",style:{paddingLeft:20},rules:[R&&{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:!R})})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[e.jsx(p.Item,{label:"Certificado Apoyo Ahislamiento de Energías",name:"check9",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(H,{onChange:()=>S(!M),checked:M,disabled:$})}),e.jsx(p.Item,{label:"Nro.",name:"certAAENumber",style:{paddingLeft:20},rules:[M&&{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:!M})})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[" ",e.jsx(p.Item,{label:"Otro",name:"check10",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(H,{onChange:()=>B(!q),checked:q,disabled:$})}),e.jsx(p.Item,{label:"Cual",name:"certOtherDesc",style:{paddingLeft:20},rules:[q&&{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:!q})})]})})]}),e.jsxs("div",{className:"",children:[e.jsx("p",{className:"textFormItalic w-100",children:"DOCUMENTOS SOPORTE REQUERIDOS"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex flex-row",children:e.jsx(p.Item,{label:"Preoperacionales Equipos y Herramientas",name:"reqDocsPEH",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(H,{disabled:$})})})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[" ",e.jsx(p.Item,{label:"Procedimientos/Instructivos",name:"reqDocsPI",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(H,{disabled:$})})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[" ",e.jsx(p.Item,{label:"FDS Productos químicos",name:"reqDocsFDS",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(H,{disabled:$})})]})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex flex-row",children:e.jsx(p.Item,{label:"Otro",name:"reqDocsOther",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(H,{disabled:$})})})})]})]})]}),e.jsxs("div",{className:"d-flex justify-content-between mt-5",children:[e.jsx("div",{className:"",children:e.jsx(I,{style:{borderColor:"blue",color:"blue"},onClick:Ss,children:"Subir Documentos de Apoyo"})}),e.jsx("div",{className:"",children:e.jsx(p.Item,{children:e.jsx(I,{type:"primary",htmlType:"submit",className:"float-right",children:"Seguir"})})})]})]})}),e.jsx(W,{title:"Seleccionar Documentos de Apoyo",open:Ie,onOk:bs,onCancel:Cs,children:e.jsx(ts,{customRequest:As,onChange:ks,maxCount:5,children:e.jsx(I,{icon:e.jsx(lt,{}),children:"Clic para seleccionar"})})})]})},sn=({value:t,setValue:s,number:n,show:m,setShow:u})=>{const[l]=p.useForm(),a=F(d=>d.permits.permit),r=F(d=>d.users.user),[x,N]=o.useState(n);o.useState(!1),o.useState(!0);const[c,y]=o.useState(!1),C="DD/MM/YYYY HH:mm",[b,{isSuccess:j,error:k,reset:f}]=K();o.useEffect(()=>{var d,g,v,w,E,R,A,D,T,M,S,q,B,$;if((a==null?void 0:a.formNumber)===parseInt(n)){const ye={calibrationDate:(d=a==null?void 0:a.section3)!=null&&d.calibrationDate?L((g=a==null?void 0:a.section3)==null?void 0:g.calibrationDate):null,verificationDate:(v=a==null?void 0:a.section3)!=null&&v.verificationDate?L((w=a==null?void 0:a.section3)==null?void 0:w.verificationDate):null,row1Col1:(E=a==null?void 0:a.section3)!=null&&E.row1Col1?L((R=a==null?void 0:a.section3)==null?void 0:R.row1Col1):null,row1Col2:(A=a==null?void 0:a.section3)!=null&&A.row1Col2?L((D=a==null?void 0:a.section3)==null?void 0:D.row1Col2):null,row1Col3:(T=a==null?void 0:a.section3)!=null&&T.row1Col3?L((M=a==null?void 0:a.section3)==null?void 0:M.row1Col3):null,row1Col4:(S=a==null?void 0:a.section3)!=null&&S.row1Col4?L((q=a==null?void 0:a.section3)==null?void 0:q.row1Col4):null,row1Col5:(B=a==null?void 0:a.section3)!=null&&B.row1Col5?L(($=a==null?void 0:a.section3)==null?void 0:$.row1Col5):null},Ie={...a==null?void 0:a.section3,...ye};l.setFieldsValue(Ie),(a==null?void 0:a.status)==="waiting"&&_.includes(r==null?void 0:r.role)?y(!0):y(!1)}},[]);const i=(d,g,v,w,E,R,A)=>e.jsx(e.Fragment,{children:v==="checkbox"?e.jsx(p.Item,{label:d,name:g,valuePropName:"checked",rules:[{type:v,message:`The input is not valid ${v}`},{required:E,message:`Please input a ${d}`}],children:e.jsx(H,{onChange:R,indeterminate:!1,disabled:A})},g):e.jsxs(p.Item,{name:g,label:d,rules:[{type:v,message:`The input is not valid ${v}`},{required:E,message:`Please input a ${d}`}],children:[v==="select"&&e.jsx(Select,{placeholder:`Input ${d}`,options:w,disabled:select}),v==="text"&&e.jsx(O,{placeholder:`Input ${d||"data"}`,disabled:A}),v==="radio"&&e.jsx(se.Group,{options:w,disabled:A}),v==="date"&&e.jsx(ae,{format:C,disabled:A})]},g)}),h=d=>{const g={...a,status:"waiting",section3:{...d,completed:!0}};b({id:a._id,data:g}).then(v=>{v.data.status===200&&(u([...m,"4"]),s("4"))})};return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"MONITOREO DE GASES"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",x]})]}),e.jsx("hr",{}),e.jsx("div",{style:{marginRight:10},children:e.jsxs(p,{form:l,name:"section3",onFinish:h,layout:"horizontal",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex",children:i("No Requerido","noRequired","checkbox",null,!1,null,c)})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex",children:i("Inicial","starter","checkbox",null,!1,null,c)})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex",children:i("Aleatorio","random","checkbox",null,!1,null,c)})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex",children:i("Continuo","continue","checkbox",null,!1,null,c)})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex",children:i("Registro cada(Min)","byMinutes","checkbox",null,!1,null,c)})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-4",children:e.jsx("div",{className:"d-flex",children:i("Nombre Inspector de Atmósfera","atmInspector","text",null,null,null,c)})}),e.jsx("div",{className:"col-3",children:e.jsx("div",{className:"d-flex",children:i("#Serial Equipo","idEquipment","text",null,null,null,c)})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex",children:i("Fecha Calibración","calibrationDate","date",null,null,null,c)})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex",children:i("Fecha Verificación","verificationDate","date",null,null,null,c)})})]}),e.jsxs("div",{className:"row gasHeight",children:[e.jsx("div",{className:"col-2",children:e.jsx("div",{className:"",children:"Fecha y Hora:"})}),e.jsxs("div",{className:"col-10",children:[" ",e.jsxs("div",{className:"d-flex flex-row justify-content-end",children:[i(null,"row1Col1","date",null,null,null,c),i(null,"row1Col2","date",null,null,null,c),i(null,"row1Col3","date",null,null,null,c),i(null,"row1Col4","date",null,null,null,c),i(null,"row1Col5","date",null,null,null,c)]})]})]}),e.jsxs("div",{className:"row gasHeight",children:[e.jsx("div",{className:"col-2",children:e.jsx("div",{className:"",children:"%LEL | 0%"})}),e.jsxs("div",{className:"col-10",children:[" ",e.jsxs("div",{className:"d-flex flex-row justify-content-end",children:[i(null,"row2Col1","text",null,null,null,c),i(null,"row2Col2","text",null,null,null,c),i(null,"row2Col3","text",null,null,null,c),i(null,"row2Col4","text",null,null,null,c),i(null,"row2Col5","text",null,null,null,c)]})]})]}),e.jsxs("div",{className:"row gasHeight",children:[e.jsx("div",{className:"col-2",children:e.jsx("div",{className:"",children:"%02 | 19.5% a 22.5%"})}),e.jsxs("div",{className:"col-10",children:[" ",e.jsxs("div",{className:"d-flex flex-row justify-content-end",children:[i(null,"row3Col1","text",null,null,null,c),i(null,"row3Col2","text",null,null,null,c),i(null,"row3Col3","text",null,null,null,c),i(null,"row3Col4","text",null,null,null,c),i(null,"row3Col5","text",null,null,null,c)]})]})]}),e.jsxs("div",{className:"row gasHeight",children:[e.jsx("div",{className:"col-2",children:e.jsx("div",{className:"",children:"CO (ppm) | s25"})}),e.jsxs("div",{className:"col-10",children:[" ",e.jsxs("div",{className:"d-flex flex-row justify-content-end",children:[i(null,"row4Col1","text",null,null,null,c),i(null,"row4Col2","text",null,null,null,c),i(null,"row4Col3","text",null,null,null,c),i(null,"row4Col4","text",null,null,null,c),i(null,"row4Col5","text",null,null,null,c)]})]})]}),e.jsxs("div",{className:"row gasHeight",children:[e.jsx("div",{className:"col-2",children:e.jsx("div",{className:"",children:"H2s (ppm) | s1"})}),e.jsxs("div",{className:"col-10",children:[" ",e.jsxs("div",{className:"d-flex flex-row justify-content-end",children:[i(null,"row5Col1","text",null,null,null,c),i(null,"row5Col2","text",null,null,null,c),i(null,"row5Col3","text",null,null,null,c),i(null,"row5Col4","text",null,null,null,c),i(null,"row5Col5","text",null,null,null,c)]})]})]}),e.jsxs("div",{className:"row gasHeight",children:[e.jsx("div",{className:"col-2",children:e.jsx("div",{className:"",children:"OTRO"})}),e.jsxs("div",{className:"col-10",children:[" ",e.jsxs("div",{className:"d-flex flex-row justify-content-end",children:[i(null,"row6Col1","text",null,null,null,c),i(null,"row6Col2","text",null,null,null,c),i(null,"row6Col3","text",null,null,null,c),i(null,"row6Col4","text",null,null,null,c),i(null,"row6Col5","text",null,null,null,c)]})]})]}),e.jsxs("div",{className:"row gasHeight",children:[e.jsx("div",{className:"col-2",children:e.jsx("div",{className:"",children:"FIRMA INSPECTOR"})}),e.jsxs("div",{className:"col-10",children:[" ",e.jsxs("div",{className:"d-flex flex-row justify-content-end",children:[i(null,"row7Col1","text",null,null,null,c),i(null,"row7Col2","text",null,null,null,c),i(null,"row7Col3","text",null,null,null,c),i(null,"row7Col4","text",null,null,null,c),i(null,"row7Col5","text",null,null,null,c)]})]})]}),e.jsx("div",{className:"d-flex justify-content-end mt-5",children:e.jsx(p.Item,{children:e.jsx(I,{type:"primary",htmlType:"submit",className:"float-right",children:"Seguir"})})})]})})]})};function me(t){function s(R,A){return R>>>A|R<<32-A}for(var n=Math.pow,m=n(2,32),u="length",l,a,r="",x=[],N=t[u]*8,c=me.h=me.h||[],y=me.k=me.k||[],C=y[u],b={},j=2;C<64;j++)if(!b[j]){for(l=0;l<313;l+=j)b[l]=j;c[C]=n(j,.5)*m|0,y[C++]=n(j,1/3)*m|0}for(t+="";t[u]%64-56;)t+="\0";for(l=0;l<t[u];l++){if(a=t.charCodeAt(l),a>>8)return;x[l>>2]|=a<<(3-l)%4*8}for(x[x[u]]=N/m|0,x[x[u]]=N,a=0;a<x[u];){var k=x.slice(a,a+=16),f=c;for(c=c.slice(0,8),l=0;l<64;l++){var i=k[l-15],h=k[l-2],d=c[0],g=c[4],v=c[7]+(s(g,6)^s(g,11)^s(g,25))+(g&c[5]^~g&c[6])+y[l]+(k[l]=l<16?k[l]:k[l-16]+(s(i,7)^s(i,18)^i>>>3)+k[l-7]+(s(h,17)^s(h,19)^h>>>10)|0),w=(s(d,2)^s(d,13)^s(d,22))+(d&c[1]^d&c[2]^c[1]&c[2]);c=[v+w|0].concat(c),c[4]=c[4]+v|0}for(l=0;l<8;l++)c[l]=c[l]+f[l]|0}for(l=0;l<8;l++)for(a=3;a+1;a--){var E=c[l]>>a*8&255;r+=(E<16?0:"")+E.toString(16)}return r}const tn=({value:t,setValue:s,number:n,show:m,setShow:u})=>{const l=te(),[a]=p.useForm(),r=F(A=>A.permits.permit),x=F(A=>A.users.user),[N,c]=o.useState({}),[y,C]=o.useState(n);o.useState(!1);const[b,j]=o.useState(!1),k="DD/MM/YYYY HH:mm",[f,{isSuccess:i,error:h,reset:d}]=K();o.useEffect(()=>{if((r==null?void 0:r.formNumber)===parseInt(n)){const A={...r==null?void 0:r.section4};a.setFieldsValue(A),(r==null?void 0:r.status)==="waiting"&&_.includes(x==null?void 0:x.role),j(!1)}},[]);const g=[{label:"Si",value:"si"},{label:"N/A",value:"na"}],v=(A,D,T,M,S,q,B)=>e.jsx(e.Fragment,{children:T==="checkbox"?e.jsx(p.Item,{label:A,name:D,valuePropName:"checked",rules:[{type:T,message:`The input is not valid ${T}`},{required:S,message:`Please input a ${A}`}],children:e.jsx(H,{onChange:q,indeterminate:!1,disabled:B})},D):e.jsxs(p.Item,{name:D,label:A,rules:[{type:T,message:`The input is not valid ${T}`},{required:S,message:`Please input a ${A}`}],children:[T==="select"&&e.jsx(Select,{placeholder:`Input ${A}`,options:M,disabled:select}),T==="text"&&e.jsx(O,{placeholder:`Input ${A||"data"}`,disabled:B}),T==="radio"&&e.jsx(se,{disabled:B}),T==="radiogroup"&&e.jsx(se.Group,{options:M,disabled:B}),T==="date"&&e.jsx(ae,{format:k,disabled:B})]},D)}),w=A=>{const D=[r==null?void 0:r.formNumber],T=[r==null?void 0:r.section1.equipment.trim().split(" ").join("")],M=D.concat(T),S=me(M);E(S,A)},E=(A,D)=>{const T=`https://api.stamping.io/util/keys/create/?pwd=${A}&token=1ff366eb140491c61d626af1238b09b5a284e143bf713026f3b8ca4038d`;fetch(T).then(M=>M.json()).then(M=>{const S={...r,status:"waiting",section4:{...D,completed:!0},more:{publicKey:M.RSA.publicKey,privateKey:M.RSA.privateKey}};R(S)})},R=A=>{f({id:r._id,data:A}).then(D=>{D.data.status===200&&(Ee({title:"Solicitud Enviada",content:"La solicitud fue enviada exitosamente"}),l("/permissions"))}),d()};return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"REVISION CONDICIONES PREINICIO DE TRABAJO"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",y]})]}),e.jsx("hr",{}),e.jsx("div",{style:{marginRight:10},children:e.jsxs(p,{form:a,layout:"horizonatl",name:"section4",initialValues:N,onValuesChange:()=>{c(a.getFieldsValue())},onFinish:w,children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex justify-content-start align-items-baseline",children:[e.jsx("div",{className:"",children:"EL PERSONAL MANIFIESTA ENCONTRARSE EN BUENAS CONDICIONES DE SALUD"}),e.jsx("div",{className:"ms-4",children:v("","healthy","checkbox",null,!0,null,b)})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex justify-content-start align-items-baseline",children:[e.jsx("div",{className:"",children:"SE HA COMPLETADO EL AISLAMIENTO, BLOQUEO Y ETIQUETADO"}),e.jsx("div",{className:"ms-4",children:v("","isnulate","radiogroup",g,!0,null,b)})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex justify-content-start align-items-baseline",children:[e.jsx("div",{className:"",children:"LOS EQUIPOS SE ENCUENTRAN EN CONDICIONES SEGURAS PARA SER ITERVENIDOS"}),e.jsx("div",{className:"ms-4",children:v("","safety","radiogroup",g,!1,null,b)})]})})}),e.jsx("div",{className:"d-flex justify-content-end mt-5",children:e.jsx(p.Item,{children:e.jsx(I,{type:"primary",htmlType:"submit",className:"float-right",children:"Enviar Solicitud"})})})]})})]})},an=()=>{const t=te(),[s,n,m,u]=p.useForm(),l=F(d=>d.permits.permit),a=F(d=>d.users.user),[r,x]=o.useState({}),[N,{isSuccess:c,error:y,reset:C}]=K(),b="DD/MM/YYYY HH:mm";o.useEffect(()=>{const d={nameAda:a==null?void 0:a.name,signAda:a==null?void 0:a.name,dateAda:L(),nameAal:a==null?void 0:a.name,signAal:a==null?void 0:a.name,dateAal:L(),nameAe:a==null?void 0:a.name,signAe:a==null?void 0:a.name,dateAe:L(),nameOa:a==null?void 0:a.name,signOa:a==null?void 0:a.name,dateOa:L()};s.setFieldsValue(d),x(d)},[]);const j=(d,g,v,w,E,R,A)=>e.jsx(e.Fragment,{children:e.jsxs(p.Item,{name:g,label:d,rules:[{type:v,message:`The input is not valid ${v}`},{required:E,message:`Please input a ${d}`}],children:[v==="text"&&e.jsx(O,{placeholder:`Input ${d||"data"}`,disabled:A}),v==="date"&&e.jsx(ae,{format:b,disabled:A})]},g)}),k=d=>{const g={...l,status:"approved",section5:{...d,completed:!0}};N({id:l._id,data:g}).then(w=>{w.data.status===200&&(console.log("Received values of form: ",w.data),Ee({content:"Se ha aprobado el permiso",title:"Permiso Aprobado"}),C(),t("/permissions"))});const v=L(d.dateAda).format("DD/MM/YYYY HH:mm");console.log("fecha ",v)},f=d=>{console.log("Received values of form: ",d)},i=d=>{console.log("Received values of form: ",d)},h=d=>{console.log("Received values of form: ",d)};return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"APROBACION"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",l==null?void 0:l.formNumber]})]}),e.jsx("hr",{}),e.jsx("div",{style:{marginRight:10},children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Autoridad de Area"}),e.jsx("hr",{className:""}),e.jsxs(p,{form:s,name:"section51",layout:"vertical",initialValues:r,onFinish:k,children:[j("Nombre","nameAda","text","",!0,"",!1),j("Firma","signAda","text","",!0,"",!1),j("Fecha","dateAda","date","",!0,"",!1),e.jsx(I,{type:"primary",htmlType:"submit",children:"Firmar"})]})]}),e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Autoridad de Area Local"}),e.jsx("hr",{className:""}),e.jsxs(p,{form:n,name:"section52",layout:"vertical",initialValues:r,onFinish:f,children:[j("Nombre","nameAal","text","",!0,"",!1),j("Firma","signAal","text","",!0,"",!1),j("Fecha","dateAal","date","",!0,"",!1),e.jsx(I,{type:"primary",htmlType:"submit",children:"Firmar"})]})]}),e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Autoridad Ejecutante"}),e.jsx("hr",{className:""}),e.jsxs(p,{form:m,name:"section53",layout:"vertical",initialValues:r,onFinish:i,children:[j("Nombre","nameAe","text","",!0,"",!1),j("Firma","signAe","text","",!0,"",!1),j("Fecha","dateAe","date","",!0,"",!1),e.jsx(I,{type:"primary",htmlType:"submit",children:"Firmar"})]})]}),e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Otra Autoridad"}),e.jsx("hr",{className:""}),e.jsxs(p,{form:u,name:"section54",layout:"vertical",initialValues:r,onFinish:h,children:[j("Nombre","nameOa","text","",!0,"",!1),j("Firma","signOa","text","",!0,"",!1),j("Fecha","dateOa","date","",!0,"",!1),e.jsx(I,{type:"primary",htmlType:"submit",children:"Firmar"})]})]})]})})]})},nn=()=>{p.useForm();const t=F(m=>m.permits.permit);F(m=>m.users.user),o.useState({}),K(),o.useEffect(()=>{},[]);const s=[{title:"Motivo",dataIndex:"motivo",key:"motivo"},{title:"Hora",dataIndex:"date",key:"date"},{title:"Firma AE",dataIndex:"signAe",key:"signAe"},{title:"Firma AAL",dataIndex:"signAal",key:"signAal"}],n=[{title:"Fecha",dataIndex:"rdate",key:"rdate"},{title:"Hora Inicio",dataIndex:"rstart",key:"rstart"},{title:"Hora Fin",dataIndex:"rend",key:"rend"},{title:"Firma AE",dataIndex:"signAe",key:"signAe"},{title:"Firma AAL",dataIndex:"signAal",key:"signAal"}];return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"SUSPENSIONES Y REVALIDACIONES"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",t==null?void 0:t.formNumber]})]}),e.jsx("hr",{}),e.jsxs("div",{style:{marginRight:10},children:[e.jsxs("div",{className:"row",children:[e.jsx("p",{className:"mb-2",children:"Suspenciones"}),e.jsx(le,{columns:s,dataSource:t==null?void 0:t.suspensions,pagination:!1})]}),e.jsxs("div",{className:"row",children:[e.jsx("p",{className:"mb-2 mt-2",children:"Revalidaciones"}),e.jsx(le,{columns:n,dataSource:t==null?void 0:t.suspensions,pagination:!1})]}),e.jsxs("div",{className:"d-flex justify-content-around mt-5",children:[e.jsx(I,{type:"primary",htmlType:"submit",className:"float-right",children:"Suspenciones"}),e.jsx(I,{type:"primary",htmlType:"submit",className:"float-right",children:"Revalidaciones"})]})]})]})},ln=()=>{const[t]=p.useForm(),s=F(f=>f.permits.permit);F(f=>f.users.user);const[n,m]=o.useState({}),[u,l]=o.useState(!1),[a,r]=o.useState(!0),[x,N]=o.useState(!0),[c,y]=o.useState(!0);K();const C="DD/MM/YYYY HH:mm",b=f=>{f==="check1"&&r(!a),f==="check2"&&N(!x),f==="check3"&&y(!c)};o.useEffect(()=>{},[]);const j=(f,i,h,d,g,v,w)=>e.jsx(e.Fragment,{children:h==="checkbox"?e.jsx(p.Item,{label:f,name:i,valuePropName:"checked",rules:[{type:h,message:`The input is not valid ${h}`},{required:g,message:`Please input a ${f}`}],children:e.jsx(H,{onChange:()=>b(v),indeterminate:!1,disabled:w})},i):e.jsxs(p.Item,{name:i,label:f,rules:[{type:h,message:`The input is not valid ${h}`},{required:g,message:`Please input a ${f}`}],children:[h==="text"&&e.jsx(O,{placeholder:`Input ${f||"data"}`,disabled:w}),h==="date"&&e.jsx(ae,{format:C,disabled:w})]},i)}),k=f=>{console.log("Submit: ",f),{...s,section7:{...f}}};return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"REGISTRO ACOMPAÑAMIENTO DURANTE EJECUCION"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",s==null?void 0:s.formNumber]})]}),e.jsx("hr",{}),e.jsx("div",{style:{marginRight:10},children:e.jsxs(p,{form:t,layout:"horizonatl",name:"section7",initialValues:n,onValuesChange:()=>{m(t.getFieldsValue())},onFinish:k,children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex justify-content-start align-items-baseline",children:[e.jsx("div",{className:"",children:"VISITA LIDERAZGO"}),e.jsx("div",{className:"ms-4",children:j("","visit","checkbox",null,!1,"check1",u)}),e.jsx("div",{className:"ms-4",children:j("Nombre","vname","text",null,!1,null,a)}),e.jsx("div",{className:"ms-4",children:j("Firma","vsign","text",null,!1,null,a)}),e.jsx("div",{className:"ms-4",children:j("Fecha","vdate","date",null,!0,null,a)})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex justify-content-start align-items-baseline",children:[e.jsx("div",{className:"",children:"CONVERSACION Y/O REFLEXXION"}),e.jsx("div",{className:"ms-4",children:j("","reflection","checkbox",null,!0,"check2",u)}),e.jsx("div",{className:"ms-4",children:j("Nombre","rname","text",null,!1,null,x)}),e.jsx("div",{className:"ms-4",children:j("Firma","rsign","text",null,!1,null,x)}),e.jsx("div",{className:"ms-4",children:j("Fecha","rdate","date",null,!1,null,x)})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex justify-content-start align-items-baseline",children:[e.jsx("div",{className:"",children:"REVISION DEL PERMISO"}),e.jsx("div",{className:"ms-4",children:j("","check","checkbox",null,!1,"check3",u)}),e.jsx("div",{className:"ms-4",children:j("Nombre","cname","text",null,!1,null,c)}),e.jsx("div",{className:"ms-4",children:j("Firma","csign","text",null,!1,null,c)}),e.jsx("div",{className:"ms-4",children:j("Fecha","cdate","date",null,!1,null,c)})]})})}),e.jsx("div",{className:"d-flex justify-content-end mt-5",children:e.jsx(p.Item,{children:e.jsx(I,{type:"primary",htmlType:"submit",className:"float-right",children:"Enviar Registro"})})})]})})]})},rn=()=>{const t=te(),[s,n,m,u]=p.useForm(),l=F(d=>d.permits.permit),a=F(d=>d.users.user),[r,x]=o.useState({});o.useState(""),o.useState([]);const[N,{isSuccess:c,error:y,reset:C}]=K(),b="DD/MM/YYYY HH:mm";o.useEffect(()=>{const d={nameAda:a==null?void 0:a.name,signAda:a==null?void 0:a.name,dateAda:L(),nameAal:a==null?void 0:a.name,signAal:a==null?void 0:a.name,dateAal:L(),nameAe:a==null?void 0:a.name,signAe:a==null?void 0:a.name,dateAe:L(),nameOa:a==null?void 0:a.name,signOa:a==null?void 0:a.name,dateOa:L()};s.setFieldsValue(d),x(d)},[]);const j=(d,g,v,w,E,R,A)=>e.jsx(e.Fragment,{children:e.jsxs(p.Item,{name:g,label:d,rules:[{type:v,message:`The input is not valid ${v}`},{required:E,message:`Please input a ${d}`}],children:[v==="text"&&e.jsx(O,{placeholder:`Input ${d||"data"}`,disabled:A}),v==="date"&&e.jsx(ae,{format:b,disabled:A})]},g)}),k=d=>{const g={...l,status:"completed",section8:{...d,completed:!0}};N({id:l._id,data:g}).then(v=>{v.data.status===200&&(Ee({title:"Trabajo completado",content:"El trabajo ha sido completado con éxito"}),t(`/preview/${l==null?void 0:l.formNumber}`))})},f=d=>{console.log("Received values of form: ",d)},i=d=>{console.log("Received values of form: ",d)},h=d=>{console.log("Received values of form: ",d)};return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"CIERRE"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",l==null?void 0:l.formNumber]})]}),e.jsx("hr",{}),e.jsx("div",{style:{marginRight:10},children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Autoridad de Area"}),e.jsx("hr",{className:""}),e.jsxs(p,{form:s,name:"section81",layout:"vertical",initialValues:r,onFinish:k,children:[j("Nombre","nameAda","text","",!0,"",!1),j("Firma","signAda","text","",!0,"",!1),j("Fecha","dateAda","date","",!0,"",!1),e.jsx(I,{type:"primary",htmlType:"submit",children:"Firmar"})]})]}),e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Autoridad de Area Local"}),e.jsx("hr",{className:""}),e.jsxs(p,{form:n,name:"section82",layout:"vertical",initialValues:r,onFinish:f,children:[j("Nombre","nameAal","text","",!0,"",!1),j("Firma","signAal","text","",!0,"",!1),j("Fecha","dateAal","date","",!0,"",!1),e.jsx(I,{type:"primary",htmlType:"submit",children:"Firmar"})]})]}),e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Autoridad Ejecutante"}),e.jsx("hr",{className:""}),e.jsxs(p,{form:m,name:"section83",layout:"vertical",initialValues:r,onFinish:i,children:[j("Nombre","nameAe","text","",!0,"",!1),j("Firma","signAe","text","",!0,"",!1),j("Fecha","dateAe","date","",!0,"",!1),e.jsx(I,{type:"primary",htmlType:"submit",children:"Firmar"})]})]}),e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Otra Autoridad"}),e.jsx("hr",{className:""}),e.jsxs(p,{form:u,name:"section84",layout:"vertical",initialValues:r,onFinish:h,children:[j("Nombre","nameOa","text","",!0,"",!1),j("Firma","signOa","text","",!0,"",!1),j("Fecha","dateOa","date","",!0,"",!1),e.jsx(I,{type:"primary",htmlType:"submit",children:"Firmar"})]})]})]})})]})},on=()=>{const{id:t}=rt(),s=F(x=>x.users.user),[n,m]=o.useState("1"),[u,l]=o.useState([]),a=JSON.parse(t);o.useEffect(()=>{a!=null&&a.value&&m(a.value)},[a.value]);const r=[{label:e.jsx("div",{style:{color:"red"},children:"Seccion 1"}),value:"1"},{label:e.jsx("div",{style:{color:"red"},children:"Seccion 2"}),value:"2"},{label:e.jsx("div",{style:{color:"red"},children:"Seccion 3"}),value:"3"},{label:e.jsx("div",{style:{color:"red"},children:"Seccion 4"}),value:"4"},{label:e.jsx("div",{style:{color:"green"},children:"Seccion 5"}),value:"5"},{label:e.jsx("div",{style:{color:"green"},children:"Seccion 6"}),value:"6"},{label:e.jsx("div",{style:{color:"blue"},children:"Seccion 7"}),value:"7"},{label:e.jsx("div",{style:{color:"blue"},children:"Seccion 8"}),value:"8"}];return e.jsxs("div",{className:"pageContainer",children:[e.jsx(z,{className:"d-flex justify-content-center",children:e.jsx(it,{options:r,value:n,onChange:m,size:"medium"})}),e.jsxs(z,{children:[n==="1"&&e.jsx(Za,{value:n,setValue:m,number:a==null?void 0:a.id,show:u,setShow:l}),n==="2"&&u.includes("2")&&e.jsx(en,{value:n,setValue:m,number:a==null?void 0:a.id,show:u,setShow:l}),n==="3"&&u.includes("3")&&e.jsx(sn,{value:n,setValue:m,number:a==null?void 0:a.id,show:u,setShow:l}),n==="4"&&u.includes("4")&&e.jsx(tn,{value:n,setValue:m,number:a==null?void 0:a.id,show:u,setShow:l}),n==="5"&&_.includes(s==null?void 0:s.role)&&e.jsx(an,{value:n,setValue:m,number:a==null?void 0:a.id,show:u,setShow:l}),n==="6"&&_.includes(s==null?void 0:s.role)&&e.jsx(nn,{value:n,setValue:m,number:a==null?void 0:a.id,show:u,setShow:l}),n==="7"&&_.includes(s==null?void 0:s.role)&&e.jsx(ln,{value:n,setValue:m,number:a==null?void 0:a.id,show:u,setShow:l}),n==="8"&&_.includes(s==null?void 0:s.role)&&e.jsx(rn,{value:n,setValue:m,number:a==null?void 0:a.id,show:u,setShow:l})]})]})},cn="/assets/LogoHorizontal-DH1awmUX.svg",dn=({children:t})=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"container-fluid layoutContainer",children:e.jsx("div",{className:"subContent",children:e.jsx("div",{className:"abs-center",children:e.jsxs(z,{children:[e.jsx(U,{className:"colStyle",children:e.jsx("div",{className:"",style:{marginBottom:20,marginTop:20},children:e.jsx("img",{src:cn,alt:"",className:"brandLogo"})})}),e.jsx(U,{className:"colStyle",children:e.jsxs(Te,{className:"mainBox",children:[e.jsx("div",{className:"line"}),e.jsx("p",{className:"textStyle cardSubTitle",children:"¡Welcome!"}),e.jsx("p",{className:"textStyle text5 text-center mt-3",children:"Login to continue"}),e.jsx("div",{className:"line"}),e.jsx("div",{className:"formContainer pt-4",children:t})]})})]})})})})}),un=()=>{const{loading:t}=F(l=>l.auth),{login:s}=re(),[n]=p.useForm(),m=[{label:"Email",name:"email",type:"email",placeholder:"Email"},{label:"Password",name:"password",type:"password",placeholder:"Password"}],u=l=>{const a={email:l.email,password:l.password};s(a)};return e.jsx(e.Fragment,{children:e.jsx(Ne,{fields:m,onFinish:u,formName:n,buttonTitle:t?"Loading...":"Login",name:"login"})})},mn=()=>e.jsx(e.Fragment,{children:e.jsx(dn,{children:e.jsx(un,{})})}),vs=()=>{var k;o.useState([]);const t=F(f=>f.tenants.tenants);o.useState(!0),oe();const{data:s,isSuccess:n,error:m,isFetching:u,refetch:l}=ea({}),[a,r]=o.useState({}),[x,N]=o.useState({}),c=(f,i,h)=>{console.log("Various parameters",f,i,h),r(i),N(h)};t==null||t.map(f=>({text:f.name,value:f.name}));const y=(k=s==null?void 0:s.data)==null?void 0:k.map(f=>{var i,h;return{key:f._id,name:f.assetName,internalId:f.internalId,location:(i=f.location)==null?void 0:i.locationName,city:(h=f.location)==null?void 0:h.city}}),C=[{title:"Name",dataIndex:"name",key:"name",render:f=>e.jsx("a",{children:f}),sorter:(f,i)=>{var h,d;return((h=f.name)==null?void 0:h.length)-((d=i.name)==null?void 0:d.length)}},{title:"Serial Equipo",dataIndex:"internalId",key:"internalId"},{title:"Ubicación",dataIndex:"location",key:"location"},{title:"Ciudad",dataIndex:"city",key:"city"},{title:"Action",key:"action",render:(f,i)=>e.jsxs(fe,{size:"middle",children:[e.jsx(ge,{style:{fontSize:20,color:"#008000",marginRight:10},onClick:()=>b(i)}),e.jsx(ve,{style:{fontSize:20,color:"#FF0000",marginRight:10},onClick:()=>j(i)})]})}],b=f=>{console.log(f)},j=f=>{console.log(f.tenant.length)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(le,{dataSource:y,columns:C,onChange:c})})})})})},hn=["vehicle","property","equipment","machinery","other"],xn=()=>{const[t]=p.useForm(),{credentials:s}=re(),n=F(v=>v.locations.locations),[m,u]=o.useState(!1);o.useState(null);const[l,a]=o.useState(!1),[r,x]=o.useState(!1),[N,c]=o.useState(null),[y,{isSuccess:C,error:b,reset:j}]=sa(),k=n==null?void 0:n.map(v=>({label:v.locationName,value:v._id}));console.log("locations",k);const f=[{label:"Nombre",name:"assetName",type:"text",placeholder:"Nombre"},{label:"Serial Equipo",name:"internalId",type:"text",placeholder:"Serial del equipo"},{label:"Tipo",name:"assetType",type:"select",placeholder:"Tipo",options:hn.map(v=>({label:v,value:v}))},{label:"Ubicacion",name:"location",type:"select",placeholder:"Ubicacion",options:n.map(v=>({label:v.locationName,value:v._id}))}],i=()=>{x(!1),a(!1),u(!0)},h=()=>{x(!1),a(!1),t.resetFields(),u(!1)},d=()=>{x(!1),a(!1),t.resetFields(),u(!1)},g=v=>{const w={...v,isActive:!0,tenant:s==null?void 0:s.tenantId};y(w).unwrap(),j()};return o.useEffect(()=>{C&&(a(!0),c("Asset created successfully")),b&&(x(!0),c("Error creating asset"))},[C,b]),e.jsxs(e.Fragment,{children:[e.jsx(I,{type:"primary",onClick:i,children:"Add Asset"}),e.jsxs(W,{open:m,forceRender:!0,title:"Add assets",onOk:h,onCancel:d,cancelButtonProps:{form:t,key:"cancel",htmlType:"reset"},footer:[e.jsx(I,{type:"default",onClick:d,children:"Exit"},"exit")],children:[e.jsx(Ne,{fields:f,onFinish:g,name:"assetForm",buttonTitle:"Submit",formName:t}),r&&we({message:N}),l&&ke({message:N})]})]})},jn=()=>e.jsxs(e.Fragment,{children:[e.jsxs(z,{children:[e.jsx(U,{span:12,className:"text-center",children:e.jsx("h4",{children:"Assets administration"})}),e.jsx(U,{span:12,className:"text-center",children:e.jsx(xn,{})})]}),e.jsx(z,{className:"pt-3",children:e.jsx(U,{span:24,children:e.jsx(vs,{})})})]}),pn=()=>e.jsx("div",{children:"Maintenance"}),fn=()=>e.jsxs(e.Fragment,{children:[e.jsxs(z,{children:[e.jsx(U,{span:12,className:"text-center",children:e.jsx("h4",{children:"Assets maintenance"})}),e.jsx(U,{span:12,className:"text-center",children:e.jsx(pn,{})})]}),e.jsx(z,{className:"pt-3",children:e.jsx(U,{span:24,children:e.jsx(vs,{})})})]}),gn=()=>{const[t,s]=o.useState(!0),[n,m]=o.useState(!1),u=l=>{switch(l){case 1:s(!0),m(!1);break;case 2:s(!1),m(!0);break;default:s(!0),m(!1);break}};return e.jsxs("div",{className:"pageContainer",children:[e.jsx("div",{className:"tabs",children:e.jsxs("ul",{className:"tab-container",children:[e.jsx("li",{id:"tab1",className:t?"tab activeItem activeList":"tab",children:e.jsx("a",{onClick:()=>u(1),children:"Administración"})}),e.jsx("li",{id:"tab2",className:n?"tab activeItem activeList":"tab",children:e.jsx("a",{onClick:()=>u(2),children:"Mantenimiento"})})]})}),e.jsxs("div",{className:"blockBorder",children:[t&&e.jsx(jn,{}),n&&e.jsx(fn,{})]})]})},Ae=ot({reducer:{auth:Et,users:Ut,tenants:Xt,assets:la,locations:Bt,permits:Xa,[J.reducerPath]:J.reducer},middleware:t=>t().concat(J.middleware),devTools:!0});ct(Ae.dispatch);const vn=()=>(o.useEffect(()=>{console.log("subscribing");const t=Ae.dispatch(Q.endpoints.getLocations.initiate()),s=Ae.dispatch(V.endpoints.getPermits.initiate());return()=>{console.log("unsubscribing"),t.unsubscribe(),s.unsubscribe()}},[]),e.jsx(ss,{})),Nn=()=>e.jsx("div",{className:"pageContainer",children:e.jsx("div",{className:"tabs",children:e.jsxs("div",{className:"tab-container",children:[e.jsxs("div",{id:"tab1",className:"tab",children:[e.jsx("a",{href:"#tab1",children:"Seccion 1"}),e.jsx("div",{className:"tab-content",children:e.jsx("p",{className:"textSubtitle",children:"INFORMACION GENERAL"})})]}),e.jsxs("div",{id:"tab2",className:"tab",children:[e.jsx("a",{href:"#tab2",children:"Seccion 2"}),e.jsx("div",{className:"tab-content",children:e.jsx("p",{className:"textSubtitle",children:"ANALISIS DE RIESGO, CERTIFICADOS DE APOYO Y DOCUMENTOS SOPORTE REQUERIDOS"})})]}),e.jsxs("div",{id:"tab3",className:"tab",children:[e.jsx("a",{href:"#tab3",children:"Seccion 3"}),e.jsx("div",{className:"tab-content",children:e.jsx("p",{className:"textSubtitle",children:"MONITOREO DE GASES"})})]})]})})}),yn=()=>{p.useForm();const t=oe(),s=F(h=>h.permits.permits),n=te();o.useState(!0);const[m,u]=o.useState(!1),[l,a]=o.useState(!1);o.useState(null);const[r,x]=o.useState(0),[N,c]=o.useState({status:"pending",section1:{completed:!1},section2:{completed:!1},section3:{completed:!1},section4:{completed:!1},section5:{completed:!1},section6:{completed:!1},more:{}}),[y,{isSuccess:C,error:b,reset:j}]=Qa(),k=()=>{const h=(s==null?void 0:s.length)>0?s[s.length-1].formNumber:0,d=s.find(g=>g.formNumber===h);(d==null?void 0:d.formNumber)>0&&(d==null?void 0:d.status)!=="pending"?(y(N).then(g=>{t(Re.setPermit(g.data.data))}),x(h+1),i(h+1)):h===0?(y(N).then(g=>{t(Re.setPermit(g.data.data))}),x(h),i(h+1)):(console.log("Permiso creado completado",d),t(Re.setPermit(d)),x(d==null?void 0:d.formNumber),i(d==null?void 0:d.formNumber))},f=()=>{k(),a(!1),u(!1)},i=h=>{const d=JSON.stringify({id:h,value:null});n(`/form/${d}`)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsx("div",{className:"col-md",children:e.jsx(I,{type:"primary",className:"",onClick:f,children:"Nuevo permiso"})})})})},Sn=()=>{var M;const t=te(),s=F(S=>S.users.user),[n,m]=o.useState([]),[u,l]=o.useState(!0),[a,r]=o.useState(null),{data:x,isLoading:N,error:c}=_a(),[y,C]=o.useState(!1),[b,j]=o.useState(!1),[k,f]=o.useState(!1),{data:i,isSuccess:h,error:d}=Ga(a,{skip:u});o.useEffect(()=>{const S=JSON.parse(localStorage.getItem("tempForm"));(S==null?void 0:S.length)>0&&m(S)},[]);const g=(M=x==null?void 0:x.data)==null?void 0:M.map(S=>({key:S._id,formNumber:S.formNumber,status:S.status,date:L(S.createdAt).format("DD/MM/YYYY HH:MM"),company:S.company||"N/A"})),v=e.jsxs("div",{className:"",children:[e.jsx("p",{className:"",children:"Completar formulario"}),e.jsx("p",{className:"",children:"ó Editar antes de su aprobación"})]}),w=[{title:"Número",dataIndex:"formNumber",key:"formNumber",render:S=>e.jsx("a",{children:S})},{title:"Fecha",dataIndex:"date",key:"date"},{title:"Estado",dataIndex:"status",key:"status"},{title:"Compañía",dataIndex:"company",key:"company"},{title:"Acciones",key:"action",render:(S,q)=>e.jsxs(fe,{size:"middle",children:[e.jsx(ne,{title:"Editar / Completar",content:v,children:e.jsx(ge,{style:{fontSize:20,color:"#008000",marginRight:10},onClick:()=>E(q)})}),e.jsx(ne,{title:"Eliminar",children:e.jsx(ve,{style:{fontSize:20,color:"#FF0000",marginRight:10},onClick:()=>T(q)})}),_.includes(s==null?void 0:s.role)&&q.status==="waiting"&&e.jsx(ne,{title:"Aprobar",children:e.jsx(es,{style:{fontSize:20,color:"#0000FF"},onClick:()=>R(q)})}),_.includes(s==null?void 0:s.role)&&q.status==="approved"&&e.jsx(ne,{title:"Completar",children:e.jsx(dt,{style:{fontSize:20,color:"#008000"},onClick:()=>A(q)})}),_.includes(s==null?void 0:s.role)&&q.status==="completed"&&e.jsx(ne,{title:"Vista Previa",children:e.jsx(ut,{style:{fontSize:20,color:"#FA9C0C"},onClick:()=>D(q)})})]})}],E=S=>{r(S.key),l(!1)},R=S=>{r(S.key),l(!1),C(!0)},A=S=>{r(S.key),l(!1),j(!0)},D=S=>{r(S.key),l(!1),f(!0)};o.useEffect(()=>{if(i){let S={};y?(S=JSON.stringify({id:i==null?void 0:i.formNumber,value:"5"}),t(`/form/${S}`)):b?(S=JSON.stringify({id:i==null?void 0:i.formNumber,value:"8"}),t(`/form/${S}`)):k?(S=JSON.stringify({id:i==null?void 0:i.formNumber,value:""}),t(`/preview/${S}`)):(S=JSON.stringify({id:i==null?void 0:i.formNumber,value:null}),t(`/form/${S}`))}},[h]);const T=S=>{console.log(S)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(le,{dataSource:g,columns:w})})})})})},bn=()=>e.jsxs(e.Fragment,{children:[e.jsxs(z,{children:[e.jsx(U,{span:12,className:"text-center pt-2",children:e.jsx("h4",{children:"Administración de permisos"})}),e.jsx(U,{span:12,className:"text-center pt-2",children:e.jsx(yn,{})})]}),e.jsx(z,{className:"pt-3",children:e.jsx(U,{span:24,children:e.jsx(Sn,{})})})]}),Cn={width:"100%",height:"100%",padding:"0px 10px 0px 10px",marginTop:"20px"},An={display:"flex",justifyContent:"space-between",padding:"0px 10px 0px 10px",marginTop:"20px",marginBottom:"10px"},kn={fontSize:"20px",fontWeight:500,color:"blue"},wn={fontSize:"20px",fontWeight:100,color:"black"},En={marginLeft:"10px",fontSize:"20px",fontWeight:400,color:"red",border:"1px solid lightgrey",padding:"0px 20px 0px 20px",borderRadius:"5px"},In={display:"flex",justifyContent:"space-between"},Je={marginBottom:"10px"},We={fontSize:"1rem",fontWeight:500,color:"black",backgroundColor:"rgb(189, 198, 255)",padding:"5px 10px 5px 10px"},Fn=({section1:t})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row section-label",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[e.jsxs("p",{children:["Fecha de solicitud:"," ",e.jsx("span",{children:L(t==null?void 0:t.updatedAt).format("DD/MM/YYYY")})]}),e.jsxs("p",{className:"ps-2",children:["Hora: ",e.jsx("span",{children:L(t==null?void 0:t.updatedAt).format("HH:mm")})]})]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Compañia que requiere el sercicio: ",e.jsx("span",{children:t==null?void 0:t.company})]})})]}),e.jsxs("div",{className:"row section-label mt-2",children:[e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Instalacion: ",e.jsx("span",{children:t==null?void 0:t.location})]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Area: ",e.jsx("span",{children:t==null?void 0:t.area})]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Equipos a intervenir: ",e.jsx("span",{children:t==null?void 0:t.equipment})]})})]}),e.jsx("div",{className:"row section-label mt-2",children:e.jsxs("p",{className:"",children:["Alcance del trabajo: ",e.jsx("span",{children:t==null?void 0:t.alcance})]})}),e.jsxs("div",{className:"row section-label mt-2",children:[e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Nivel potencial de peligro identificado:"," ",e.jsx("span",{children:t==null?void 0:t.warning})]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Equipos y herramientas a usar: ",e.jsx("span",{children:t==null?void 0:t.tools})]})})]})]}),Pn=({section2:t})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"section-subtitle",children:"ANALISIS DE RIESGOS REQUERIDOS"}),e.jsxs("div",{className:"row section-label mb-2",children:[e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Análisis de seguridad en el trabajo - AST:"," ",e.jsxs("span",{className:"",children:[t!=null&&t.check1?"si":""," ",t==null?void 0:t.astNumber]})]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Análisis de peligro en la etapa de Planificación - APP:"," ",e.jsx("span",{className:"",children:t==null?void 0:t.apep})]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{className:"",children:["Otro: ",t!=null&&t.check2?"si":"N/A",e.jsxs("span",{className:"ps-2",children:["Cual? : ",t==null?void 0:t.oAnalysisDescription]})]})})]}),e.jsx("div",{className:"section-subtitle",children:"CERTIFICADOS DE APOYO REQUERIDOS"}),e.jsxs("div",{className:"row section-label mt-2",children:[e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Certificado de apoyo Trabajo en Caliente: ",e.jsx("span",{}),e.jsx("span",{})]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Certificado de apoyo de Raciaciones: ",e.jsx("span",{}),e.jsx("span",{})]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Certificado de apoyo de Excavación: ",e.jsx("span",{}),e.jsx("span",{})]})})]}),e.jsxs("div",{className:"row section-label mt-2",children:[e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Certificado de apoyo Trabajo Trabajo en Altura: ",e.jsx("span",{}),e.jsx("span",{})]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Certificado de apoyo Izaje de Carga: ",e.jsx("span",{}),e.jsx("span",{})]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Certificado de apoyo Espacios Confinados: ",e.jsx("span",{}),e.jsx("span",{})]})})]}),e.jsx("div",{className:"row section-label mt-2",children:e.jsxs("p",{children:["Otro? : ",e.jsx("span",{className:"",children:"Cual? :"})]})})]}),On=()=>{const t="https://myprop.joselimardo.com",s=F(i=>i.permits.permit),{token:n}=re(),m=o.useRef(null),[u,l]=o.useState(!1),[a,r]=o.useState(!1),[x,{isSuccess:N,error:c,reset:y}]=K(),C=async(i,h)=>{const d=await as("upload",n,i);if(d.status===200){const g=`${t}/${d.data.url}`;b(g)}else console.log("ERROR PDF >>>",d)},b=async i=>{if(console.log("CREATE EVIDENCE:",i),!(s!=null&&s.more.file)){const h=await Ct("create-evidence",n,{file:i});if(console.log(h),h.status===201){console.log("RESPONSE:",h);const d={...s,more:{...s.more,evidence:h.data.file,pdf:i}};x({id:s._id,data:d}),y()}else Qe({title:"Error al crear la evidencia",content:"Ha ocurrido un error al crear la evidencia"})}},j=()=>{var h;const i=(h=s==null?void 0:s.more)==null?void 0:h.evidence;i&&window.open(i,"_blank")},k=()=>{var h;const i=(h=s==null?void 0:s.more)==null?void 0:h.pdf;console.log("URL:",i),i&&window.open(i,"_blank")};o.useEffect(()=>{var i;(i=s==null?void 0:s.more)!=null&&i.evidence||f()},[]),o.useEffect(()=>{N&&(l(!0),Ee({title:"Permiso creado correctamente",content:"El permiso ha sido creado y se ha generado la evidencia"}))},[N]),o.useEffect(()=>{c&&(r(!0),Qe({title:"Error al crear el permiso",content:"Ha ocurrido un error al crear el permiso"}))},[c]);const f=()=>{mt(m.current).then(i=>{const h=`permiso${s.formNumber}.pdf`,d=i.toDataURL("image/png",.8),g=new ht,v=210,w=i.height*v/i.width;g.addImage(d,"PNG",0,5,v,w);const E=g.output("blob"),R=new FormData;R.append("file",E,h),g.save(h),C(R)})};return e.jsxs("div",{children:[e.jsxs("div",{ref:m,style:Cn,children:[e.jsxs("div",{style:An,children:[e.jsx("div",{style:kn,children:"NORMA CONTROL DE TRABAJO"}),e.jsxs("div",{style:In,children:[e.jsx("div",{style:wn,children:"PERMISO DE TRABAJO GENERAL"}),e.jsx("div",{style:En,children:s==null?void 0:s.formNumber})]})]}),e.jsxs("div",{style:Je,children:[e.jsx("div",{style:We,children:"SECCION 1"}),e.jsx(Fn,{section1:s==null?void 0:s.section1})]}),e.jsxs("div",{style:Je,children:[e.jsx("div",{style:We,children:"SECCION 2"}),e.jsx(Pn,{section2:s==null?void 0:s.section2})]})]}),e.jsx("div",{className:"",children:e.jsx(ne,{title:"Ver PDF",children:e.jsx($e,{onClick:k,icon:e.jsx(xt,{style:{color:"red"}}),style:{right:94},children:"Descargar PDF"})})}),e.jsx("div",{className:"",children:e.jsx(ne,{title:"Ver Evidencia",children:e.jsx($e,{onClick:j,icon:e.jsx(jt,{style:{color:"green"}}),style:{right:24},children:"Ver Evidencia"})})})]})};function Rn(){const{isLoggedIn:t,logout:s}=re(),[n,m]=o.useState(!1);o.useEffect(()=>{localStorage.setItem("lastActivity",Date.now().toString());const r=2*60*60*1e3,x=setTimeout(()=>{m(!0),s()},r),N=()=>{localStorage.setItem("lastActivity",Date.now().toString()),clearTimeout(x),setTimeout(()=>{m(!0),s()},r)};return document.addEventListener("mousemove",N),document.addEventListener("keydown",N),()=>{document.removeEventListener("mousemove",N),document.removeEventListener("keydown",N),clearTimeout(x)}},[]),o.useEffect(()=>{n===!0&&Ra({title:"Sesión expirada",content:"Su sesión ha expirado. Por favor, vuelva a iniciar sesión."})},[n]);const u=He(Ye(e.jsx(Y,{element:e.jsx(vn,{}),children:e.jsxs(Y,{element:e.jsx(Pa,{}),errorElement:e.jsx(ua,{}),children:[e.jsx(Y,{path:"/",element:e.jsx(da,{})}),e.jsx(Y,{path:"/settings",element:e.jsx(za,{})}),e.jsx(Y,{path:"/assets-settings",element:e.jsx(gn,{})}),e.jsx(Y,{path:"/reports",element:e.jsx(Va,{})}),e.jsx(Y,{path:"/form/:id",element:e.jsx(on,{})}),e.jsx(Y,{path:"/hot-work",element:e.jsx(Nn,{})}),e.jsx(Y,{path:"/add-user",element:e.jsx(ps,{})}),e.jsx(Y,{path:"/permissions",element:e.jsx(bn,{})}),e.jsx(Y,{path:"/preview/:id",element:e.jsx(On,{})}),e.jsx(Y,{path:"*",element:e.jsx(ze,{})})]})}))),l=He(Ye(e.jsxs(Y,{children:[e.jsx(Y,{path:"/",element:e.jsx(mn,{})}),e.jsx(Y,{path:"*",element:e.jsx(ze,{})})]}))),a=t?u:l;return e.jsx(e.Fragment,{children:e.jsx(pt,{router:a})})}xe.defaults.baseURL="https://myprop.joselimardo.com/api";console.log("API SERVER: ",xe.defaults.baseURL);ft.createRoot(document.getElementById("root")).render(e.jsx(gt.StrictMode,{children:e.jsx(vt,{store:Ae,children:e.jsx(ra,{children:e.jsx(Rn,{})})})}));
