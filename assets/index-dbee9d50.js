import{a as S,u as B,b as $,c as b,r as P,j as e,N as y,C as H,O as A,d as _,L as u,e as c,T as q,I as J,A as N,M as K,f as g,D as W,g as I,h as Y,i as Q,k as X,l as Z,R as i,B as ee,m as se,n as d,o as ne,p as te,t as re,q as ae,P as oe}from"./vendor-5dc834d7.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const x of a.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&t(x)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();const le="modulepreload",ie=function(s){return"/"+s},O={},h=function(n,r,t){if(!r||r.length===0)return n();const o=document.getElementsByTagName("link");return Promise.all(r.map(a=>{if(a=ie(a),a in O)return;O[a]=!0;const x=a.endsWith(".css"),E=x?'[rel="stylesheet"]':"";if(!!t)for(let m=o.length-1;m>=0;m--){const f=o[m];if(f.href===a&&(!x||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${E}`))return;const p=document.createElement("link");if(p.rel=x?"stylesheet":le,x||(p.as="script",p.crossOrigin=""),p.href=a,document.head.appendChild(p),x)return new Promise((m,f)=>{p.addEventListener("load",m),p.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>n())},ce="/assets/Logo1-9d7283fd.png",de="CREATE_PROFILE",U="REGISTER_SUCCESS",ue="REGISTER_FAIL",k="LOGIN_SUCCESS",he="LOGIN_FAIL",F="LOGOUT_SUCCESS",me="LOGOUT_FAIL",xe="GET_ALL_USERS",pe="GET_ALL_USERS_FAIL",je="GET_USER",fe="GET_USER_FAIL",_e="CREATE_PROFILE",ge="CREATE_PROFILE_FAIL",Ee="UPDATE_PROFILE",Le="UPDATE_PROFILE_FAIL",Se="CREATE_COMPENSATION",ye="CREATE_COMPENSATION_FAIL",Ie="GET_COMPENSATION",Ae="GET_COMPENSATION_FAIL",Ne="GET_ALL_COMPENSATION",Ce="GET_ALL_COMPENSATION_FAIL";function hs(s){return console.log("axios.defaults.baseURL",S.defaults.baseURL),console.log("Create en actions",s),async n=>{try{let r=await S.post("/users",s);const t=r.data;return console.log("Response",t),n({type:U,payload:r})}catch(r){return console.log("ERROR: ",r.response.data),n({type:ue,payload:r.response.data})}}}function ms(s){return console.log("axios.defaults.baseURL",S.defaults.baseURL),async n=>{try{const t=(await S.post("/userlogin",s)).data;return t.data.token&&(localStorage.setItem("user",JSON.stringify(t.data)),localStorage.setItem("profile",JSON.stringify(t.data.user))),n({type:k,payload:t})}catch(r){return console.log(r),n({type:he,payload:r.response.data})}}}function ve(s){return async n=>{try{return localStorage.removeItem("user"),n({type:F,payload:[]})}catch(r){return console.log(r),n({type:me,payload:r})}}}function Oe(){var v;const s=B(),n=$(),r=b(L=>L.auth),t=(v=JSON.parse(localStorage.getItem("user")))==null?void 0:v.user;let o;r.avatar!==""&&(o=r.avatar);const[a,x]=P.useState(null),E=!!a,C=L=>{x(L.currentTarget)},p=()=>{x(null)},m=r.isLoggedIn,f=t==null?void 0:t.role,j="lg",D=()=>{s(ve()).then(L=>{console.log("Respuesta del logout: ",L),n("/")})},G=()=>{n("/login")},w=()=>{n("/register")},z=()=>{n("/user-dashboard")},M=()=>{n("/")},V=()=>{n("/profile")};return e.jsx(e.Fragment,{children:e.jsx(y,{expand:j,className:"mb-3",bg:"dark",variant:"dark",children:e.jsxs(H,{fluid:!0,children:[e.jsx(y.Brand,{href:"/",children:e.jsx("img",{src:ce,alt:"MyPropChain",width:"30",height:"30",className:"d-inline-block align-top"})}),e.jsx(y.Toggle,{"aria-controls":`offcanvasNavbar-expand-${j}`}),e.jsxs(y.Offcanvas,{id:`offcanvasNavbar-expand-${j}`,"aria-labelledby":`offcanvasNavbarLabel-expand-${j}`,placement:"end",children:[e.jsx(A.Header,{closeButton:!0,children:e.jsx(A.Title,{id:`offcanvasNavbarLabel-expand-${j}`,children:"MyPropChain"})}),e.jsxs(A.Body,{children:[e.jsxs(_,{className:"justify-content-start flex-grow-1 pe-3",children:[e.jsx(_.Link,{as:u,to:"/",children:"Home"}),e.jsx(_.Link,{as:u,to:"/about",children:"About us"}),e.jsx(_.Link,{as:u,to:"/news",children:"News"}),e.jsx(_.Link,{as:u,to:"/register",children:"Register"}),m?e.jsxs(c,{title:"My Account",id:`offcanvasNavbarDropdown-expand-${j}`,children:[e.jsx(c.Item,{as:u,to:"/user-dashboard",children:"Dashboard"}),e.jsx(c.Item,{as:u,to:"/user-dashboard",children:"Assets"}),e.jsx(c.Divider,{}),e.jsx(c.Item,{as:u,to:"/profile",children:"Profile"}),m&&f==="admin"?e.jsx(c.Divider,{}):null,m&&f==="admin"?e.jsx(c.Item,{as:u,to:"/admin-dashboard",children:"Admin panel"}):null]}):null,m?e.jsxs(c,{title:"Assets",id:`offcanvasNavbarDropdown-expand-${j}`,children:[e.jsx(c.Item,{as:u,to:"/assets",children:"Create Assets"}),e.jsx(c.Item,{as:u,to:"/assets",children:"Consult Assets"})]}):null,m?e.jsxs(c,{title:"Compensations",id:`offcanvasNavbarDropdown-expand-${j}`,children:[e.jsx(c.Item,{as:u,to:"/compensations",children:"Create Compensations"}),e.jsx(c.Item,{as:u,to:"/consult-compensations",children:"Consult Compenstions"})]}):null,m?e.jsxs(c,{title:"Managment",id:`offcanvasNavbarDropdown-expand-${j}`,children:[e.jsx(c.Item,{as:u,to:"gei-control",children:"Gestión de emisiones GEI"}),e.jsx(c.Item,{as:u,to:"/",children:"Modulo OKR"})]}):null]}),e.jsxs(_,{children:[e.jsx(q,{title:"Account settings",children:e.jsx(J,{onClick:C,size:"small",sx:{ml:2},"aria-controls":E?"account-menu":void 0,"aria-haspopup":"true","aria-expanded":E?"true":void 0,children:e.jsx(N,{sx:{width:32,height:32},children:o})})}),e.jsxs(K,{anchorEl:a,id:"account-menu",open:E,onClose:p,onClick:p,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[m?e.jsxs(g,{onClick:V,children:[e.jsx(N,{})," Profile"]}):null,e.jsxs(g,{onClick:z,children:[e.jsx(N,{})," My account"]}),e.jsx(W,{}),e.jsxs(g,{onClick:w,children:[e.jsx(I,{children:e.jsx(Y,{fontSize:"small"})}),"Add another account"]}),e.jsxs(g,{onClick:M,children:[e.jsx(I,{children:e.jsx(Q,{fontSize:"small"})}),"Settings"]}),m?e.jsxs(g,{onClick:D,children:[e.jsx(I,{children:e.jsx(X,{fontSize:"small"})}),"Logout"]}):e.jsxs(g,{onClick:G,children:[e.jsx(I,{children:e.jsx(Z,{fontSize:"small"})}),"Login"]})]})]})]})]})]})},j)})}function Re(){return e.jsx(e.Fragment,{children:e.jsx(Oe,{})})}const Te="/assets/LogoPart2-62813117.png";function be(){return e.jsx(e.Fragment,{children:e.jsx("footer",{className:"py-5 footer-container",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("a",{href:"/",className:"",children:e.jsx("img",{src:Te,alt:"",className:"",style:{width:30}})}),e.jsx("small",{className:"d-block mb-3 text-body-secondary",children:"© 2022–2023"})]})}),e.jsxs("div",{className:"col-6 col-md",children:[e.jsx("h5",{children:"Features"}),e.jsxs("ul",{className:"list-unstyled text-small",children:[e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"#",children:"Cool stuff"})}),e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"#",children:"Random feature"})}),e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"#",children:"Team feature"})}),e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"#",children:"Stuff for developers"})})]})]}),e.jsxs("div",{className:"col-6 col-md",children:[e.jsx("h5",{children:"Resources"}),e.jsxs("ul",{className:"list-unstyled text-small",children:[e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"#",children:"Proffesionals"})}),e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"#",children:"Handymans"})}),e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"#",children:"Another resource"})})]})]}),e.jsxs("div",{className:"col-6 col-md",children:[e.jsx("h5",{children:"Account"}),e.jsxs("ul",{className:"list-unstyled text-small",children:[e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"#",children:"My Accout"})}),e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"/register",children:"Create Account"})}),e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"/login",children:"Login"})})]})]}),e.jsxs("div",{className:"col-6 col-md",children:[e.jsx("h5",{children:"About"}),e.jsxs("ul",{className:"list-unstyled text-small",children:[e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"/about",children:"Team"})}),e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"/about",children:"Locations"})}),e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"#",children:"Privacy"})}),e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"#",children:"Terms"})})]})]})]})})})}const Pe="/assets/Vector-70c97ec3.svg";function Ue({children:s}){const n={backgroundImage:`url(${Pe})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",minHeight:"100vh",minWidth:"95%",overflow:"hidden",margin:"0"};return e.jsxs(e.Fragment,{children:[e.jsx(Re,{}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx("div",{style:n,children:s})}),e.jsx(be,{})]})}function ke(){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center pt-5",children:[e.jsx("h1",{children:"404"}),e.jsx("h3",{children:"Oops! La página a la que intenta ingresar"}),e.jsx("h3",{children:"No existe o no tiene permiso de acceso."}),e.jsx("p",{children:"Aqui hay unos links que puede ayudarlo:"}),e.jsx(u,{to:"/",children:"Home"}),e.jsx(u,{to:"/contact",children:"Contact"})]})})}class Fe extends i.Component{constructor(n){super(n),this.state={tieneError:!1,mensajeError:""}}static getDerivedStateFromError(n){return{tieneError:!0,mensajeError:n.message}}componentDidCatch(n){console.log("Component did catch:",n.message)}render(){return this.state.tieneError?e.jsxs("div",{className:"px-4 py-2 m-4",children:[e.jsx("h1",{className:"mt-2 font-bold text-lg mb-1",children:"Hubo un error:"}),e.jsxs("p",{children:[" ",this.state.mensajeError," "]}),e.jsxs("button",{className:"px-4 py-2 rounded bg-blue-800 hover:bg-blue-700 active:outline text-sm",onClick:()=>window.location.href="/",children:["Recargar la página"," "]})]}):this.props.children}}const De=i.lazy(()=>h(()=>import("./Home-7e6bd413.js"),["assets/Home-7e6bd413.js","assets/vendor-5dc834d7.js","assets/Home-07c959c0.css"])),Ge=i.lazy(()=>h(()=>import("./Landing-dcf4266d.js"),["assets/Landing-dcf4266d.js","assets/vendor-5dc834d7.js"])),we=i.lazy(()=>h(()=>import("./Login-cc044a08.js"),["assets/Login-cc044a08.js","assets/vendor-5dc834d7.js","assets/LogoHorizontal-222b80f9.js","assets/sweetalert2.all-a46bd305.js"])),ze=i.lazy(()=>h(()=>import("./Register-96dedfe0.js"),["assets/Register-96dedfe0.js","assets/vendor-5dc834d7.js","assets/LogoHorizontal-222b80f9.js","assets/sweetalert2.all-a46bd305.js","assets/FormHelper-26c37e11.js","assets/index.esm-d4c6dd44.js"])),Me=i.lazy(()=>h(()=>import("./Profile-eff382d0.js"),["assets/Profile-eff382d0.js","assets/vendor-5dc834d7.js","assets/FormikDynamic-5b60525c.js","assets/users-e7182800.js","assets/compensation-c399ecc7.js","assets/sweetalert2.all-a46bd305.js","assets/index.esm-d4c6dd44.js"])),Ve=i.lazy(()=>h(()=>import("./About-13658041.js"),["assets/About-13658041.js","assets/vendor-5dc834d7.js"])),Be=i.lazy(()=>h(()=>import("./Logout-4003587b.js"),["assets/Logout-4003587b.js","assets/vendor-5dc834d7.js"])),$e=i.lazy(()=>h(()=>import("./Contact-7d9e4846.js"),["assets/Contact-7d9e4846.js","assets/vendor-5dc834d7.js"])),He=i.lazy(()=>h(()=>import("./News-4dacf228.js"),["assets/News-4dacf228.js","assets/vendor-5dc834d7.js"])),qe=i.lazy(()=>h(()=>import("./Assets-8a6bf477.js"),["assets/Assets-8a6bf477.js","assets/vendor-5dc834d7.js","assets/FormikDynamic-5b60525c.js","assets/users-e7182800.js","assets/compensation-c399ecc7.js","assets/sweetalert2.all-a46bd305.js","assets/index.esm-d4c6dd44.js"])),Je=i.lazy(()=>h(()=>import("./Compensations-43071be8.js"),["assets/Compensations-43071be8.js","assets/vendor-5dc834d7.js","assets/sweetalert2.all-a46bd305.js","assets/FormikDynamic-5b60525c.js","assets/users-e7182800.js","assets/compensation-c399ecc7.js","assets/index.esm-d4c6dd44.js","assets/FormHelper-26c37e11.js"])),Ke=i.lazy(()=>h(()=>import("./ConsultCompensations-f8d7e456.js"),["assets/ConsultCompensations-f8d7e456.js","assets/vendor-5dc834d7.js","assets/compensation-c399ecc7.js"])),We=i.lazy(()=>h(()=>import("./GeiControl-fe29f647.js"),["assets/GeiControl-fe29f647.js","assets/vendor-5dc834d7.js"])),Ye=i.lazy(()=>h(()=>import("./index-f4bc14e4.js"),["assets/index-f4bc14e4.js","assets/vendor-5dc834d7.js","assets/users-e7182800.js"])),Qe=i.lazy(()=>h(()=>import("./index-eb3cf9c6.js"),["assets/index-eb3cf9c6.js","assets/vendor-5dc834d7.js"]));function Xe(){var r;const s=b(t=>t.auth.isLoggedIn),n=(r=JSON.parse(localStorage.getItem("user")))==null?void 0:r.user;return console.log("<<<<LOGGED desde APP>>>>",s),e.jsx("div",{className:"App",children:e.jsx(P.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(ee,{children:e.jsx(Fe,{children:e.jsx(Ue,{children:e.jsxs(se,{children:[e.jsx(d,{path:"*",element:e.jsx(ke,{})}),e.jsx(d,{path:"/login",element:e.jsx(we,{})}),e.jsx(d,{path:"/register",element:e.jsx(ze,{})}),e.jsx(d,{path:"/home",element:e.jsx(De,{})}),e.jsx(d,{path:"/",element:e.jsx(Ge,{})}),e.jsx(d,{path:"/about",element:e.jsx(Ve,{})}),e.jsx(d,{path:"/news",element:e.jsx(He,{})}),e.jsx(d,{path:"/contact",elemamt:e.jsx($e,{})}),e.jsx(d,{path:"/logout",element:e.jsx(Be,{})}),e.jsx(d,{path:"/profile",element:e.jsx(Me,{})}),e.jsx(d,{path:"/assets",element:e.jsx(qe,{})}),e.jsx(d,{path:"/compensations",element:e.jsx(Je,{})}),e.jsx(d,{path:"/consult-compensations",element:e.jsx(Ke,{})}),e.jsx(d,{path:"/gei-control",element:e.jsx(We,{})}),(n==null?void 0:n.role)==="admin"?e.jsx(d,{path:"/admin-dashboard",element:e.jsx(Ye,{})}):null,e.jsx(d,{path:"/user-dashboard",element:e.jsx(Qe,{})})]})})})})})})}const l=JSON.parse(localStorage.getItem("user"));var R,T;const Ze=l?{isLoggedIn:!0,user:l,avatar:(T=l==null?void 0:l.user)==null?void 0:T.name.charAt(0).toUpperCase().concat((R=l==null?void 0:l.user)==null?void 0:R.lastname.charAt(0).toUpperCase())}:{isLoggedIn:!1,user:null,avatar:""};function es(s=Ze,n){var o,a;const{type:r,payload:t}=n;switch(n.type){case U:return{...s,isLoggedIn:!1,user:t.data.data,avatar:""};case k:return console.log("<<<<REDUCER LOGIN_SUCCESS>>>>",l==null?void 0:l.user),{...s,isLoggedIn:!0,user:t,avatar:(a=l==null?void 0:l.user)==null?void 0:a.name.charAt(0).toUpperCase().concat((o=l==null?void 0:l.user)==null?void 0:o.lastname.charAt(0).toUpperCase())};case de:return{...s,user:t};case F:return{...s,isLoggedIn:!1,user:null,avatar:""};default:return s}}const ss={userProfile:[],users:[],isLoading:!0};function ns(s=ss,n){const{type:r,payload:t}=n;switch(n.type){case _e:return{...s,userProfile:t.data.data};case ge:return{...s,userProfile:t};case Ee:return console.log("Update profile success",t),{...s,userProfile:t};case Le:return{...s,userProfile:t};case xe:return{...s,isLoading:!1,users:t};case pe:return{...s,users:t};default:return s}}const ts={user:[],isLoading:!0};function rs(s=ts,n){const{type:r,payload:t}=n;switch(n.type){case je:return{...s,isLoading:!1,user:t};case fe:return{...s,user:t};default:return s}}const as={compensation:[]};function os(s=as,n){const{type:r,payload:t}=n;switch(n.type){case Ie:return{...s,isLoading:!1,compensation:t};case Ae:return{...s,compensation:t};case Ne:return{...s,isLoading:!1,compensation:t};case Ce:return{...s,compensation:t};case Se:return{...s,isLoading:!1,compensation:t};case ye:return{...s,compensation:t};default:return s}}const ls=ne({name:"userSlice",initialState:{users:[],user:[],isLoading:!1},reducers:{startLoading:s=>{s.isLoading=!0},setUsers:(s,n)=>{s.isLoading=!1,s.users=n.payload}}}),is=te({reducer:{auth:es,users:ns,user:rs,compensation:os,userSlice:ls.reducer},middleware:s=>s().concat(re)});const cs="https://myprop.joselimardo.com";S.defaults.baseURL=cs;const ds=ae.createRoot(document.getElementById("root"));ds.render(e.jsx(oe,{store:is,children:e.jsx(i.StrictMode,{children:e.jsx(Xe,{})})}));export{Se as C,Ne as G,Ee as U,Ae as a,ye as b,hs as c,xe as d,pe as e,Le as f,Te as l,ms as u};
