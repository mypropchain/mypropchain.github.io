import{j as a,r as S,u as E,c as u,b as I}from"./vendor-5dc834d7.js";import{u as R}from"./users-e7182800.js";import{c as U}from"./compensation-c399ecc7.js";import{a as p,E as h,F as V,b as G,S as d}from"./sweetalert2.all-a46bd305.js";import{c as Y,Y as J,b as B}from"./index.esm-d4c6dd44.js";const _=({label:r,...t})=>{const[i]=p(t);return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"d-flex flex-column px-5",children:[a.jsx("div",{children:a.jsx("label",{className:"class-label",htmlFor:t.name||t.id,children:r})}),a.jsx("div",{children:a.jsx("input",{className:"form-control mb-3",style:{width:"30rem"},...i,...t})}),a.jsx(h,{name:t.name,component:"span",className:"error"})]})})},$=({label:r,...t})=>{const[i]=p(t);return a.jsx(a.Fragment,{children:a.jsxs("div",{className:"d-flex flex-column px-5",children:[a.jsx("div",{children:a.jsx("label",{className:"class-label",htmlFor:t.name||t.id,children:r})}),a.jsx("div",{children:a.jsxs("select",{className:"form-control mb-3",style:{width:"30rem"},"aria-label":"Default select example",...i,...t,children:[a.jsx("option",{value:"",children:"--- Select ---"}),t.options.map(({desc:l,value:o})=>a.jsx("option",{value:o,children:l},o))]})}),a.jsx(h,{name:t.name,component:"span",className:"error"})]})})},z=r=>{const[t]=p(r);return a.jsxs("div",{className:"form-check mb-3",children:[a.jsx("input",{className:"form-check-input",type:"checkbox",...t,...r}),a.jsx("label",{className:"form-check-label",children:a.jsx("span",{children:r.label})}),a.jsx(h,{name:r.name,component:"span",className:"error"})]})},H=({label:r,options:t,...i})=>{const[l]=p(i);return a.jsxs("div",{className:"radio-group mb-2 px-5",children:[a.jsx("label",{className:"class-label",children:r}),t.map(o=>a.jsxs("label",{children:[a.jsx("input",{...l,...i,type:"radio",checked:o.value===l.value,value:o.value}),o.desc]},o.value)),a.jsx(h,{name:i.name,component:"span",className:"error"})]})},W=({children:r,title:t})=>a.jsx("div",{className:"container",children:r}),s=JSON.parse(localStorage.getItem("profile"));function y(r){return r==null||r===""?r:r.charAt(0).toUpperCase()+r.slice(1)}var b,x,q,N,L,f,M,A,j;const v={login:[{type:"text",name:"name",label:"Nombre",placeholder:"Nombre",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"lastName",label:"Apellido",placeholder:"Apellido",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Apellido es requerido"}]},{type:"email",name:"email",label:"Email",placeholder:"E-mail",value:"",validations:[{type:"required",message:"Email is required"},{type:"isEmail",message:"Email no vaalido"}]},{type:"password",name:"password",label:"Contraseña",placeholder:"Contraseña",value:"",validations:[{type:"isPassword",value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})/,message:"Mínimo 8 caracteres, al menos una letra mayúscula, una letra minúscula y un número"},{type:"required",message:"Password es requerido"}]},{type:"password",name:"passwordRepit",label:"Contraseña",placeholder:"Contraseña",value:"",validations:[{type:"passwordRepit",message:"La contraseña no coincide"},{type:"required",message:"Escriba nuevamente la contraseña"}]},{type:"select",name:"rol",label:"Seleccione una opción: ",value:"",options:[{value:"admin",desc:"Admin"},{value:"user",desc:"User"},{value:"super-admin",desc:"Super Admin"}],validations:[{type:"required",message:"Rol is required"}]},{type:"radio-group",name:"gender",label:"Gender: ",value:"",options:[{value:"man",desc:"Man"},{value:"woman",desc:"Woman"},{value:"other",desc:"Other"}],validations:[{type:"required",message:"Gender is required"}]},{type:"checkbox",name:"terms",typeValue:"boolean",label:"Terms and Conditions",value:!1,validations:[{type:"isTrue",message:"Accept the terms!"}]}],profile:[{type:"text",name:"name",label:"Nombre",placeholder:"Nombre",value:y(s==null?void 0:s.name),validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"lastName",label:"Apellido",placeholder:"Apellido",value:y(s==null?void 0:s.lastname),validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Apellido es requerido"}]},{type:"number",name:"documentNumber",label:"Nro. de documento",placeholder:"Nro. de documento",value:((b=s==null?void 0:s.profile)==null?void 0:b.documentNumber)||"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Número de documento es requerido"}]},{type:"select",name:"documentType",label:"Tipo de cocumento: ",value:((x=s==null?void 0:s.profile)==null?void 0:x.documentType)||"",options:[{value:"cc",desc:"C.C."},{value:"ce",desc:"C.E."},{value:"passport",desc:"PASAPORTE"}],validations:[{type:"required",message:"Typo de documento es requerido"}]},{type:"date",name:"dob",label:"Fecha de nacimiento",placeholder:"fecha de nacimiento",value:((q=s==null?void 0:s.profile)==null?void 0:q.dob)||"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Fecha de nacimiento es requerida"}]},{type:"select",name:"gender",label:"Seleccione su sexo: ",value:((N=s==null?void 0:s.profile)==null?void 0:N.gender)||"",options:[{value:"male",desc:"Hombre"},{value:"female",desc:"Mujer"},{value:"other",desc:"Otro"},{value:"none",desc:"Prefiero no responder"}],validations:[{type:"required",message:"Es requerido"}]},{type:"txt",name:"phone",label:"Nro. de teléfono",placeholder:"Nro. de teléfono",value:((L=s==null?void 0:s.profile)==null?void 0:L.phone)||"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Teléfono es requerido"}]},{type:"email",name:"email",label:"Email",placeholder:"E-mail",value:s==null?void 0:s.email,validations:[{type:"required",message:"Email is required"},{type:"isEmail",message:"Email no vaalido"}]},{type:"text",name:"country",label:"País",placeholder:"País",value:((f=s==null?void 0:s.profile)==null?void 0:f.country)||"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"País es requerido"}]},{type:"text",name:"state",label:"Estado/Departamento/Provincia",placeholder:"Estado/Departamento/Provincia",value:((M=s==null?void 0:s.profile)==null?void 0:M.state)||"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Estado es requerido"}]},{type:"text",name:"city",label:"Ciudad",placeholder:"Ciudad",value:((A=s==null?void 0:s.profile)==null?void 0:A.city)||"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Ciudad es requerida"}]},{type:"text",name:"address",label:"Dirección",placeholder:"Dirección",value:((j=s==null?void 0:s.profile)==null?void 0:j.address)||"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Apellido es requerido"}]}],fixedAssets:[{type:"text",name:"name",label:"Nombre",placeholder:"Nombre del activo",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"chip",label:"Chip",placeholder:"Chip",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"tag",label:"Matrícula inmobiliaria",placeholder:"Matrícula",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"titleDeed",label:"Número de escritura",placeholder:"Número de escritura",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"owner",label:"Propietario",placeholder:"Propietario",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"address",label:"Dirección",placeholder:"Dirección",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"city",label:"Ciudad",placeholder:"Ciudad",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"state",label:"Estado / Departamento / Provincia",placeholder:"Estado",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"specs",label:"Características",placeholder:"Características",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"specs",label:"Características",placeholder:"Características",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"manager",label:"Encargado",placeholder:"Encargado",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"image",label:"Foto",placeholder:"Foto",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"files",label:"Archivo",placeholder:"Archivo",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"source",label:"Fuente",placeholder:"Fuente",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"radio-group",name:"isActive",label:"Está activo?: ",value:"true",options:[{value:"true",desc:"Activo"},{value:"false",desc:"Inactivo"}],validations:[{type:"required",message:"Gender is required"}]}],noFixedAsstes:[{type:"text",name:"name",label:"Nombre",placeholder:"Nombre vehículo",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"type",label:"Tipo",placeholder:"Tipo",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"licence",label:"Licencia",placeholder:"Licencia",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"plate",label:"Placa",placeholder:"Placa",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"brand",label:"Marca",placeholder:"Marca",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"model",label:"Modelo",placeholder:"Modelo",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"year",label:"Año",placeholder:"Año",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"class",label:"Clase",placeholder:"Clase",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"line",label:"Línea",placeholder:"Línea",value:""},{type:"text",name:"chassis",label:"Chasis",placeholder:"Chasis",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"motor",label:"Motor",placeholder:"Motor",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"Owner",label:"Propietario",placeholder:"Propietario",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"manager",label:"Encargado",placeholder:"Encargado",value:""},{type:"text",name:"nit",label:"Nit",placeholder:"Nit",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"mainLocation",label:"Ubicación Principal",placeholder:"Ubicación Principal",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"secondaryLocation",label:"Ubicación Secundaria",placeholder:"Ubicación Secundaria",value:""},{type:"text",name:"image",label:"Foto",placeholder:"Foto",value:""},{type:"text",name:"files",label:"Archivo",placeholder:"Archivo",value:""},{type:"text",name:"source",label:"Fuente",placeholder:"Fuente",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"radio-group",name:"isActive",label:"Está activo?: ",value:"true",options:[{value:"true",desc:"Activo"},{value:"false",desc:"Inactivo"}],validations:[{type:"required",message:"Gender is required"}]}],compensation:[{type:"number",name:"compensation",label:"Compensación (toneladas)",placeholder:"Compensación",value:"",validations:[{type:"minLength",value:1,message:"Min. 3 characters"},{type:"required",message:"La compensación es requerida"}]},{type:"text",name:"activity",label:"Actividad",placeholder:"Actividad",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"La actividad es requerido"}]},{type:"file",name:"fileCompensation",label:"Archivo o certificado",placeholder:"Archivo o certificado",value:""}]},Z=r=>{let t=J[r.typeValue?r.typeValue:"string"]();for(const i of r.validations)switch(i.type){case"isTrue":t=t.isTrue(i.message);break;case"isEmail":t=t.email(i.message);break;case"minLength":t=t.min(i==null?void 0:i.value,i.message);break;case"isPassword":t=t.matches(i==null?void 0:i.value,i.message);break;case"passwordRepit":t=t.oneOf([B("password"),null],i.message);break;default:t=t.required(i.message);break}return t},K=r=>{S.useState([]),E(),u(l=>l.userSlice.users),u(l=>l.auth.user),u(l=>l.userSlice.isLoading);let t={},i={};for(const l of v[r]){if(t[l.name]=l.value,!l.validations)continue;const o=Z(l);i[l.name]=o}return{validationSchema:Y({...i}),initialValues:t,inputs:v[r]}},se=r=>{var g;const{title:t,section:i}=r;u(e=>e.auth.user);const l=I(),o=E(),C=(g=JSON.parse(localStorage.getItem("user")))==null?void 0:g.user;S.useState([]);const{initialValues:w,inputs:F,validationSchema:P}=K(i),T=e=>{console.log("<<<<<VALUES3>>>>>:",e);const c={_id:C._id,name:e.name||"",lastname:e.lastName||"",email:e.email||"",profile:{address:e.address||"",phone:e.phone||"",city:e.city||"",state:e.state||"",country:e.country||"",gender:e.gender||"",dob:e.dob||"",documentNumber:e.documentNumber||"",documentType:e.documentType||"",addressAux:e.addressAux||"",urlPhoto:e.urlPhoto||""}};localStorage.setItem("profile",JSON.stringify(c)),console.log("<<<<<PROFILE DATA>>>>>:",c),o(R(c)).then(m=>{const n=m.payload;n.status===200?d.fire(n.message).then(()=>{l("/user-dashboard")}):d.fire(n.message).then(()=>{})})},k=e=>{console.log("<<<<<VALUES3>>>>>:",e);const c={compensation:e.compensation||"",activity:e.activity||"",file:e.file||""};console.log("<<<<<compensacion DATA>>>>>:",c),o(U(c)).then(m=>{const n=m.payload;n.status===200?d.fire(n.message).then(()=>{console.log("res.message1::: ",n.message),l("/compensations")}):d.fire(n.message).then(()=>{console.log("res.message2::: ",n)})})},D=e=>{console.log("<<<<<ASSETS>>>>>:",e);const c={name:e.name||"",type:"vehicle",isActive:!0,more:{type:e.type||"",brand:e.brand||"",model:e.model||"",year:e.year||"",color:e.color||"",plate:e.plate||"",class:e.class||"",line:e.line||"",motor:e.motor||"",chasis:e.chasis||"",owner:e.owner||"",nit:e.nit||"",manager:e.manager||"",mainLocation:e.mainLocation||"",secondaryLocation:e.secondaryLocation||"",source:e.source||"",images:e.images||"",files:e.files||""}};window.localStorage.setItem("asset",JSON.stringify(c))},O=e=>{switch(i){case"profile":console.log("SOY PROFILE"),T(e);break;case"assets":console.log("SOY ASSETS");break;case"compensation":k(e),console.log("SOY compensation");break;case"noFixedAsstes":D(e),console.log("SOY noFixedAsstes")}};return a.jsxs(W,{children:[a.jsx("div",{className:"text-center"}),a.jsx(V,{initialValues:w,validationSchema:P,onSubmit:e=>{O(e)},children:()=>a.jsxs(G,{noValidate:!0,className:"d-flex flex-wrap w-100 justify-content-center formContainer",style:{marginTop:20,marginBottom:20},children:[a.jsx("div",{className:"title w-100",children:t}),F.map(({name:e,type:c,value:m,...n})=>{switch(c){case"select":return a.jsx($,{label:n.label,name:e,options:n.options},e);case"radio-group":return a.jsx(H,{label:n.label,name:e,options:n.options},e);case"checkbox":return a.jsx(z,{label:n.label,name:e},e);default:return a.jsx(_,{label:n.label,name:e,placeholder:n.placeholder,type:c},e)}}),a.jsx("div",{className:"text-center w-100",style:{marginTop:"4rem"},children:a.jsx("button",{className:"btn btn-success btnLanding w-25",type:"submit",children:"Guardar"})})]})})]})};export{se as F};
