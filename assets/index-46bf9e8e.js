import{a as P,c as _,r as u,j as e,J as D,K as M,Q as $,M as R}from"./vendor-9abfd91f.js";import{T as B}from"./Table-b6f33c79.js";function w(a){function n(C,r){return C>>>r|C<<32-r}for(var j=Math.pow,N=j(2,32),i="length",t,l,c="",o=[],d=a[i]*8,s=w.h=w.h||[],x=w.k=w.k||[],f=x[i],k={},h=2;f<64;h++)if(!k[h]){for(t=0;t<313;t+=h)k[t]=h;s[f]=j(h,.5)*N|0,x[f++]=j(h,1/3)*N|0}for(a+="Â€";a[i]%64-56;)a+="\0";for(t=0;t<a[i];t++){if(l=a.charCodeAt(t),l>>8)return;o[t>>2]|=l<<(3-t)%4*8}for(o[o[i]]=d/N|0,o[o[i]]=d,l=0;l<o[i];){var p=o.slice(l,l+=16),T=s;for(s=s.slice(0,8),t=0;t<64;t++){var b=p[t-15],y=p[t-2],v=s[0],m=s[4],S=s[7]+(n(m,6)^n(m,11)^n(m,25))+(m&s[5]^~m&s[6])+x[t]+(p[t]=t<16?p[t]:p[t-16]+(n(b,7)^n(b,18)^b>>>3)+p[t-7]+(n(y,17)^n(y,19)^y>>>10)|0),O=(n(v,2)^n(v,13)^n(v,22))+(v&s[1]^v&s[2]^s[1]&s[2]);s=[S+O|0].concat(s),s[4]=s[4]+S|0}for(t=0;t<8;t++)s[t]=s[t]+T[t]|0}for(t=0;t<8;t++)for(l=3;l+1;l--){var g=s[t]>>l*8&255;c+=(g<16?0:"")+g.toString(16)}return c}P.defaults.baseURL="http://localhost:3001";async function E(a){try{return(await P.get(`/${a}`)).data}catch(n){console.log(n)}}function K(){var C;_(r=>r.auth.isLoggedIn);const a=(C=JSON.parse(localStorage.getItem("user")))==null?void 0:C.user;u.useState("");const[n,j]=u.useState(""),[N,i]=u.useState(null),[t,l]=u.useState(!1),[c,o]=u.useState([]);let d=[];const s={background:"#fff",fontSize:"1.5rem"},x={width:500,height:"55vh",border:"1px solid #ccc"},f={height:"45vh",display:"flex",flexDirection:"column",justifyContent:"space-between",paddingBottom:"10px"},k=()=>{l(!0)},h=()=>{l(!1)},p=()=>{l(!1)},T=()=>{k()},b=async()=>{const r=await E("assets");o(r.data),console.log(r.data)};(c==null?void 0:c.length)>0&&(d=c==null?void 0:c.map(r=>({check:!1,key:r._id,name:r.name,type:r.more.type,plate:r.more.plate}))),console.log("DATOS",d),u.useEffect(()=>{b()},[]);const y=window.btoa(`{"asset":"camion #1", "owner":${a.email},"value":100, "unit":"km"}`),v="carga.vehiculo.com",m=w(y),S="https://upload.wikimedia.org/wikipedia/commons/1/11/Freightliner_M2_106_6x4_2014_(14240376744).jpg",O=()=>{fetch(`https://api.stamping.io/stamp/?evidence=${m}&async=true&transactionType=${v}&url=${S}&data=${y}&token=8a9e26ffb25c2e3c4d69ec1b818eacb948bf7879e7358bdc5ebe08351fd4a5bd`,{method:"POST",redirect:"follow"}).then(r=>r.text()).then(r=>{console.log(JSON.parse(r));const A=JSON.parse(r);i(A),j(A.trxid)})},g=r=>{window.open(`https://stamping.io/es/view/?${r}`)};return e.jsx("div",{children:e.jsxs("div",{className:"",children:[e.jsx("div",{className:"row text-center pt-5",children:e.jsxs("h2",{children:["Dashboard de:"," ",e.jsxs("span",{style:{fontStyle:"italic"},children:[a==null?void 0:a.name," ",a==null?void 0:a.lastname]})]})}),e.jsx("br",{className:""}),e.jsx("div",{className:"d-flex flex-wrap p-5",children:e.jsxs(D,{size:"large",style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[e.jsx(M,{title:"Activos",bordered:!0,style:x,headStyle:s,children:e.jsxs("div",{className:"",style:f,children:[e.jsx("div",{className:"",children:e.jsx(B,{content:d,fields:["name","type","plate"],actions:!0,Title:"Activos",header:[{label:"Nombre",key:"name"},{label:"Tipo",key:"type"},{label:"Placa",key:"plate"}],total:d==null?void 0:d.length,items:5})}),e.jsx("div",{className:"pt-3",children:e.jsx($,{style:{width:"200px"},type:"primary",onClick:()=>O(),children:"Registrar evidencia"})})]})}),e.jsx(M,{title:"Evidencias",bordered:!0,style:x,headStyle:s,children:e.jsxs("div",{style:f,children:[e.jsxs("div",{className:"",children:[e.jsx("div",{children:"Card content"}),e.jsx("div",{children:"Card content"}),e.jsx("div",{children:"Card content"})]}),e.jsx("div",{className:"pt-3 mb-0",children:e.jsx($,{style:{width:"200px"},type:"primary",onClick:()=>g(n),children:"Ver evidencia"})})]})}),e.jsxs(M,{title:"Compensaciones",bordered:!0,style:x,headStyle:s,children:[e.jsx("p",{children:"Card content"}),e.jsx("p",{children:"Card content"}),e.jsx("p",{children:"Card content"})]})]})}),e.jsx("div",{className:"d-flex flex-row justify-content-around w-100",children:e.jsx("div",{className:"",children:e.jsx($,{style:{width:"200px"},type:"primary",onClick:()=>T(),children:"Ver claves"})})}),e.jsx(R,{title:"Claves",open:t,onOk:h,onCancel:p,children:e.jsxs("div",{className:"",children:[e.jsx("div",{className:"px-5",children:"Clave Publica: "}),e.jsx("div",{className:"hash px-5",style:{width:"500px",color:"red"},children:a==null?void 0:a.publicKey}),e.jsx("div",{className:"px-5",children:"Clave Privada: "}),e.jsx("div",{className:"hash px-5",style:{width:"500px",color:"red"},children:a==null?void 0:a.privateKey})]})})]})})}export{K as default};
