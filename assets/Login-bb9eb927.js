import{u as m,b as p,c as h,r as u,j as e}from"./vendor-ffd51fc4.js";import{u as g,i as x}from"./formik.esm-8cc3d487.js";import{u as f}from"./index-e07e89b5.js";import{S as t}from"./sweetalert2.all-7baeaaf7.js";const j=o=>{const a={},i=/(?=.*[0-9])/;return o.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(o.email)||(a.email="Correo electronico incorrecto"):a.email="Obligatorio",o.password?o.password.length<8?a.password="*Password must be 8 characters long.":i.test(o.password)||(a.password="La contraseña debe tener mínimo 1 número."):a.password="Obligatorio",a};function v(){const o=m(),a=p(),i=h(l=>l.auth.isLoggedIn),[n,d]=u.useState(i);console.log("Login state: ",n);const s=g({initialValues:{email:"",password:""},validate:j,onSubmit:({email:l,password:c})=>{o(f({email:l,password:c})).then(r=>{console.log("Respuesta del login: ",r),r.payload.status===200?(d(i),t.fire(r.payload.message).then(()=>{a("/user-dashboard")})):t.fire(r.payload.message)}).catch(r=>{t.fire(r)})}});return e.jsx(e.Fragment,{children:e.jsx("div",{className:"loginBody",children:e.jsx("div",{className:"container-fluid",children:e.jsx("div",{className:"grid alignItem",children:e.jsxs("div",{className:"register",style:{marginTop:30,marginBottom:30},children:[e.jsx("img",{src:x,className:"siteLogo",width:"306",height:"84",alt:"siteLogo"}),e.jsx("p",{children:"Inicia sesión a continuación con tu usuario y contraseña "}),e.jsxs("form",{className:"form ",style:{marginTop:"3rem"},onSubmit:s.handleSubmit,children:[e.jsx("label",{htmlFor:"email",children:"Usuario (email)"}),e.jsxs("div",{className:"formField",children:[e.jsx("input",{type:"text",name:"email",placeholder:"Usuario",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.email}),s.touched.email&&s.errors.email&&e.jsx("span",{style:{color:"red",display:"block"},children:s.errors.email})]}),e.jsx("label",{htmlFor:"password",children:"Contraseña"}),e.jsxs("div",{className:"formField",children:[e.jsx("input",{type:"password",name:"password",placeholder:"Contraseña",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.password}),s.touched.password&&s.errors.password&&e.jsx("span",{style:{color:"red",display:"block"},children:s.errors.password})]}),e.jsx("div",{className:"formField",style:{marginTop:"8rem"},children:e.jsx("input",{type:"submit",value:"INICIAR SESIÓN",className:"btn btn-success btnLanding"})})]}),e.jsxs("p",{children:["¿Aún no tienes cuenta? ",e.jsx("a",{href:"/register",children:"Regístrate"})]})]})})})})})}export{v as default};
