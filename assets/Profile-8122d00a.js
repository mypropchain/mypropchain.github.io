import{j as e,r as k,u as C,c as d,b as O}from"./vendor-5dc834d7.js";import{u as V}from"./users-3751f4d5.js";import{a as m,E as u,u as R,F as I,b as D,S as g}from"./sweetalert2.all-a46bd305.js";import{c as G,Y as J,b as U}from"./index.esm-d4c6dd44.js";import"./index-5eca3ed1.js";const $=({label:t,...a})=>{const[r]=m(a);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"d-flex flex-column px-5",children:[e.jsx("div",{children:e.jsx("label",{className:"class-label",htmlFor:a.name||a.id,children:t})}),e.jsx("div",{children:e.jsx("input",{className:"form-control mb-3",style:{width:"30rem"},...r,...a})}),e.jsx(u,{name:a.name,component:"span",className:"error"})]})})},B=({label:t,...a})=>{const[r]=m(a);return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"d-flex flex-column px-5",children:[e.jsx("div",{children:e.jsx("label",{className:"class-label",htmlFor:a.name||a.id,children:t})}),e.jsx("div",{children:e.jsxs("select",{className:"form-control mb-3",style:{width:"30rem"},"aria-label":"Default select example",...r,...a,children:[e.jsx("option",{value:"",children:"--- Select ---"}),a.options.map(({desc:n,value:i})=>e.jsx("option",{value:i,children:n},i))]})}),e.jsx(u,{name:a.name,component:"span",className:"error"})]})})},Y=t=>{const[a]=m(t);return e.jsxs("div",{className:"form-check mb-3",children:[e.jsx("input",{className:"form-check-input",type:"checkbox",...a,...t}),e.jsx("label",{className:"form-check-label",children:e.jsx("span",{children:t.label})}),e.jsx(u,{name:t.name,component:"span",className:"error"})]})},_=({label:t,options:a,...r})=>{const[n]=m(r);return e.jsxs("div",{className:"radio-group mb-2 px-5",children:[e.jsx("label",{className:"class-label",children:t}),a.map(i=>e.jsxs("label",{children:[e.jsx("input",{...n,...r,type:"radio",checked:i.value===n.value,value:i.value}),i.desc]},i.value)),e.jsx(u,{name:r.name,component:"span",className:"error"})]})},z=({children:t,title:a})=>e.jsx("div",{className:"container",children:t}),s=JSON.parse(localStorage.getItem("profile"));function y(t){return t.charAt(0).toUpperCase()+t.slice(1)}var x,j,N,f,q,S,E,w,A;const b={login:[{type:"text",name:"name",label:"Nombre",placeholder:"Nombre",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"lastName",label:"Apellido",placeholder:"Apellido",value:"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Apellido es requerido"}]},{type:"email",name:"email",label:"Email",placeholder:"E-mail",value:"",validations:[{type:"required",message:"Email is required"},{type:"isEmail",message:"Email no vaalido"}]},{type:"password",name:"password",label:"Contraseña",placeholder:"Contraseña",value:"",validations:[{type:"isPassword",value:/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})/,message:"Mínimo 8 caracteres, al menos una letra mayúscula, una letra minúscula y un número"},{type:"required",message:"Password es requerido"}]},{type:"password",name:"passwordRepit",label:"Contraseña",placeholder:"Contraseña",value:"",validations:[{type:"passwordRepit",message:"La contraseña no coincide"},{type:"required",message:"Escriba nuevamente la contraseña"}]},{type:"select",name:"rol",label:"Seleccione una opción: ",value:"",options:[{value:"admin",desc:"Admin"},{value:"user",desc:"User"},{value:"super-admin",desc:"Super Admin"}],validations:[{type:"required",message:"Rol is required"}]},{type:"radio-group",name:"gender",label:"Gender: ",value:"",options:[{value:"man",desc:"Man"},{value:"woman",desc:"Woman"},{value:"other",desc:"Other"}],validations:[{type:"required",message:"Gender is required"}]},{type:"checkbox",name:"terms",typeValue:"boolean",label:"Terms and Conditions",value:!1,validations:[{type:"isTrue",message:"Accept the terms!"}]}],profile:[{type:"text",name:"name",label:"Nombre",placeholder:"Nombre",value:y(s==null?void 0:s.name),validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Nombre es requerido"}]},{type:"text",name:"lastName",label:"Apellido",placeholder:"Apellido",value:y(s==null?void 0:s.lastname),validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Apellido es requerido"}]},{type:"number",name:"documentNumber",label:"Nro. de documento",placeholder:"Nro. de documento",value:((x=s==null?void 0:s.profile)==null?void 0:x.documentNumber)||"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Número de documento es requerido"}]},{type:"select",name:"documentType",label:"Tipo de cocumento: ",value:((j=s==null?void 0:s.profile)==null?void 0:j.documentType)||"",options:[{value:"cc",desc:"C.C."},{value:"ce",desc:"C.E."},{value:"passport",desc:"PASAPORTE"}],validations:[{type:"required",message:"Typo de documento es requerido"}]},{type:"date",name:"dob",label:"Fecha de nacimiento",placeholder:"fecha de nacimiento",value:((N=s==null?void 0:s.profile)==null?void 0:N.dob)||"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Fecha de nacimiento es requerida"}]},{type:"select",name:"gender",label:"Seleccione su sexo: ",value:((f=s==null?void 0:s.profile)==null?void 0:f.gender)||"",options:[{value:"male",desc:"Hombre"},{value:"female",desc:"Mujer"},{value:"other",desc:"Otro"},{value:"none",desc:"Prefiero no responder"}],validations:[{type:"required",message:"Es requerido"}]},{type:"txt",name:"phone",label:"Nro. de teléfono",placeholder:"Nro. de teléfono",value:((q=s==null?void 0:s.profile)==null?void 0:q.phone)||"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Teléfono es requerido"}]},{type:"email",name:"email",label:"Email",placeholder:"E-mail",value:s==null?void 0:s.email,validations:[{type:"required",message:"Email is required"},{type:"isEmail",message:"Email no vaalido"}]},{type:"text",name:"country",label:"País",placeholder:"País",value:((S=s==null?void 0:s.profile)==null?void 0:S.country)||"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"País es requerido"}]},{type:"text",name:"state",label:"Estado/Departamento/Provincia",placeholder:"Estado/Departamento/Provincia",value:((E=s==null?void 0:s.profile)==null?void 0:E.state)||"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Estado es requerido"}]},{type:"text",name:"city",label:"Ciudad",placeholder:"Ciudad",value:((w=s==null?void 0:s.profile)==null?void 0:w.city)||"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Ciudad es requerida"}]},{type:"text",name:"address",label:"Dirección",placeholder:"Dirección",value:((A=s==null?void 0:s.profile)==null?void 0:A.address)||"",validations:[{type:"minLength",value:3,message:"Min. 3 characters"},{type:"required",message:"Apellido es requerido"}]}],assets:[]},H=t=>{let a=J[t.typeValue?t.typeValue:"string"]();for(const r of t.validations)switch(r.type){case"isTrue":a=a.isTrue(r.message);break;case"isEmail":a=a.email(r.message);break;case"minLength":a=a.min(r==null?void 0:r.value,r.message);break;case"isPassword":a=a.matches(r==null?void 0:r.value,r.message);break;case"passwordRepit":a=a.oneOf([U("password"),null],r.message);break;default:a=a.required(r.message);break}return a},W=t=>{k.useState([]),C(),d(n=>n.userSlice.users),d(n=>n.auth.user),d(n=>n.userSlice.isLoading);let a={},r={};for(const n of b[t]){if(a[n.name]=n.value,!n.validations)continue;const i=H(n);r[n.name]=i}return{validationSchema:G({...r}),initialValues:a,inputs:b[t]}},Z=t=>{var h;const{title:a,section:r}=t;d(l=>l.auth.user);const n=O(),i=C(),L=(h=JSON.parse(localStorage.getItem("user")))==null?void 0:h.user;k.useState([]);const{initialValues:P,inputs:T,validationSchema:F}=W(r),p=l=>{console.log("<<<<<VALUES3>>>>>:",l);const c={_id:L._id,name:l.name||"",lastname:l.lastName||"",email:l.email||"",profile:{address:l.address||"",phone:l.phone||"",city:l.city||"",state:l.state||"",country:l.country||"",gender:l.gender||"",dob:l.dob||"",documentNumber:l.documentNumber||"",documentType:l.documentType||"",addressAux:l.addressAux||"",urlPhoto:l.urlPhoto||""}};localStorage.setItem("profile",JSON.stringify(c)),console.log("<<<<<PROFILE DATA>>>>>:",c),i(V(c)).then(v=>{const o=v.payload;o.status===200?g.fire(o.message).then(()=>{n("/user-dashboard")}):g.fire(o.message).then(()=>{})})},M=R({onSubmit:async l=>{const{error:c}=await p(l);c||M.resetForm({values:l})},initialValues:{name:"name"}});return e.jsxs(z,{children:[e.jsx("div",{className:"text-center"}),e.jsx(I,{initialValues:P,validationSchema:F,onSubmit:l=>{p(l)},children:()=>e.jsxs(D,{noValidate:!0,className:"d-flex flex-wrap w-100 justify-content-center formContainer",style:{marginTop:20,marginBottom:20},children:[e.jsx("div",{className:"title w-100",children:a}),T.map(({name:l,type:c,value:v,...o})=>{switch(c){case"select":return e.jsx(B,{label:o.label,name:l,options:o.options},l);case"radio-group":return e.jsx(_,{label:o.label,name:l,options:o.options},l);case"checkbox":return e.jsx(Y,{label:o.label,name:l},l);default:return e.jsx($,{label:o.label,name:l,placeholder:o.placeholder,type:c},l)}}),e.jsx("div",{className:"text-center w-100",style:{marginTop:"4rem"},children:e.jsx("button",{className:"btn btn-success btnLanding w-25",type:"submit",children:"Guardar"})})]})})]})};function se(){var n;const t=(n=JSON.parse(localStorage.getItem("user")))==null?void 0:n.user,a="profile",r=`Perfil de: ${t==null?void 0:t.name} ${t==null?void 0:t.lastname}`;return t!=null?e.jsx("div",{children:e.jsx("div",{className:"",children:e.jsx(Z,{title:r,section:a})})}):e.jsx("div",{children:e.jsx("div",{className:"",children:e.jsx("h3",{children:"...cargando"})})})}export{se as default};
