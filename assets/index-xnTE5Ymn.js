import{j as e,L as He,c as us,r as ms,f as hs,a as ue,b as Ye,d as ze,e as re,g as me,h as he,i as c,u as ie,k as P,M as ne,B as xs,C as js,X as ps,Y as fs,T as gs,l as Ns,m as vs,n as Ae,S as Ie,o as Ve,E as ys,p as Ss,q as bs,F as Cs,s as As,t as ks,H as ws,v as Es,w as ee,x as F,y as Is,z as Fs,A as Ps,D as de,I as Os,G as Fe,U as Rs,J as Ts,O as Be,K as p,N as O,P as Ds,Q as se,R as Ls,V as Z,W as q,Z as Ms,_ as Us,$ as qs,a0 as $s,a1 as Hs,a2 as Ys,a3 as xe,a4 as je,a5 as pe,a6 as ae,a7 as Y,a8 as U,a9 as M,aa as zs,ab as Vs,ac as Bs,ad as Gs,ae as _s,af as te,ag as Qs,ah as Js,ai as Ws,aj as Ks,ak as Pe,al as Xs,am as Zs,an as Oe,ao as Re,ap as et,aq as H,ar as st,as as tt,at}from"./vendor-DDOEhX28.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const u of document.querySelectorAll('link[rel="modulepreload"]'))m(u);new MutationObserver(u=>{for(const l of u)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&m(a)}).observe(document,{childList:!0,subtree:!0});function n(u){const l={};return u.integrity&&(l.integrity=u.integrity),u.referrerPolicy&&(l.referrerPolicy=u.referrerPolicy),u.crossOrigin==="use-credentials"?l.credentials="include":u.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function m(u){if(u.ep)return;u.ep=!0;const l=n(u);fetch(u.href,l)}})();const Te=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center",children:[e.jsx("h1",{children:"404"}),e.jsx("p",{children:"Page not found"}),e.jsx("br",{className:""}),e.jsx("p",{children:"Something is wrong, the page you trying to acces do not exist"}),e.jsx("p",{children:"Or you have not enought rights"}),e.jsx("br",{className:""}),e.jsx(He,{to:"/",children:"Go to Home"})]})}),nt="https://myprop.joselimardo.com/api",Q=us({baseQuery:ms(hs({baseUrl:nt,prepareHeaders:(t,{getState:s})=>{const n=s().auth.token;if(n)return t.set("Authorization",`Bearer ${n}`),t.set("Content-Type","application/json"),t}})),keepUnusedDataFor:60,refetchOnMountOrArgChange:!0,refetchOnFocus:!0,refetchOnReconnect:!0,tagTypes:["Users","Tenants","Assets","Locations"],endpoints:t=>({})}),lt=t=>ue.create({baseURL:"https://myprop.joselimardo.com/api",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}),rt=ue.create({baseURL:"https://myprop.joselimardo.com/api",headers:{"Content-Type":"application/json"}}),it=t=>ue.create({baseURL:"https://myprop.joselimardo.com/api",headers:{"Content-Type":"multipart/form-data",Authorization:`Bearer ${t}`}}),ot=async(t,s,n)=>{try{return await lt(s).post(`/${t}`,n)}catch(m){return m}},ct=async t=>{try{const s=await rt.post("/auth/login",t);if(s.data.token){const n=Ye(s.data.token),m={loading:!1,isLoggedIn:!0,token:s.data.token,active:n.user_active,deleted:n.user_is_deleted,error:null};sessionStorage.setItem("session",JSON.stringify(m,null,2))}return s.data}catch(s){throw s}},dt=async(t,s,n)=>{try{return await it(s).post(`/${t}`,n)}catch(m){throw m}};let W=JSON.parse(sessionStorage.getItem("session"));const ve=ze("auth/loginUser",async(t,s)=>{try{return await ct(t)}catch(n){return s.rejectWithValue(n.response.data)}}),Ge=ze("auth/logoutUser",async(t,s)=>{try{sessionStorage.removeItem("session")}catch(n){return s.rejectWithValue(n.response)}}),ut={loading:W?W.loading:!1,isLoggedIn:W?W.isLoggedIn:!1,token:W?W.token:null,error:W?W.error:null},mt=re({name:"auth",initialState:ut,extraReducers:t=>{t.addCase(ve.pending,s=>{s.loading=!0,s.isLoggedIn=!1,s.token=null,s.error=null}).addCase(ve.fulfilled,(s,n)=>{s.loading=!1,s.isLoggedIn=!0,s.token=n.payload.token,s.error=null}).addCase(ve.rejected,(s,n)=>{s.loading=!1,s.isLoggedIn=!1,s.token=null,s.error=n.payload}).addCase(Ge.fulfilled,s=>{s.loading=!1,s.isLoggedIn=!1,s.token=null,s.error=null})}}),ht=mt.reducer,xt=t=>t.auth.token,jt=t=>t.auth.isLoggedIn,_e=me({}),pt=_e.getInitialState(),B=Q.injectEndpoints({endpoints:t=>({getUsers:t.query({query:()=>"/users",providesTags:["Users"]}),getUser:t.query({query:s=>`/users/${s}`}),getMe:t.query({query:()=>"/users/me",extraOptions:{maxRetries:0}}),addNewUser:t.mutation({query:s=>({url:"/users",method:"POST",body:s}),invalidatesTags:["Users"],extraOptions:{maxRetries:0}}),updateUser:t.mutation({query:s=>({url:"/users",method:"PUT",body:{...s}}),invalidatesTags:["Users"]}),deleteUser:t.mutation({query:({id:s,email:n})=>({url:`/users/${s}/email/${n}`,method:"DELETE"}),invalidatesTags:["Users"]}),softDeleteUser:t.mutation({query:s=>({url:"/users/soft_delete/",method:"PUT",body:{...s}}),invalidatesTags:["Users"]}),changePassword:t.mutation({query:s=>({url:"/users/change_password/",method:"POST",body:{...s}}),invalidatesTags:["Users"]}),resetPassword:t.mutation({query:s=>({url:`/users/reset_password/${s}`,method:"POST"}),invalidatesTags:["Users"]})})}),{useGetUsersQuery:ft,useGetUserQuery:gt,useGetMeQuery:yn,useAddNewUserMutation:Nt,useUpdateUserMutation:Sn,useDeleteUserMutation:bn,useSoftDeleteUserMutation:Cn,useChangePasswordMutation:An,useResetPasswordMutation:kn}=B,vt=B.endpoints.getUsers.select(),yt=he(vt,t=>t.data);_e.getSelectors(t=>yt(t)??pt);const St={users:[],user:null,loading:!1,error:null},Qe=re({name:"users",initialState:St,reducers:{setUser(t,s){t.user=s.payload},setUsers(t,s){t.users=s.payload}},extraReducers:t=>{t.addMatcher(B.endpoints.getUsers.matchFulfilled,(s,{payload:n})=>{s.users=n.users,s.loading=!1,s.error=null}),t.addMatcher(B.endpoints.getUsers.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(B.endpoints.getUsers.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n}),t.addMatcher(B.endpoints.getUser.matchFulfilled,(s,{payload:n})=>{s.user=n[0],s.loading=!1,s.error=null}),t.addMatcher(B.endpoints.getMe.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(B.endpoints.getMe.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n}),t.addMatcher(B.endpoints.getMe.matchFulfilled,(s,{payload:n})=>{s.user=n.user,s.loading=!1,s.error=null}),t.addMatcher(B.endpoints.getUser.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(B.endpoints.getUser.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n})}}),De=Qe.actions,bt=Qe.reducer,Je=me({}),Ct=Je.getInitialState(),_=Q.injectEndpoints({endpoints:t=>({getLocations:t.query({query:()=>"/locations",providesTags:["Locations"]}),getLocation:t.query({query:s=>`/locations/${s}`}),addLocation:t.mutation({query:s=>({url:"/locations",method:"POST",body:s}),invalidatesTags:["Locations"],extraOptions:{maxRetries:0}})})}),{useGetLocationQuery:wn,useGetLocationsQuery:At,useAddLocationMutation:kt}=_,wt=_.endpoints.getLocations.select(),Et=he(wt,t=>t.data);Je.getSelectors(t=>Et(t)??Ct);const It={locations:[],location:null,loading:!1,error:null},We=re({name:"locations",initialState:It,reducers:{setLocation(t,s){t.location=s.payload},setLocations(t,s){t.locations=s.payload.data}},extraReducers:t=>{t.addMatcher(_.endpoints.getLocations.matchFulfilled,(s,{payload:n})=>{s.locations=n.data,s.loading=!1,s.error=null}),t.addMatcher(_.endpoints.getLocations.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(_.endpoints.getLocations.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n}),t.addMatcher(_.endpoints.getLocation.matchFulfilled,(s,{payload:n})=>{s.location=n.data,s.loading=!1,s.error=null}),t.addMatcher(_.endpoints.getLocation.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(_.endpoints.getLocation.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n})}}),Le=We.actions,Ft=We.reducer,Ke=me({}),Pt=Ke.getInitialState(),K=Q.injectEndpoints({endpoints:t=>({getTenants:t.query({query:()=>"/tenants",providesTags:["Tenants"]}),getTenant:t.query({query:s=>`/tenants/${s}`}),addTenant:t.mutation({query:s=>({url:"/tenants",method:"POST",body:s}),invalidatesTags:["Tenants"],extraOptions:{maxRetries:0}})})}),{useGetTenantQuery:En,useGetTenantsQuery:Ot,useAddTenantMutation:Rt}=K,Tt=K.endpoints.getTenants.select(),Dt=he(Tt,t=>t.data);Ke.getSelectors(t=>Dt(t)??Pt);const Lt={tenants:[],tenant:null,loading:!1,error:null},Xe=re({name:"tenants",initialState:Lt,reducers:{setTenant(t,s){t.tenant=s.payload},setTenants(t,s){t.tenants=s.payload.data}},extraReducers:t=>{t.addMatcher(K.endpoints.getTenants.matchFulfilled,(s,{payload:n})=>{s.tenants=n.data,s.loading=!1,s.error=null}),t.addMatcher(K.endpoints.getTenants.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(K.endpoints.getTenants.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n}),t.addMatcher(K.endpoints.getTenant.matchFulfilled,(s,{payload:n})=>{s.tenant=n.data,s.loading=!1,s.error=null}),t.addMatcher(K.endpoints.getTenant.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(K.endpoints.getTenant.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n})}}),Me=Xe.actions,Mt=Xe.reducer,Ze=me({}),Ut=Ze.getInitialState(),X=Q.injectEndpoints({endpoints:t=>({getAssets:t.query({query:()=>"/assets",providesTags:["Assets"]}),getAsset:t.query({query:s=>`/assets/${s}`}),addAsset:t.mutation({query:s=>({url:"/assets",method:"POST",body:s}),invalidatesTags:["Assets"],extraOptions:{maxRetries:0}})})}),{useGetAssetQuery:In,useGetAssetsQuery:qt,useAddAssetMutation:$t}=X,Ht=X.endpoints.getAssets.select(),Yt=he(Ht,t=>t.data);Ze.getSelectors(t=>Yt(t)??Ut);const zt={assets:[],asset:null,loading:!1,error:null},es=re({name:"assets",initialState:zt,reducers:{setAsset(t,s){t.asset=s.payload},setAssets(t,s){t.assets=s.payload.data}},extraReducers:t=>{t.addMatcher(X.endpoints.getAssets.matchFulfilled,(s,{payload:n})=>{s.assets=n.data,s.loading=!1,s.error=null}),t.addMatcher(X.endpoints.getAssets.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(X.endpoints.getAssets.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n}),t.addMatcher(X.endpoints.getAsset.matchFulfilled,(s,{payload:n})=>{s.asset=n.data,s.loading=!1,s.error=null}),t.addMatcher(X.endpoints.getAsset.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(X.endpoints.getAsset.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n})}}),Ue=es.actions,Vt=es.reducer,ss=c.createContext(),Bt=({children:t})=>{const s=ie(),n=P(jt),m=P(xt),[u,l]=c.useState(null),[a,r]=c.useState(!0),[j,y]=c.useState(null),[o,S]=c.useState(null),{data:A,error:v,isLoading:h,isSuccess:b}=gt(o,{skip:a});c.useEffect(()=>{if(m){const g=Ye(m);y({role:g.role,email:g.email,tenantId:g.tenantId}),S(g.id),r(!1)}},[m]),c.useEffect(()=>{b&&(l(A),y({...j,name:A[0].name,lastName:A[0].lastname}))},[b,A]);const x=async g=>{await s(ve(g)).then(N=>{var w;console.log("login",N),((w=N.error)==null?void 0:w.message)==="Rejected"&&ne.error({title:"Invalid login attempt",content:`${N.payload.message}`})})},i=()=>{r(!0),setSkipTenant(!0),s(Ue.setAssets([])),s(Ue.setAsset(null)),s(Le.setLocations([])),s(Le.setLocation(null)),s(Me.setTenants([])),s(Me.setTenant(null)),s(De.setUsers([])),s(De.setUser(null)),s(Q.util.resetApiState())},f=async()=>{await s(Ge()).then(()=>{r(!0),i()})};if(h)return e.jsx("div",{children:"We are loading data, please wait..."});const d={isLoggedIn:n,token:m,login:x,logout:f,credentials:j};return e.jsx(ss.Provider,{value:d,children:t})},le=()=>c.useContext(ss),Gt=[{name:"Enero",permisos:4e3,pv:2400,amt:2400},{name:"Febrero",permisos:3e3,pv:1398,amt:2210},{name:"Marzo",permisos:2e3,pv:9800,amt:2290},{name:"Abril",permisos:2780,pv:3908,amt:2e3},{name:"Mayo",permisos:1890,pv:4800,amt:2181},{name:"Junio",permisos:2390,pv:3800,amt:2500}];function ts(){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"",children:[" ",e.jsx("h6",{className:"",children:"Cantidad de permisos por mes"}),e.jsxs(xs,{width:500,height:300,data:Gt,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(js,{strokeDasharray:"3 3"}),e.jsx(ps,{dataKey:"name"}),e.jsx(fs,{}),e.jsx(gs,{}),e.jsx(Ns,{}),e.jsx(vs,{dataKey:"permisos",fill:"#82ca9d"})]})]})})}const as=()=>e.jsxs("div",{className:"row",children:[e.jsx("h6",{className:"mb-3",children:"Estadísticas en tiempo real"}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(Ae,{bordered:!0,style:{width:300},children:e.jsx(Ie,{title:"Completados",value:8e3,precision:0,valueStyle:{color:"#3f8600"},prefix:e.jsx(Ve,{}),suffix:""})})})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(Ae,{bordered:!0,style:{width:300},children:e.jsx(Ie,{title:"En proceso",value:560,precision:0,valueStyle:{color:"#cf1322"},prefix:e.jsx(ys,{}),suffix:""})})})})]}),_t=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"",style:{marginTop:"20px"},children:[e.jsx("h3",{style:{color:"blue"},children:"Estadísticas"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col box1 me-1",children:e.jsx("div",{className:"d-flex justify-content-center mt-5",children:e.jsx(ts,{})})}),e.jsx("div",{className:"col box1 ms-1",children:e.jsx("div",{className:"mt-5",children:e.jsx(as,{})})})]})]})})}),Qt=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"",style:{marginTop:"20px"},children:[e.jsx("h3",{style:{color:"blue"},children:"Estadísticas"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col box1 me-1",children:e.jsx("div",{className:"d-flex justify-content-center mt-5",children:e.jsx(ts,{})})}),e.jsx("div",{className:"col box1 ms-1",children:e.jsx("div",{className:"mt-5",children:e.jsx(as,{})})})]})]})})}),Jt=()=>{const{credentials:t}=le(),s=t==null?void 0:t.role;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsxs("div",{className:"",style:{marginTop:"20px"},children:[s==="root"&&e.jsx(_t,{}),s==="autoridadArea"&&e.jsx(Qt,{})]})})})};function Wt(){const t=Ss();return console.error(t),e.jsxs("div",{id:"error-page",children:[e.jsx("h1",{children:"Oops!"}),e.jsx("p",{children:"Sorry, an unexpected error has occurred."}),e.jsx("p",{children:e.jsx("i",{children:t.statusText||t.message})})]})}const Kt=[{label:"Settings",key:"settings",icon:e.jsx(bs,{style:{fontSize:20}}),children:[]}],Xt=[{label:"Permisos",key:"permissions",icon:e.jsx(Cs,{style:{fontSize:20}}),children:[]}],Zt=[{label:"Reports",key:"reports",icon:e.jsx(As,{style:{fontSize:20}}),children:[]}],ea=[{label:"Logout",key:"logout",icon:e.jsx(ks,{style:{fontSize:20,color:"#faad14"}}),children:[]}],sa=[{label:"Home",key:"/",icon:e.jsx(ws,{style:{fontSize:20}}),children:[]}],ta=[{label:"Assets",key:"assets-settings",icon:e.jsx(Es,{style:{fontSize:20}}),children:[]}],oe=(t,s,n,m,u,l)=>({key:s,icon:n,children:m,label:t,type:u,disabled:l}),aa=Xt.map(t=>oe(t.label,t.key,t.icon)),na=Zt.map(t=>oe(t.label,t.key,t.icon)),la=Kt.map(t=>oe(t.label,t.key,t.icon)),ra=ea.map(t=>oe(t.label,t.key,t.icon)),ia=sa.map(t=>oe(t.label,t.key,t.icon)),oa=ta.map(t=>oe(t.label,t.key,t.icon)),{Sider:ca}=de,da=[ia[0],la[0],oa[0],aa[0],na[0],ra[0]],ua=()=>{const t=ee(),{logout:s}=le(),[n,m]=c.useState(!0);let u={};n?u={textAlign:"center",paddingTop:20,paddingBottom:10}:u={textAlign:"right",paddingTop:20,paddingBottom:10};const l={backgroundColor:"#333035",borderRadius:"0px 20px 20px 0px",height:"88vh"},a={backgroundColor:"#333035",color:"#fff",borderRadius:"0px 20px 20px 0px",maxWidth:200,minHeight:"50vh"},r=y=>{m(y)},j=()=>{t("/"),s()};return e.jsxs(ca,{breackpoint:"md",trigger:null,collapsible:!0,collapsed:n,onCollapse:r,style:l,children:[e.jsx("div",{style:u,children:e.jsx(F,{type:"text",icon:n?e.jsx(Is,{style:{fontSize:20,color:"#fff"}}):e.jsx(Fs,{style:{fontSize:20,color:"#fff"}}),onClick:()=>m(!n)})}),e.jsx(Ps,{style:a,mode:"inline",items:da,onClick:({key:y})=>{y==="logout"?j():y==="openClose"?m(!n):t(y)},selectable:!0})]})},ma="/assets/LogoHorizontal-aIQiJSsu.png",ha=()=>{const t=ee(),n=P(u=>u.permits.permits).some(u=>u.status==="waiting"),m=()=>{t("/permissions")};return e.jsx("div",{children:n&&e.jsx(F,{className:"notification",onClick:m,children:"Hay pendientes de autorización!"})})},{Header:xa}=de,Ne=["#f56a00","#7265e6","#ffbf00","#00a2ae"],ja=()=>{const[t,s]=c.useState("U"),[n,m]=c.useState(Ne[1]);ee();const{isLoggedIn:u,credentials:l}=le(),a=()=>{const j=Math.floor(Math.random()*4);m(j<Ne.length-1?Ne[j+1]:Ne[0])},r=j=>j.split(" ").map(S=>S[0].toUpperCase()).join("");return c.useEffect(()=>{l!=null&&l.name&&(l!=null&&l.lastName)?s(r(`${l==null?void 0:l.name} ${l==null?void 0:l.lastName}`)):s("U")},[u,l]),e.jsxs(xa,{className:"header",children:[e.jsx(He,{to:"/",children:e.jsx(Os,{preview:!1,width:150,src:ma})}),e.jsx(ha,{}),e.jsx("div",{className:"",style:{paddingRight:20,paddingLeft:20},children:u?e.jsx(Fe,{style:{backgroundColor:n,cursor:"pointer"},size:35,onClick:a,children:t}):e.jsx(Fe,{style:{backgroundColor:n,cursor:"pointer"},size:35,icon:e.jsx(Rs,{style:{fontSize:35}}),onClick:a})})]})},pa=()=>{const{Header:t,Content:s,Footer:n}=de,{token:{colorBgContainer:m}}=Ts.useToken(),u={margin:"0px",background:m,textAlign:"center",height:"88vh",width:"100%"},l={padding:0,background:m,textAlign:"center",height:40,display:"flex",justifyContent:"center",alignItems:"center"},a={display:"flex",alignContent:"center",alignItems:"center",background:"#fff"},r={backgroundColor:"#fff",height:"100%"};return e.jsxs(de,{className:"conatiner-fluid",style:r,children:[e.jsx(ja,{}),e.jsxs(de,{style:a,children:[e.jsx(ua,{}),e.jsx(s,{style:u,children:e.jsx(Be,{})})]}),e.jsx(n,{style:l,children:"MyPropChain © 2024 all rights reserved"})]})},{RangePicker:fa}=se,fe=({fields:t,onFinish:s,formName:n,name:m,buttonTitle:u,layout:l})=>{l||(l="vertical");const a="DD/MM/YYYY HH:mm";return e.jsxs(p,{form:n,name:m,onFinish:s,layout:l,labelCol:{span:8},wrapperCol:{span:24},style:{maxWidth:600},children:[t.map((r,j)=>e.jsxs(p.Item,{label:r.label,name:r.name,rules:r.type==="confirmPassword"?[{required:!0,message:`Please input a ${r.label}`},{min:8,message:"Password must be at least 8 characters"},({getFieldValue:y})=>({validator(o,S){return!S||y("password")===S?Promise.resolve():Promise.reject(new Error("The two passwords that you entered do not match!"))}})]:[{required:!0,message:`Please input ${r.label}`},{type:`${r.type}`},r.type==="password"&&{min:8,message:"Password must be at least 8 characters"}],children:[r.type==="text"&&e.jsx(O,{id:r.name,placeholder:r.placeholder}),r.type==="inputnumber"&&e.jsx(Ds,{min:"0",max:"1",step:"0.01",stringMode:!0,style:{width:"100%"},id:r.name,placeholder:r.placeholder}),r.type==="number"&&e.jsx(O,{type:"number",id:r.name,placeholder:r.placeholder}),r.type==="email"&&e.jsx(O,{type:"email",id:r.name,placeholder:r.placeholder}),r.type==="date"&&e.jsx(se,{id:r.name,format:a}),r.type==="datetime"&&e.jsx(fa,{id:r.name,placeholder:r.placeholder}),r.type==="password"&&e.jsx(O.Password,{id:r.name,placeholder:r.placeholder}),r.type==="confirmPassword"&&e.jsx(O.Password,{id:r.name,placeholder:r.placeholder}),r.type==="textarea"&&e.jsx(O.TextArea,{id:r.name}),r.type==="select"&&e.jsx(Ls,{id:r.name,options:r.options,placeholder:r.placeholder}),r.type==="radio"&&e.jsx(Z,{id:r.name}),r.type==="checkbox"&&e.jsx(q,{id:r.name}),r.type==="switch"&&e.jsx(Ms,{id:r.name}),r.type==="slider"&&e.jsx(Us,{id:r.name}),r.type==="rate"&&e.jsx(qs,{id:r.name}),r.type==="upload"&&e.jsx($s,{id:r.name}),r.type==="button"&&e.jsx(F,{id:r.name}),r.type==="treeselect"&&e.jsx(Hs,{id:r.name}),r.type==="timepicker"&&e.jsx(Ys,{id:r.name})]},j)),e.jsx(p.Item,{children:e.jsxs("div",{className:"",style:{display:"flex",flexDirection:"row"},children:[e.jsx(F,{type:"primary",htmlType:"submit",children:u}),e.jsx(F,{type:"",htmlType:"reset",style:{marginLeft:"20px"},children:"Reset"})]})})]})},Se=({message:t})=>e.jsx("div",{className:"alert alert-success",children:e.jsx("div",{className:"",children:t})}),be=({message:t})=>e.jsx("div",{className:"alert alert-danger",children:e.jsx("div",{className:"",children:t})}),ke=({title:t,content:s})=>{ne.success({title:t,content:s})},ga=({title:t,content:s})=>{ne.info({title:t,content:s})},ns=()=>{const t=P(N=>N.tenants.tenants),[s]=p.useForm(),[n,m]=c.useState(!1);c.useState(null);const[u,l]=c.useState(!1),[a,r]=c.useState(!1),[j,y]=c.useState(null),[o,{isSuccess:S,error:A,reset:v}]=Nt(),h=[{value:"admin",label:"Admin"},{value:"user",label:"User"},{value:"root",label:"Root"},{value:"operator",label:"Operator"},{value:"contractor",label:"Contractor"},{value:"autoridadEstatal",label:"Autoridad Estatal"},{value:"autoridadMunicipal",label:"Autoridad Municipal"},{value:"autoridadArea",label:"Autoridad de Area"},{value:"autoridadAreaLocal",label:"Autoridad de Area Local"},{value:"otraAutoridad",label:"Otra Autoridad"}],x=[{label:"Tenant",name:"tenant",type:"select",placeholder:"Tenant",options:t==null?void 0:t.map(N=>({value:N._id,label:N.name}))},{label:"Nombre",name:"name",type:"text",placeholder:"Nombre"},{label:"Apellido",name:"lastname",type:"text",placeholder:"Apellido"},{label:"Email",name:"email",type:"email",placeholder:"Email"},{label:"Password",name:"password",type:"password",placeholder:"Password"},{label:"Confirm password",name:"confirmPassword",type:"confirmPassword",placeholder:"Confirm password"},{label:"Role",name:"role",type:"select",placeholder:"Role",options:h}],i=()=>{r(!1),l(!1),m(!0)},f=()=>{r(!1),l(!1),s.resetFields(),m(!1)},d=()=>{r(!1),l(!1),s.resetFields(),m(!1)},g=N=>{const w={...N,isActive:!0};o(w).unwrap(),v()};return c.useEffect(()=>{S&&(l(!0),y("User added successfully"))},[S]),c.useEffect(()=>{A&&(r(!0),y("Error adding user"))},[A]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"",children:e.jsx("div",{className:"col-md",children:e.jsx(F,{type:"primary",className:"",onClick:i,children:"Add User"})})}),e.jsxs(ne,{open:n,forceRender:!0,title:"Add user",onOk:f,onCancel:d,cancelButtonProps:{form:s,key:"cancel",htmlType:"reset"},footer:[e.jsx(F,{type:"default",onClick:d,children:"Exit"},"exit")],children:[e.jsx(fe,{fields:x,onFinish:g,name:"userForm",buttonTitle:"Submit",formName:s}),a&&be({message:j}),u&&Se({message:j})]})]})},Na=()=>{var x;c.useState([]);const t=P(i=>i.tenants.tenants);c.useState(!0),ie();const[s,n]=c.useState({}),[m,u]=c.useState({}),l=(i,f,d)=>{console.log("Various parameters",i,f,d),n(f),u(d)},{data:a=[],isSuccess:r,error:j,isFetching:y,refetch:o}=ft({}),S=t==null?void 0:t.map(i=>({text:i.name,value:i.name})),A=(x=a==null?void 0:a.users)==null?void 0:x.map(i=>{var f;return{key:i._id,name:i.name+" "+i.lastname,email:i.email,role:i.role,tenant:(f=i.tenant)==null?void 0:f.name}}),v=[{title:"Name",dataIndex:"name",key:"name",render:i=>e.jsx("a",{children:i}),sorter:(i,f)=>{var d,g;return((d=i.name)==null?void 0:d.length)-((g=f.name)==null?void 0:g.length)}},{title:"Email",dataIndex:"email",key:"email"},{title:"Role",dataIndex:"role",key:"role"},{title:"Organizacion",dataIndex:"tenant",key:"tenant",filters:S,filteredValue:s.tenant||null,onFilter:(i,f)=>f.tenant.includes(i),sorter:(i,f)=>{var d,g;return((d=i.tenant)==null?void 0:d.length)-((g=f.tenant)==null?void 0:g.length)},sortOrder:m.columnKey==="tenant"?m.order:null,ellipsis:!0},{title:"Action",key:"action",render:(i,f)=>e.jsxs(xe,{size:"middle",children:[e.jsx(je,{style:{fontSize:20,color:"#008000",marginRight:10},onClick:()=>h(f)}),e.jsx(pe,{style:{fontSize:20,color:"#FF0000",marginRight:10},onClick:()=>b(f)})]})}],h=i=>{console.log(i)},b=i=>{console.log(i.tenant.length)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(ae,{dataSource:A,columns:v,onChange:l})})})})})},va=()=>e.jsxs(e.Fragment,{children:[e.jsxs(Y,{children:[e.jsx(U,{span:12,className:"text-center",children:e.jsx("h4",{children:"Users administration"})}),e.jsx(U,{span:12,className:"text-center",children:e.jsx(ns,{})})]}),e.jsx(Y,{className:"pt-3",children:e.jsx(U,{span:24,children:e.jsx(Na,{})})})]}),G=["autoridadArea","autoridadMunicipal","autoridadEstatal","autoridadAreaLocal","otraAutoridad","root"],ya=["owner","contractor","client"],Sa=()=>{const[t]=p.useForm(),[s,n]=c.useState(!1);c.useState(null);const[m,u]=c.useState(!1),[l,a]=c.useState(!1),[r,j]=c.useState(null),[y,{isSuccess:o,error:S,reset:A}]=Rt(),h=[{label:"Tipo",name:"tenantType",type:"select",placeholder:"Tipo",options:ya.map(d=>({label:d,value:d}))},{label:"Nombre",name:"tenantName",type:"text",placeholder:"Nombre"},{label:"Nombre Legal",name:"tenantLegalname",type:"text",placeholder:"Nombre"},{label:"Email",name:"tenantEmail",type:"email",placeholder:"Email"}],b=()=>{a(!1),u(!1),n(!0)},x=()=>{a(!1),u(!1),t.resetFields(),n(!1)},i=()=>{a(!1),u(!1),t.resetFields(),n(!1)},f=d=>{const g={name:d.tenantName,legalName:d.tenantLegalname,email:d.tenantEmail,isActive:!0,more:{type:d.tenantType}};y(g).unwrap(),A()};return c.useEffect(()=>{o&&(u(!0),j("Tenant added successfully"))},[o]),c.useEffect(()=>{S&&(a(!0),j("Error adding tenant"))},[S]),e.jsxs(e.Fragment,{children:[e.jsx(F,{type:"primary",onClick:b,children:"Add new tenant"}),e.jsxs(ne,{open:s,forceRender:!0,title:"Add tenant",onOk:x,onCancel:i,cancelButtonProps:{form:t,key:"cancel",htmlType:"reset"},footer:[e.jsx(F,{type:"default",onClick:i,children:"Exit"},"exit")],children:[e.jsx(fe,{fields:h,onFinish:f,name:"tenantForm",buttonTitle:"Submit",formName:t}),l&&be({message:r}),m&&Se({message:r})]})]})},ba=()=>{var y;c.useState([]),c.useState(!0),ie();const{data:t=[],isSuccess:s,error:n,isFetching:m,refetch:u}=Ot({}),l=(y=t==null?void 0:t.data)==null?void 0:y.map(o=>({key:o._id,name:o.name,email:o.email})),a=[{title:"Name",dataIndex:"name",key:"name",render:o=>e.jsx("a",{children:o})},{title:"Email",dataIndex:"email",key:"email"},{title:"Action",key:"action",render:(o,S)=>e.jsxs(xe,{size:"middle",children:[e.jsx(je,{style:{fontSize:20,color:"#008000",marginRight:10},onClick:()=>r(S)}),e.jsx(pe,{style:{fontSize:20,color:"#FF0000",marginRight:10},onClick:()=>j(S)})]})}],r=o=>{console.log(o)},j=o=>{console.log(o)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(ae,{dataSource:l,columns:a})})})})})},Ca=()=>e.jsxs(e.Fragment,{children:[e.jsxs(Y,{children:[e.jsx(U,{span:12,className:"text-center",children:e.jsx("h4",{children:"Tenants administration"})}),e.jsx(U,{span:12,className:"text-center",children:e.jsx(Sa,{})})]}),e.jsx(Y,{className:"pt-3",children:e.jsx(U,{span:24,children:e.jsx(ba,{})})})]}),Aa=()=>{const[t]=p.useForm(),[s,n]=c.useState(!1);c.useState(null);const[m,u]=c.useState(!1),[l,a]=c.useState(!1),[r,j]=c.useState(null),[y,{isSuccess:o,error:S,reset:A}]=kt(),v=[{label:"Nombre",name:"locationName",type:"text",placeholder:"Nombre"},{label:"Descripción",name:"description",type:"text",placeholder:"Descripcion"},{label:"Ciudad",name:"city",type:"text",placeholder:"Ciudad"},{label:"Departamento",name:"state",type:"text",placeholder:"Departamento"},{label:"Pais",name:"country",type:"text",placeholder:"Pais"}],h=()=>{a(!1),u(!1),n(!0)},b=()=>{a(!1),u(!1),t.resetFields(),n(!1)},x=()=>{a(!1),u(!1),t.resetFields(),n(!1)},i=f=>{const d={...f,isActive:!0};y(d).unwrap(),A()};return c.useEffect(()=>{o&&(u(!0),j("Location added successfully"))},[o]),c.useEffect(()=>{S&&(a(!0),j("Error adding location"))},[S]),e.jsxs(e.Fragment,{children:[e.jsx(F,{type:"primary",onClick:h,children:"Add location"}),e.jsxs(ne,{open:s,forceRender:!0,title:"Add tenant",onOk:b,onCancel:x,cancelButtonProps:{form:t,key:"cancel",htmlType:"reset"},footer:[e.jsx(F,{type:"default",onClick:x,children:"Exit"},"exit")],children:[e.jsx(fe,{fields:v,onFinish:i,name:"locationForm",buttonTitle:"Submit",formName:t}),l&&be({message:r}),m&&Se({message:r})]})]})},ka=()=>{var y;const{data:t=[],isSuccess:s,error:n,isFetching:m,refetch:u}=At({}),l=(y=t==null?void 0:t.data)==null?void 0:y.map(o=>({key:o._id,name:o.locationName,city:o.city,state:o.state,country:o.country})),a=[{title:"Name",dataIndex:"name",key:"name",render:o=>e.jsx("a",{children:o})},{title:"Ciudad",dataIndex:"city",key:"city"},{title:"Departamento",dataIndex:"state",key:"state"},{title:"Action",key:"action",render:(o,S)=>e.jsxs(xe,{size:"middle",children:[e.jsx(je,{style:{fontSize:20,color:"#008000",marginRight:10},onClick:()=>r(S)}),e.jsx(pe,{style:{fontSize:20,color:"#FF0000",marginRight:10},onClick:()=>j(S)})]})}],r=o=>{console.log(o)},j=o=>{console.log(o)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(ae,{dataSource:l,columns:a})})})})})},wa=()=>e.jsxs(e.Fragment,{children:[e.jsxs(Y,{children:[e.jsx(U,{span:12,className:"text-center",children:e.jsx("h4",{children:"Location administration"})}),e.jsx(U,{span:12,className:"text-center",children:e.jsx(Aa,{})})]}),e.jsx(Y,{className:"pt-3",children:e.jsx(U,{span:24,children:e.jsx(ka,{})})})]}),Ea=()=>{const t=P(j=>j.users.user),[s,n]=c.useState(!0),[m,u]=c.useState(!1),[l,a]=c.useState(!1);console.log("USER",t);const r=j=>{switch(j){case 1:n(!0),u(!1),a(!1);break;case 2:n(!1),u(!0),a(!1);break;case 3:n(!1),u(!1),a(!0);break;default:n(!0),u(!1),a(!1);break}};return e.jsxs("div",{className:"pageContainer",children:[e.jsx("div",{className:"tabs",children:e.jsxs("ul",{className:"tab-container",children:[e.jsx("li",{id:"tab1",className:s?"tab activeItem activeList":"tab",children:e.jsx("a",{onClick:()=>r(2),children:"Users settings"})}),(t==null?void 0:t.role)==="root"&&e.jsx("li",{id:"tab2",className:m?"tab activeItem activeList":"tab",children:e.jsx("a",{onClick:()=>r(1),children:"Tenants settings"})}),(t==null?void 0:t.role)==="root"&&e.jsx("li",{id:"tab3",className:l?"tab activeItem activeList":"tab",children:e.jsx("a",{onClick:()=>r(3),children:"Location settings"})})]})}),e.jsxs("div",{className:"blockBorder",children:[s&&e.jsx(va,{}),m&&(t==null?void 0:t.role)==="root"&&e.jsx(Ca,{}),l&&(t==null?void 0:t.role)==="root"&&e.jsx(wa,{})]})]})},Ia=()=>e.jsx("div",{children:"Reports"}),ls=me({}),Fa=ls.getInitialState(),z=Q.injectEndpoints({endpoints:t=>({getPermits:t.query({query:()=>"/permits",providesTags:["Permits"]}),getPermit:t.query({query:s=>`/permits/${s}`}),addPermit:t.mutation({query:s=>({url:"/permits",method:"POST",body:s}),invalidatesTags:["Permits"],extraOptions:{maxRetries:0}}),updatePermit:t.mutation({query:({id:s,data:n})=>({url:`/permits/${s}`,method:"PUT",body:n}),invalidatesTags:["Permits"],extraOptions:{maxRetries:0}})})}),{useGetPermitQuery:Pa,useGetPermitsQuery:Oa,useAddPermitMutation:Ra,useUpdatePermitMutation:J}=z,Ta=z.endpoints.getPermits.select(),Da=he(Ta,t=>t.data);ls.getSelectors(t=>Da(t)??Fa);const La={permits:[],permit:null,loading:!1,error:null},rs=re({name:"permits",initialState:La,reducers:{setPermit(t,s){t.permit=s.payload},setPermits(t,s){t.permits=s.payload.data}},extraReducers:t=>{t.addMatcher(z.endpoints.getPermits.matchFulfilled,(s,{payload:n})=>{s.permits=n.data,s.loading=!1,s.error=null}),t.addMatcher(z.endpoints.getPermits.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(z.endpoints.getPermits.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n}),t.addMatcher(z.endpoints.getPermit.matchFulfilled,(s,{payload:n})=>{s.permit=n,s.loading=!1,s.error=null}),t.addMatcher(z.endpoints.getPermit.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(z.endpoints.getPermit.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n}),t.addMatcher(z.endpoints.updatePermit.matchFulfilled,(s,{payload:n})=>{s.permit=n.data,s.loading=!1,s.error=null}),t.addMatcher(z.endpoints.updatePermit.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(z.endpoints.updatePermit.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n})}}),Ce=rs.actions,Ma=rs.reducer,Ua=({setValue:t,number:s,setShow:n,show:m})=>{const[u]=p.useForm();ie();const l=P(E=>E.permits.permit),a=P(E=>E.users.user),[r,j]=c.useState({}),[y,o]=c.useState(s),[S,A]=c.useState(null);c.useState(!0);const[v,h]=c.useState(!1),[b,{isSuccess:x,error:i,reset:f}]=J(),d="DD/MM/YYYY HH:mm";c.useEffect(()=>{var E;if((l==null?void 0:l.formNumber)===parseInt(s)){const R={...l==null?void 0:l.section1,date:M((E=l==null?void 0:l.section1)==null?void 0:E.date)};(l==null?void 0:l.status)==="waiting"&&G.includes(a==null?void 0:a.role)?h(!0):h(!1),u.setFieldsValue(R)}},[]);const g=E=>{const R={...l,section1:{...E,completed:!0}};b({id:l._id,data:R}).then(k=>{k.data.status===200&&(n("2"),t("2"))})},N=[{label:"Alto",value:"alto",style:{color:"red"}},{label:"Medio",value:"medio",style:{color:"orange"}}],w=E=>{A(E.target.value)};return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"INFORMACION GENERAL"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",y]})]}),e.jsx("hr",{}),e.jsx("div",{style:{marginRight:50,marginTop:30},children:e.jsxs(p,{form:u,name:"seccion1",layout:"vertical",onFinish:g,initialValues:r,children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex flex-row justify-content-start",children:e.jsx(p.Item,{label:"Fecha de Solicitud",name:"date",rules:[{required:!0,message:"Please input!"}],children:e.jsx(se,{format:d,disabled:v})})})}),e.jsx("div",{className:"col",children:e.jsx(p.Item,{label:"Compañía que requiere el servicio",name:"company",rules:[{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:v})})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsx(p.Item,{label:"Instalación",name:"location",rules:[{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:v})})}),e.jsx("div",{className:"col",children:e.jsx(p.Item,{label:"Area",name:"area",rules:[{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:v})})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsx(p.Item,{label:"Equipos a intervenir",name:"equipment",rules:[{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:v})})}),e.jsx("div",{className:"col",children:e.jsx(p.Item,{label:"Alcance del trabajo",name:"alcance",rules:[{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:v})})})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col",children:[e.jsx("div",{className:"d-flex flex-row justify-content-start",children:e.jsx(p.Item,{label:"Nivel Potencial de Peligro Identificado",name:"warning",rules:[{required:!0,message:"Please input!"}],children:e.jsx(Z.Group,{options:N,optionType:"button",onChange:w,disabled:v})})}),e.jsxs(zs,{children:[S==="alto"&&e.jsxs("p",{className:"textSubtitle",children:["Nivel de Peligro:"," ",e.jsx("span",{style:{color:"red"},children:S.toUpperCase()})]}),S==="medio"&&e.jsxs("p",{className:"textSubtitle",children:["Nivel de Peligro:"," ",e.jsx("span",{style:{color:"orange"},children:S.toUpperCase()})]})]})]}),e.jsx("div",{className:"col",children:e.jsx(p.Item,{label:"Equipos y Herramientas a Usar",name:"tools",rules:[{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:v})})})]}),e.jsx("div",{className:"d-flex justify-content-end mt-4",children:e.jsx(p.Item,{children:e.jsx(F,{type:"primary",htmlType:"submit",className:"float-right",children:"Seguir"})})})]})})]})},qa=({value:t,setValue:s,number:n,setShow:m,show:u})=>{const[l]=p.useForm(),a=P($=>$.permits.permit),r=P($=>$.users.user),[j,y]=c.useState(n);c.useState(!1);const[o,S]=c.useState(!1),[A,v]=c.useState(!1),[h,b]=c.useState(!1),[x,i]=c.useState(!1),[f,d]=c.useState(!1),[g,N]=c.useState(!1),[w,E]=c.useState(!1),[R,k]=c.useState(!1),[D,T]=c.useState(!1),[L,C]=c.useState(!1),[I,V]=c.useState(!1),[ge,{isSuccess:we,error:Ee,reset:Nn}]=J();c.useEffect(()=>{if((a==null?void 0:a.formNumber)===parseInt(n)){const $={...a==null?void 0:a.section2};l.setFieldsValue($),S($.check1),k($.check2),v($.check3),b($.check4),i($.check5),d($.check6),N($.check7),E($.check8),T($.check9),C($.check10),(a==null?void 0:a.status)==="waiting"&&G.includes(r==null?void 0:r.role)?V(!0):V(!1)}},[]);const os=$=>{const cs={...a,section2:{...$,completed:!0}};ge({id:a._id,data:cs}).then(ds=>{ds.data.status===200&&(m([...u,"3"]),s("3"))})};return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"ANALISIS DE RIESGOS, CERTIFICADOS DE APOYO Y DOCUMENTOS SOPORTE REQUERIDOS"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",j]})]}),e.jsx("hr",{}),e.jsx("div",{style:{marginRight:10},children:e.jsxs(p,{form:l,name:"seccion2",layout:"horizontal",onFinish:os,children:[e.jsxs("div",{children:[e.jsx("p",{className:"textFormItalic w-100",children:"ANALISIS DE RIESGOS REQUERIDOS"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[e.jsx(p.Item,{label:"Análisis de Seguridad en el Trabajo - AST",name:"check1",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{onChange:()=>S(!o),checked:o,disabled:I})}),e.jsx(p.Item,{label:"Nro.",name:"astNumber",style:{paddingLeft:20},rules:[o&&{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:!o})})]})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex flex-row",children:e.jsx(p.Item,{label:"Análisis de Peligro en la Etapa de Planificación - APEP",name:"apep",children:e.jsxs(Z.Group,{disabled:I,children:[e.jsx(Z,{value:"si",children:" Si "}),e.jsx(Z,{value:"no",children:" No "})]})})})})]})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[e.jsx(p.Item,{label:"Otro",name:"check2",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{onChange:()=>k(!R),checked:R,disabled:I})}),e.jsx(p.Item,{label:"Cual?",name:"oAnalysisDescription",style:{paddingLeft:20},rules:[R&&{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:!R})})]})})}),e.jsxs("div",{children:[e.jsx("p",{className:"textFormItalic w-100",children:"CERTIFICADOS DE APOYO REQUERIDOS"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[e.jsx(p.Item,{label:"Certificado Apoyo de Trabajo en Caliente",name:"check3",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{onChange:()=>v(!A),checked:A,disabled:I})}),e.jsx(p.Item,{label:"Nro.",name:"atcNumber",style:{paddingLeft:20},rules:[A&&{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:!A})})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[" ",e.jsx(p.Item,{label:"Certificado Apoyo de Radiaciones",name:"check4",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{onChange:()=>b(!h),checked:h,disabled:I})}),e.jsx(p.Item,{label:"Nro.",name:"certARNumber",style:{paddingLeft:20},rules:[h&&{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:!h})})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[e.jsx(p.Item,{label:"Certificado Apoyo de Excavación",name:"check5",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{onChange:()=>i(!x),checked:x,disabled:I})}),e.jsx(p.Item,{label:"Nro.",name:"certAENumber",style:{paddingLeft:20},rules:[x&&{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:!x})})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[" ",e.jsx(p.Item,{label:"Certificado Apoyo Trabajo en Altura",name:"check6",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{onChange:()=>d(!f),checked:f,disabled:I})}),e.jsx(p.Item,{label:"Nro.",name:"certATANumber",style:{paddingLeft:20},rules:[f&&{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:!f})})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[e.jsx(p.Item,{label:"Certificado Apoyo Izaje de Carga",name:"check7",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{onChange:()=>N(!g),checked:g,disabled:I})}),e.jsx(p.Item,{label:"Nro.",name:"certAICNumber",style:{paddingLeft:20},rules:[g&&{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:!g})})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[" ",e.jsx(p.Item,{label:"Certificado Apoyo de Espacios Confinados",name:"check8",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{onChange:()=>E(!w),checked:w,disabled:I})}),e.jsx(p.Item,{label:"Nro.",name:"certAECNumber",style:{paddingLeft:20},rules:[w&&{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:!w})})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[e.jsx(p.Item,{label:"Certificado Apoyo Ahislamiento de Energías",name:"check9",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{onChange:()=>T(!D),checked:D,disabled:I})}),e.jsx(p.Item,{label:"Nro.",name:"certAAENumber",style:{paddingLeft:20},rules:[D&&{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:!D})})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[" ",e.jsx(p.Item,{label:"Otro",name:"check10",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{onChange:()=>C(!L),checked:L,disabled:I})}),e.jsx(p.Item,{label:"Cual",name:"certOtherDesc",style:{paddingLeft:20},rules:[L&&{required:!0,message:"Please input!"}],children:e.jsx(O,{disabled:!L})})]})})]}),e.jsxs("div",{className:"",children:[e.jsx("p",{className:"textFormItalic w-100",children:"DOCUMENTOS SOPORTE REQUERIDOS"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex flex-row",children:e.jsx(p.Item,{label:"Preoperacionales Equipos y Herramientas",name:"reqDocsPEH",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{disabled:I})})})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[" ",e.jsx(p.Item,{label:"Procedimientos/Instructivos",name:"reqDocsPI",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{disabled:I})})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[" ",e.jsx(p.Item,{label:"FDS Productos químicos",name:"reqDocsFDS",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{disabled:I})})]})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex flex-row",children:e.jsx(p.Item,{label:"Otro",name:"reqDocsOther",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{disabled:I})})})})]})]})]}),e.jsx("div",{className:"d-flex justify-content-end mt-5",children:e.jsx(p.Item,{children:e.jsx(F,{type:"primary",htmlType:"submit",className:"float-right",children:"Seguir"})})})]})})]})},$a=({value:t,setValue:s,number:n,show:m,setShow:u})=>{const[l]=p.useForm(),a=P(d=>d.permits.permit),r=P(d=>d.users.user),[j,y]=c.useState(n);c.useState(!1),c.useState(!0);const[o,S]=c.useState(!1),A="DD/MM/YYYY HH:mm",[v,{isSuccess:h,error:b,reset:x}]=J();c.useEffect(()=>{var d,g,N,w,E,R,k,D,T,L,C,I,V,ge;if((a==null?void 0:a.formNumber)===parseInt(n)){const we={calibrationDate:(d=a==null?void 0:a.section3)!=null&&d.calibrationDate?M((g=a==null?void 0:a.section3)==null?void 0:g.calibrationDate):null,verificationDate:(N=a==null?void 0:a.section3)!=null&&N.verificationDate?M((w=a==null?void 0:a.section3)==null?void 0:w.verificationDate):null,row1Col1:(E=a==null?void 0:a.section3)!=null&&E.row1Col1?M((R=a==null?void 0:a.section3)==null?void 0:R.row1Col1):null,row1Col2:(k=a==null?void 0:a.section3)!=null&&k.row1Col2?M((D=a==null?void 0:a.section3)==null?void 0:D.row1Col2):null,row1Col3:(T=a==null?void 0:a.section3)!=null&&T.row1Col3?M((L=a==null?void 0:a.section3)==null?void 0:L.row1Col3):null,row1Col4:(C=a==null?void 0:a.section3)!=null&&C.row1Col4?M((I=a==null?void 0:a.section3)==null?void 0:I.row1Col4):null,row1Col5:(V=a==null?void 0:a.section3)!=null&&V.row1Col5?M((ge=a==null?void 0:a.section3)==null?void 0:ge.row1Col5):null},Ee={...a==null?void 0:a.section3,...we};l.setFieldsValue(Ee),(a==null?void 0:a.status)==="waiting"&&G.includes(r==null?void 0:r.role)?S(!0):S(!1)}},[]);const i=(d,g,N,w,E,R,k)=>e.jsx(e.Fragment,{children:N==="checkbox"?e.jsx(p.Item,{label:d,name:g,valuePropName:"checked",rules:[{type:N,message:`The input is not valid ${N}`},{required:E,message:`Please input a ${d}`}],children:e.jsx(q,{onChange:R,indeterminate:!1,disabled:k})},g):e.jsxs(p.Item,{name:g,label:d,rules:[{type:N,message:`The input is not valid ${N}`},{required:E,message:`Please input a ${d}`}],children:[N==="select"&&e.jsx(Select,{placeholder:`Input ${d}`,options:w,disabled:select}),N==="text"&&e.jsx(O,{placeholder:`Input ${d||"data"}`,disabled:k}),N==="radio"&&e.jsx(Z.Group,{options:w,disabled:k}),N==="date"&&e.jsx(se,{format:A,disabled:k})]},g)}),f=d=>{const g={...a,status:"waiting",section3:{...d,completed:!0}};v({id:a._id,data:g}).then(N=>{N.data.status===200&&(u([...m,"4"]),s("4"))})};return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"MONITOREO DE GASES"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",j]})]}),e.jsx("hr",{}),e.jsx("div",{style:{marginRight:10},children:e.jsxs(p,{form:l,name:"section3",onFinish:f,layout:"horizontal",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex",children:i("No Requerido","noRequired","checkbox",null,!1,null,o)})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex",children:i("Inicial","starter","checkbox",null,!1,null,o)})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex",children:i("Aleatorio","random","checkbox",null,!1,null,o)})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex",children:i("Continuo","continue","checkbox",null,!1,null,o)})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex",children:i("Registro cada(Min)","byMinutes","checkbox",null,!1,null,o)})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-4",children:e.jsx("div",{className:"d-flex",children:i("Nombre Inspector de Atmósfera","atmInspector","text",null,null,null,o)})}),e.jsx("div",{className:"col-3",children:e.jsx("div",{className:"d-flex",children:i("#Serial Equipo","idEquipment","text",null,null,null,o)})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex",children:i("Fecha Calibración","calibrationDate","date",null,null,null,o)})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex",children:i("Fecha Verificación","verificationDate","date",null,null,null,o)})})]}),e.jsxs("div",{className:"row gasHeight",children:[e.jsx("div",{className:"col-2",children:e.jsx("div",{className:"",children:"Fecha y Hora:"})}),e.jsxs("div",{className:"col-10",children:[" ",e.jsxs("div",{className:"d-flex flex-row justify-content-end",children:[i(null,"row1Col1","date",null,null,null,o),i(null,"row1Col2","date",null,null,null,o),i(null,"row1Col3","date",null,null,null,o),i(null,"row1Col4","date",null,null,null,o),i(null,"row1Col5","date",null,null,null,o)]})]})]}),e.jsxs("div",{className:"row gasHeight",children:[e.jsx("div",{className:"col-2",children:e.jsx("div",{className:"",children:"%LEL | 0%"})}),e.jsxs("div",{className:"col-10",children:[" ",e.jsxs("div",{className:"d-flex flex-row justify-content-end",children:[i(null,"row2Col1","text",null,null,null,o),i(null,"row2Col2","text",null,null,null,o),i(null,"row2Col3","text",null,null,null,o),i(null,"row2Col4","text",null,null,null,o),i(null,"row2Col5","text",null,null,null,o)]})]})]}),e.jsxs("div",{className:"row gasHeight",children:[e.jsx("div",{className:"col-2",children:e.jsx("div",{className:"",children:"%02 | 19.5% a 22.5%"})}),e.jsxs("div",{className:"col-10",children:[" ",e.jsxs("div",{className:"d-flex flex-row justify-content-end",children:[i(null,"row3Col1","text",null,null,null,o),i(null,"row3Col2","text",null,null,null,o),i(null,"row3Col3","text",null,null,null,o),i(null,"row3Col4","text",null,null,null,o),i(null,"row3Col5","text",null,null,null,o)]})]})]}),e.jsxs("div",{className:"row gasHeight",children:[e.jsx("div",{className:"col-2",children:e.jsx("div",{className:"",children:"CO (ppm) | s25"})}),e.jsxs("div",{className:"col-10",children:[" ",e.jsxs("div",{className:"d-flex flex-row justify-content-end",children:[i(null,"row4Col1","text",null,null,null,o),i(null,"row4Col2","text",null,null,null,o),i(null,"row4Col3","text",null,null,null,o),i(null,"row4Col4","text",null,null,null,o),i(null,"row4Col5","text",null,null,null,o)]})]})]}),e.jsxs("div",{className:"row gasHeight",children:[e.jsx("div",{className:"col-2",children:e.jsx("div",{className:"",children:"H2s (ppm) | s1"})}),e.jsxs("div",{className:"col-10",children:[" ",e.jsxs("div",{className:"d-flex flex-row justify-content-end",children:[i(null,"row5Col1","text",null,null,null,o),i(null,"row5Col2","text",null,null,null,o),i(null,"row5Col3","text",null,null,null,o),i(null,"row5Col4","text",null,null,null,o),i(null,"row5Col5","text",null,null,null,o)]})]})]}),e.jsxs("div",{className:"row gasHeight",children:[e.jsx("div",{className:"col-2",children:e.jsx("div",{className:"",children:"OTRO"})}),e.jsxs("div",{className:"col-10",children:[" ",e.jsxs("div",{className:"d-flex flex-row justify-content-end",children:[i(null,"row6Col1","text",null,null,null,o),i(null,"row6Col2","text",null,null,null,o),i(null,"row6Col3","text",null,null,null,o),i(null,"row6Col4","text",null,null,null,o),i(null,"row6Col5","text",null,null,null,o)]})]})]}),e.jsxs("div",{className:"row gasHeight",children:[e.jsx("div",{className:"col-2",children:e.jsx("div",{className:"",children:"FIRMA INSPECTOR"})}),e.jsxs("div",{className:"col-10",children:[" ",e.jsxs("div",{className:"d-flex flex-row justify-content-end",children:[i(null,"row7Col1","text",null,null,null,o),i(null,"row7Col2","text",null,null,null,o),i(null,"row7Col3","text",null,null,null,o),i(null,"row7Col4","text",null,null,null,o),i(null,"row7Col5","text",null,null,null,o)]})]})]}),e.jsx("div",{className:"d-flex justify-content-end mt-5",children:e.jsx(p.Item,{children:e.jsx(F,{type:"primary",htmlType:"submit",className:"float-right",children:"Seguir"})})})]})})]})};function ce(t){function s(R,k){return R>>>k|R<<32-k}for(var n=Math.pow,m=n(2,32),u="length",l,a,r="",j=[],y=t[u]*8,o=ce.h=ce.h||[],S=ce.k=ce.k||[],A=S[u],v={},h=2;A<64;h++)if(!v[h]){for(l=0;l<313;l+=h)v[l]=h;o[A]=n(h,.5)*m|0,S[A++]=n(h,1/3)*m|0}for(t+="";t[u]%64-56;)t+="\0";for(l=0;l<t[u];l++){if(a=t.charCodeAt(l),a>>8)return;j[l>>2]|=a<<(3-l)%4*8}for(j[j[u]]=y/m|0,j[j[u]]=y,a=0;a<j[u];){var b=j.slice(a,a+=16),x=o;for(o=o.slice(0,8),l=0;l<64;l++){var i=b[l-15],f=b[l-2],d=o[0],g=o[4],N=o[7]+(s(g,6)^s(g,11)^s(g,25))+(g&o[5]^~g&o[6])+S[l]+(b[l]=l<16?b[l]:b[l-16]+(s(i,7)^s(i,18)^i>>>3)+b[l-7]+(s(f,17)^s(f,19)^f>>>10)|0),w=(s(d,2)^s(d,13)^s(d,22))+(d&o[1]^d&o[2]^o[1]&o[2]);o=[N+w|0].concat(o),o[4]=o[4]+N|0}for(l=0;l<8;l++)o[l]=o[l]+x[l]|0}for(l=0;l<8;l++)for(a=3;a+1;a--){var E=o[l]>>a*8&255;r+=(E<16?0:"")+E.toString(16)}return r}const Ha=({value:t,setValue:s,number:n,show:m,setShow:u})=>{const l=ee(),[a]=p.useForm(),r=P(k=>k.permits.permit),j=P(k=>k.users.user),[y,o]=c.useState({}),[S,A]=c.useState(n);c.useState(!1);const[v,h]=c.useState(!1),b="DD/MM/YYYY HH:mm",[x,{isSuccess:i,error:f,reset:d}]=J();c.useEffect(()=>{if((r==null?void 0:r.formNumber)===parseInt(n)){const k={...r==null?void 0:r.section4};a.setFieldsValue(k),(r==null?void 0:r.status)==="waiting"&&G.includes(j==null?void 0:j.role),h(!1)}},[]);const g=[{label:"Si",value:"si"},{label:"N/A",value:"na"}],N=(k,D,T,L,C,I,V)=>e.jsx(e.Fragment,{children:T==="checkbox"?e.jsx(p.Item,{label:k,name:D,valuePropName:"checked",rules:[{type:T,message:`The input is not valid ${T}`},{required:C,message:`Please input a ${k}`}],children:e.jsx(q,{onChange:I,indeterminate:!1,disabled:V})},D):e.jsxs(p.Item,{name:D,label:k,rules:[{type:T,message:`The input is not valid ${T}`},{required:C,message:`Please input a ${k}`}],children:[T==="select"&&e.jsx(Select,{placeholder:`Input ${k}`,options:L,disabled:select}),T==="text"&&e.jsx(O,{placeholder:`Input ${k||"data"}`,disabled:V}),T==="radio"&&e.jsx(Z,{disabled:V}),T==="radiogroup"&&e.jsx(Z.Group,{options:L,disabled:V}),T==="date"&&e.jsx(se,{format:b,disabled:V})]},D)}),w=k=>{const D=[r==null?void 0:r.formNumber],T=[r==null?void 0:r.section1.equipment.trim().split(" ").join("")],L=D.concat(T),C=ce(L);E(C,k)},E=(k,D)=>{const T=`https://api.stamping.io/util/keys/create/?pwd=${k}&token=1ff366eb140491c61d626af1238b09b5a284e143bf713026f3b8ca4038d`;fetch(T).then(L=>L.json()).then(L=>{const C={...r,status:"waiting",section4:{...D,completed:!0},more:{publicKey:L.RSA.publicKey,privateKey:L.RSA.privateKey}};R(C)})},R=k=>{x({id:r._id,data:k}).then(D=>{D.data.status===200&&(ke({title:"Solicitud Enviada",content:"La solicitud fue enviada exitosamente"}),l("/permissions"))}),d()};return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"REVISION CONDICIONES PREINICIO DE TRABAJO"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",S]})]}),e.jsx("hr",{}),e.jsx("div",{style:{marginRight:10},children:e.jsxs(p,{form:a,layout:"horizonatl",name:"section4",initialValues:y,onValuesChange:()=>{o(a.getFieldsValue())},onFinish:w,children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex justify-content-start align-items-baseline",children:[e.jsx("div",{className:"",children:"EL PERSONAL MANIFIESTA ENCONTRARSE EN BUENAS CONDICIONES DE SALUD"}),e.jsx("div",{className:"ms-4",children:N("","healthy","checkbox",null,!0,null,v)})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex justify-content-start align-items-baseline",children:[e.jsx("div",{className:"",children:"SE HA COMPLETADO EL AISLAMIENTO, BLOQUEO Y ETIQUETADO"}),e.jsx("div",{className:"ms-4",children:N("","isnulate","radiogroup",g,!0,null,v)})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex justify-content-start align-items-baseline",children:[e.jsx("div",{className:"",children:"LOS EQUIPOS SE ENCUENTRAN EN CONDICIONES SEGURAS PARA SER ITERVENIDOS"}),e.jsx("div",{className:"ms-4",children:N("","safety","radiogroup",g,!1,null,v)})]})})}),e.jsx("div",{className:"d-flex justify-content-end mt-5",children:e.jsx(p.Item,{children:e.jsx(F,{type:"primary",htmlType:"submit",className:"float-right",children:"Enviar Solicitud"})})})]})})]})},Ya=()=>{const t=ee(),[s,n,m,u]=p.useForm(),l=P(d=>d.permits.permit),a=P(d=>d.users.user),[r,j]=c.useState({}),[y,{isSuccess:o,error:S,reset:A}]=J(),v="DD/MM/YYYY HH:mm";c.useEffect(()=>{const d={nameAda:a==null?void 0:a.name,signAda:a==null?void 0:a.name,dateAda:M(),nameAal:a==null?void 0:a.name,signAal:a==null?void 0:a.name,dateAal:M(),nameAe:a==null?void 0:a.name,signAe:a==null?void 0:a.name,dateAe:M(),nameOa:a==null?void 0:a.name,signOa:a==null?void 0:a.name,dateOa:M()};s.setFieldsValue(d),j(d)},[]);const h=(d,g,N,w,E,R,k)=>e.jsx(e.Fragment,{children:e.jsxs(p.Item,{name:g,label:d,rules:[{type:N,message:`The input is not valid ${N}`},{required:E,message:`Please input a ${d}`}],children:[N==="text"&&e.jsx(O,{placeholder:`Input ${d||"data"}`,disabled:k}),N==="date"&&e.jsx(se,{format:v,disabled:k})]},g)}),b=d=>{const g={...l,status:"approved",section5:{...d,completed:!0}};y({id:l._id,data:g}).then(w=>{w.data.status===200&&(console.log("Received values of form: ",w.data),ke({content:"Se ha aprobado el permiso",title:"Permiso Aprobado"}),A(),t("/permissions"))});const N=M(d.dateAda).format("DD/MM/YYYY HH:mm");console.log("fecha ",N)},x=d=>{console.log("Received values of form: ",d)},i=d=>{console.log("Received values of form: ",d)},f=d=>{console.log("Received values of form: ",d)};return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"APROBACION"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",l==null?void 0:l.formNumber]})]}),e.jsx("hr",{}),e.jsx("div",{style:{marginRight:10},children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Autoridad de Area"}),e.jsx("hr",{className:""}),e.jsxs(p,{form:s,name:"section51",layout:"vertical",initialValues:r,onFinish:b,children:[h("Nombre","nameAda","text","",!0,"",!1),h("Firma","signAda","text","",!0,"",!1),h("Fecha","dateAda","date","",!0,"",!1),e.jsx(F,{type:"primary",htmlType:"submit",children:"Firmar"})]})]}),e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Autoridad de Area Local"}),e.jsx("hr",{className:""}),e.jsxs(p,{form:n,name:"section52",layout:"vertical",initialValues:r,onFinish:x,children:[h("Nombre","nameAal","text","",!0,"",!1),h("Firma","signAal","text","",!0,"",!1),h("Fecha","dateAal","date","",!0,"",!1),e.jsx(F,{type:"primary",htmlType:"submit",children:"Firmar"})]})]}),e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Autoridad Ejecutante"}),e.jsx("hr",{className:""}),e.jsxs(p,{form:m,name:"section53",layout:"vertical",initialValues:r,onFinish:i,children:[h("Nombre","nameAe","text","",!0,"",!1),h("Firma","signAe","text","",!0,"",!1),h("Fecha","dateAe","date","",!0,"",!1),e.jsx(F,{type:"primary",htmlType:"submit",children:"Firmar"})]})]}),e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Otra Autoridad"}),e.jsx("hr",{className:""}),e.jsxs(p,{form:u,name:"section54",layout:"vertical",initialValues:r,onFinish:f,children:[h("Nombre","nameOa","text","",!0,"",!1),h("Firma","signOa","text","",!0,"",!1),h("Fecha","dateOa","date","",!0,"",!1),e.jsx(F,{type:"primary",htmlType:"submit",children:"Firmar"})]})]})]})})]})},za=()=>{p.useForm();const t=P(m=>m.permits.permit);P(m=>m.users.user),c.useState({}),J(),c.useEffect(()=>{},[]);const s=[{title:"Motivo",dataIndex:"motivo",key:"motivo"},{title:"Hora",dataIndex:"date",key:"date"},{title:"Firma AE",dataIndex:"signAe",key:"signAe"},{title:"Firma AAL",dataIndex:"signAal",key:"signAal"}],n=[{title:"Fecha",dataIndex:"rdate",key:"rdate"},{title:"Hora Inicio",dataIndex:"rstart",key:"rstart"},{title:"Hora Fin",dataIndex:"rend",key:"rend"},{title:"Firma AE",dataIndex:"signAe",key:"signAe"},{title:"Firma AAL",dataIndex:"signAal",key:"signAal"}];return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"SUSPENSIONES Y REVALIDACIONES"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",t==null?void 0:t.formNumber]})]}),e.jsx("hr",{}),e.jsxs("div",{style:{marginRight:10},children:[e.jsxs("div",{className:"row",children:[e.jsx("p",{className:"mb-2",children:"Suspenciones"}),e.jsx(ae,{columns:s,dataSource:t==null?void 0:t.suspensions,pagination:!1})]}),e.jsxs("div",{className:"row",children:[e.jsx("p",{className:"mb-2 mt-2",children:"Revalidaciones"}),e.jsx(ae,{columns:n,dataSource:t==null?void 0:t.suspensions,pagination:!1})]}),e.jsxs("div",{className:"d-flex justify-content-around mt-5",children:[e.jsx(F,{type:"primary",htmlType:"submit",className:"float-right",children:"Suspenciones"}),e.jsx(F,{type:"primary",htmlType:"submit",className:"float-right",children:"Revalidaciones"})]})]})]})},Va=()=>{const[t]=p.useForm(),s=P(x=>x.permits.permit);P(x=>x.users.user);const[n,m]=c.useState({}),[u,l]=c.useState(!1),[a,r]=c.useState(!0),[j,y]=c.useState(!0),[o,S]=c.useState(!0);J();const A="DD/MM/YYYY HH:mm",v=x=>{x==="check1"&&r(!a),x==="check2"&&y(!j),x==="check3"&&S(!o)};c.useEffect(()=>{},[]);const h=(x,i,f,d,g,N,w)=>e.jsx(e.Fragment,{children:f==="checkbox"?e.jsx(p.Item,{label:x,name:i,valuePropName:"checked",rules:[{type:f,message:`The input is not valid ${f}`},{required:g,message:`Please input a ${x}`}],children:e.jsx(q,{onChange:()=>v(N),indeterminate:!1,disabled:w})},i):e.jsxs(p.Item,{name:i,label:x,rules:[{type:f,message:`The input is not valid ${f}`},{required:g,message:`Please input a ${x}`}],children:[f==="text"&&e.jsx(O,{placeholder:`Input ${x||"data"}`,disabled:w}),f==="date"&&e.jsx(se,{format:A,disabled:w})]},i)}),b=x=>{console.log("Submit: ",x),{...s,section7:{...x}}};return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"REGISTRO ACOMPAÑAMIENTO DURANTE EJECUCION"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",s==null?void 0:s.formNumber]})]}),e.jsx("hr",{}),e.jsx("div",{style:{marginRight:10},children:e.jsxs(p,{form:t,layout:"horizonatl",name:"section7",initialValues:n,onValuesChange:()=>{m(t.getFieldsValue())},onFinish:b,children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex justify-content-start align-items-baseline",children:[e.jsx("div",{className:"",children:"VISITA LIDERAZGO"}),e.jsx("div",{className:"ms-4",children:h("","visit","checkbox",null,!1,"check1",u)}),e.jsx("div",{className:"ms-4",children:h("Nombre","vname","text",null,!1,null,a)}),e.jsx("div",{className:"ms-4",children:h("Firma","vsign","text",null,!1,null,a)}),e.jsx("div",{className:"ms-4",children:h("Fecha","vdate","date",null,!0,null,a)})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex justify-content-start align-items-baseline",children:[e.jsx("div",{className:"",children:"CONVERSACION Y/O REFLEXXION"}),e.jsx("div",{className:"ms-4",children:h("","reflection","checkbox",null,!0,"check2",u)}),e.jsx("div",{className:"ms-4",children:h("Nombre","rname","text",null,!1,null,j)}),e.jsx("div",{className:"ms-4",children:h("Firma","rsign","text",null,!1,null,j)}),e.jsx("div",{className:"ms-4",children:h("Fecha","rdate","date",null,!1,null,j)})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex justify-content-start align-items-baseline",children:[e.jsx("div",{className:"",children:"REVISION DEL PERMISO"}),e.jsx("div",{className:"ms-4",children:h("","check","checkbox",null,!1,"check3",u)}),e.jsx("div",{className:"ms-4",children:h("Nombre","cname","text",null,!1,null,o)}),e.jsx("div",{className:"ms-4",children:h("Firma","csign","text",null,!1,null,o)}),e.jsx("div",{className:"ms-4",children:h("Fecha","cdate","date",null,!1,null,o)})]})})}),e.jsx("div",{className:"d-flex justify-content-end mt-5",children:e.jsx(p.Item,{children:e.jsx(F,{type:"primary",htmlType:"submit",className:"float-right",children:"Enviar Registro"})})})]})})]})},Ba=()=>{const t=ee(),[s,n,m,u]=p.useForm(),l=P(d=>d.permits.permit),a=P(d=>d.users.user),[r,j]=c.useState({});c.useState(""),c.useState([]);const[y,{isSuccess:o,error:S,reset:A}]=J(),v="DD/MM/YYYY HH:mm";c.useEffect(()=>{const d={nameAda:a==null?void 0:a.name,signAda:a==null?void 0:a.name,dateAda:M(),nameAal:a==null?void 0:a.name,signAal:a==null?void 0:a.name,dateAal:M(),nameAe:a==null?void 0:a.name,signAe:a==null?void 0:a.name,dateAe:M(),nameOa:a==null?void 0:a.name,signOa:a==null?void 0:a.name,dateOa:M()};s.setFieldsValue(d),j(d)},[]);const h=(d,g,N,w,E,R,k)=>e.jsx(e.Fragment,{children:e.jsxs(p.Item,{name:g,label:d,rules:[{type:N,message:`The input is not valid ${N}`},{required:E,message:`Please input a ${d}`}],children:[N==="text"&&e.jsx(O,{placeholder:`Input ${d||"data"}`,disabled:k}),N==="date"&&e.jsx(se,{format:v,disabled:k})]},g)}),b=d=>{const g={...l,status:"completed",section8:{...d,completed:!0}};y({id:l._id,data:g}).then(N=>{N.data.status===200&&(ke({title:"Trabajo completado",content:"El trabajo ha sido completado con éxito"}),t(`/preview/${l==null?void 0:l.formNumber}`))})},x=d=>{console.log("Received values of form: ",d)},i=d=>{console.log("Received values of form: ",d)},f=d=>{console.log("Received values of form: ",d)};return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"CIERRE"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",l==null?void 0:l.formNumber]})]}),e.jsx("hr",{}),e.jsx("div",{style:{marginRight:10},children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Autoridad de Area"}),e.jsx("hr",{className:""}),e.jsxs(p,{form:s,name:"section81",layout:"vertical",initialValues:r,onFinish:b,children:[h("Nombre","nameAda","text","",!0,"",!1),h("Firma","signAda","text","",!0,"",!1),h("Fecha","dateAda","date","",!0,"",!1),e.jsx(F,{type:"primary",htmlType:"submit",children:"Firmar"})]})]}),e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Autoridad de Area Local"}),e.jsx("hr",{className:""}),e.jsxs(p,{form:n,name:"section82",layout:"vertical",initialValues:r,onFinish:x,children:[h("Nombre","nameAal","text","",!0,"",!1),h("Firma","signAal","text","",!0,"",!1),h("Fecha","dateAal","date","",!0,"",!1),e.jsx(F,{type:"primary",htmlType:"submit",children:"Firmar"})]})]}),e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Autoridad Ejecutante"}),e.jsx("hr",{className:""}),e.jsxs(p,{form:m,name:"section83",layout:"vertical",initialValues:r,onFinish:i,children:[h("Nombre","nameAe","text","",!0,"",!1),h("Firma","signAe","text","",!0,"",!1),h("Fecha","dateAe","date","",!0,"",!1),e.jsx(F,{type:"primary",htmlType:"submit",children:"Firmar"})]})]}),e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Otra Autoridad"}),e.jsx("hr",{className:""}),e.jsxs(p,{form:u,name:"section84",layout:"vertical",initialValues:r,onFinish:f,children:[h("Nombre","nameOa","text","",!0,"",!1),h("Firma","signOa","text","",!0,"",!1),h("Fecha","dateOa","date","",!0,"",!1),e.jsx(F,{type:"primary",htmlType:"submit",children:"Firmar"})]})]})]})})]})},Ga=()=>{const{id:t}=Vs(),s=P(j=>j.users.user),[n,m]=c.useState("1"),[u,l]=c.useState([]),a=JSON.parse(t);c.useEffect(()=>{a!=null&&a.value&&m(a.value)},[a.value]);const r=[{label:e.jsx("div",{style:{color:"red"},children:"Seccion 1"}),value:"1"},{label:e.jsx("div",{style:{color:"red"},children:"Seccion 2"}),value:"2"},{label:e.jsx("div",{style:{color:"red"},children:"Seccion 3"}),value:"3"},{label:e.jsx("div",{style:{color:"red"},children:"Seccion 4"}),value:"4"},{label:e.jsx("div",{style:{color:"green"},children:"Seccion 5"}),value:"5"},{label:e.jsx("div",{style:{color:"green"},children:"Seccion 6"}),value:"6"},{label:e.jsx("div",{style:{color:"blue"},children:"Seccion 7"}),value:"7"},{label:e.jsx("div",{style:{color:"blue"},children:"Seccion 8"}),value:"8"}];return e.jsxs("div",{className:"pageContainer",children:[e.jsx(Y,{className:"d-flex justify-content-center",children:e.jsx(Bs,{options:r,value:n,onChange:m,size:"medium"})}),e.jsxs(Y,{children:[n==="1"&&e.jsx(Ua,{value:n,setValue:m,number:a==null?void 0:a.id,show:u,setShow:l}),n==="2"&&u.includes("2")&&e.jsx(qa,{value:n,setValue:m,number:a==null?void 0:a.id,show:u,setShow:l}),n==="3"&&u.includes("3")&&e.jsx($a,{value:n,setValue:m,number:a==null?void 0:a.id,show:u,setShow:l}),n==="4"&&u.includes("4")&&e.jsx(Ha,{value:n,setValue:m,number:a==null?void 0:a.id,show:u,setShow:l}),n==="5"&&G.includes(s==null?void 0:s.role)&&e.jsx(Ya,{value:n,setValue:m,number:a==null?void 0:a.id,show:u,setShow:l}),n==="6"&&G.includes(s==null?void 0:s.role)&&e.jsx(za,{value:n,setValue:m,number:a==null?void 0:a.id,show:u,setShow:l}),n==="7"&&G.includes(s==null?void 0:s.role)&&e.jsx(Va,{value:n,setValue:m,number:a==null?void 0:a.id,show:u,setShow:l}),n==="8"&&G.includes(s==null?void 0:s.role)&&e.jsx(Ba,{value:n,setValue:m,number:a==null?void 0:a.id,show:u,setShow:l})]})]})},_a="/assets/LogoHorizontal-DH1awmUX.svg",Qa=({children:t})=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"container-fluid layoutContainer",children:e.jsx("div",{className:"subContent",children:e.jsx("div",{className:"abs-center",children:e.jsxs(Y,{children:[e.jsx(U,{className:"colStyle",children:e.jsx("div",{className:"",style:{marginBottom:20,marginTop:20},children:e.jsx("img",{src:_a,alt:"",className:"brandLogo"})})}),e.jsx(U,{className:"colStyle",children:e.jsxs(Ae,{className:"mainBox",children:[e.jsx("div",{className:"line"}),e.jsx("p",{className:"textStyle cardSubTitle",children:"¡Welcome!"}),e.jsx("p",{className:"textStyle text5 text-center mt-3",children:"Login to continue"}),e.jsx("div",{className:"line"}),e.jsx("div",{className:"formContainer pt-4",children:t})]})})]})})})})}),Ja=()=>{const{loading:t}=P(l=>l.auth),{login:s}=le(),[n]=p.useForm(),m=[{label:"Email",name:"email",type:"email",placeholder:"Email"},{label:"Password",name:"password",type:"password",placeholder:"Password"}],u=l=>{const a={email:l.email,password:l.password};s(a)};return e.jsx(e.Fragment,{children:e.jsx(fe,{fields:m,onFinish:u,formName:n,buttonTitle:t?"Loading...":"Login",name:"login"})})},Wa=()=>e.jsx(e.Fragment,{children:e.jsx(Qa,{children:e.jsx(Ja,{})})}),is=()=>{var b;c.useState([]);const t=P(x=>x.tenants.tenants);c.useState(!0),ie();const{data:s,isSuccess:n,error:m,isFetching:u,refetch:l}=qt({}),[a,r]=c.useState({}),[j,y]=c.useState({}),o=(x,i,f)=>{console.log("Various parameters",x,i,f),r(i),y(f)};t==null||t.map(x=>({text:x.name,value:x.name}));const S=(b=s==null?void 0:s.data)==null?void 0:b.map(x=>{var i,f;return{key:x._id,name:x.assetName,internalId:x.internalId,location:(i=x.location)==null?void 0:i.locationName,city:(f=x.location)==null?void 0:f.city}}),A=[{title:"Name",dataIndex:"name",key:"name",render:x=>e.jsx("a",{children:x}),sorter:(x,i)=>{var f,d;return((f=x.name)==null?void 0:f.length)-((d=i.name)==null?void 0:d.length)}},{title:"Serial Equipo",dataIndex:"internalId",key:"internalId"},{title:"Ubicación",dataIndex:"location",key:"location"},{title:"Ciudad",dataIndex:"city",key:"city"},{title:"Action",key:"action",render:(x,i)=>e.jsxs(xe,{size:"middle",children:[e.jsx(je,{style:{fontSize:20,color:"#008000",marginRight:10},onClick:()=>v(i)}),e.jsx(pe,{style:{fontSize:20,color:"#FF0000",marginRight:10},onClick:()=>h(i)})]})}],v=x=>{console.log(x)},h=x=>{console.log(x.tenant.length)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(ae,{dataSource:S,columns:A,onChange:o})})})})})},Ka=["vehicle","property","equipment","machinery","other"],Xa=()=>{const[t]=p.useForm(),{credentials:s}=le(),n=P(N=>N.locations.locations),[m,u]=c.useState(!1);c.useState(null);const[l,a]=c.useState(!1),[r,j]=c.useState(!1),[y,o]=c.useState(null),[S,{isSuccess:A,error:v,reset:h}]=$t(),b=n==null?void 0:n.map(N=>({label:N.locationName,value:N._id}));console.log("locations",b);const x=[{label:"Nombre",name:"assetName",type:"text",placeholder:"Nombre"},{label:"Serial Equipo",name:"internalId",type:"text",placeholder:"Serial del equipo"},{label:"Tipo",name:"assetType",type:"select",placeholder:"Tipo",options:Ka.map(N=>({label:N,value:N}))},{label:"Ubicacion",name:"location",type:"select",placeholder:"Ubicacion",options:n.map(N=>({label:N.locationName,value:N._id}))}],i=()=>{j(!1),a(!1),u(!0)},f=()=>{j(!1),a(!1),t.resetFields(),u(!1)},d=()=>{j(!1),a(!1),t.resetFields(),u(!1)},g=N=>{const w={...N,isActive:!0,tenant:s==null?void 0:s.tenantId};S(w).unwrap(),h()};return c.useEffect(()=>{A&&(a(!0),o("Asset created successfully")),v&&(j(!0),o("Error creating asset"))},[A,v]),e.jsxs(e.Fragment,{children:[e.jsx(F,{type:"primary",onClick:i,children:"Add Asset"}),e.jsxs(ne,{open:m,forceRender:!0,title:"Add assets",onOk:f,onCancel:d,cancelButtonProps:{form:t,key:"cancel",htmlType:"reset"},footer:[e.jsx(F,{type:"default",onClick:d,children:"Exit"},"exit")],children:[e.jsx(fe,{fields:x,onFinish:g,name:"assetForm",buttonTitle:"Submit",formName:t}),r&&be({message:y}),l&&Se({message:y})]})]})},Za=()=>e.jsxs(e.Fragment,{children:[e.jsxs(Y,{children:[e.jsx(U,{span:12,className:"text-center",children:e.jsx("h4",{children:"Assets administration"})}),e.jsx(U,{span:12,className:"text-center",children:e.jsx(Xa,{})})]}),e.jsx(Y,{className:"pt-3",children:e.jsx(U,{span:24,children:e.jsx(is,{})})})]}),en=()=>e.jsx("div",{children:"Maintenance"}),sn=()=>e.jsxs(e.Fragment,{children:[e.jsxs(Y,{children:[e.jsx(U,{span:12,className:"text-center",children:e.jsx("h4",{children:"Assets maintenance"})}),e.jsx(U,{span:12,className:"text-center",children:e.jsx(en,{})})]}),e.jsx(Y,{className:"pt-3",children:e.jsx(U,{span:24,children:e.jsx(is,{})})})]}),tn=()=>{const[t,s]=c.useState(!0),[n,m]=c.useState(!1),u=l=>{switch(l){case 1:s(!0),m(!1);break;case 2:s(!1),m(!0);break;default:s(!0),m(!1);break}};return e.jsxs("div",{className:"pageContainer",children:[e.jsx("div",{className:"tabs",children:e.jsxs("ul",{className:"tab-container",children:[e.jsx("li",{id:"tab1",className:t?"tab activeItem activeList":"tab",children:e.jsx("a",{onClick:()=>u(1),children:"Administración"})}),e.jsx("li",{id:"tab2",className:n?"tab activeItem activeList":"tab",children:e.jsx("a",{onClick:()=>u(2),children:"Mantenimiento"})})]})}),e.jsxs("div",{className:"blockBorder",children:[t&&e.jsx(Za,{}),n&&e.jsx(sn,{})]})]})},ye=Gs({reducer:{auth:ht,users:bt,tenants:Mt,assets:Vt,locations:Ft,permits:Ma,[Q.reducerPath]:Q.reducer},middleware:t=>t().concat(Q.middleware),devTools:!0});_s(ye.dispatch);const an=()=>(c.useEffect(()=>{console.log("subscribing");const t=ye.dispatch(_.endpoints.getLocations.initiate()),s=ye.dispatch(z.endpoints.getPermits.initiate());return()=>{console.log("unsubscribing"),t.unsubscribe(),s.unsubscribe()}},[]),e.jsx(Be,{})),nn=()=>e.jsx("div",{className:"pageContainer",children:e.jsx("div",{className:"tabs",children:e.jsxs("div",{className:"tab-container",children:[e.jsxs("div",{id:"tab1",className:"tab",children:[e.jsx("a",{href:"#tab1",children:"Seccion 1"}),e.jsx("div",{className:"tab-content",children:e.jsx("p",{className:"textSubtitle",children:"INFORMACION GENERAL"})})]}),e.jsxs("div",{id:"tab2",className:"tab",children:[e.jsx("a",{href:"#tab2",children:"Seccion 2"}),e.jsx("div",{className:"tab-content",children:e.jsx("p",{className:"textSubtitle",children:"ANALISIS DE RIESGO, CERTIFICADOS DE APOYO Y DOCUMENTOS SOPORTE REQUERIDOS"})})]}),e.jsxs("div",{id:"tab3",className:"tab",children:[e.jsx("a",{href:"#tab3",children:"Seccion 3"}),e.jsx("div",{className:"tab-content",children:e.jsx("p",{className:"textSubtitle",children:"MONITOREO DE GASES"})})]})]})})}),ln=()=>{p.useForm();const t=ie(),s=P(f=>f.permits.permits),n=ee();c.useState(!0);const[m,u]=c.useState(!1),[l,a]=c.useState(!1);c.useState(null);const[r,j]=c.useState(0),[y,o]=c.useState({status:"pending",section1:{completed:!1},section2:{completed:!1},section3:{completed:!1},section4:{completed:!1},section5:{completed:!1},section6:{completed:!1},more:{}}),[S,{isSuccess:A,error:v,reset:h}]=Ra(),b=()=>{const f=(s==null?void 0:s.length)>0?s[s.length-1].formNumber:0,d=s.find(g=>g.formNumber===f);(d==null?void 0:d.formNumber)>0&&(d==null?void 0:d.status)!=="pending"?(S(y).then(g=>{t(Ce.setPermit(g.data.data))}),j(f+1),i(f+1)):f===0?(S(y).then(g=>{t(Ce.setPermit(g.data.data))}),j(f),i(f+1)):(console.log("Permiso creado completado",d),t(Ce.setPermit(d)),j(d==null?void 0:d.formNumber),i(d==null?void 0:d.formNumber))},x=()=>{b(),a(!1),u(!1)},i=f=>{const d=JSON.stringify({id:f,value:null});n(`/form/${d}`)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsx("div",{className:"col-md",children:e.jsx(F,{type:"primary",className:"",onClick:x,children:"Nuevo permiso"})})})})},rn=()=>{var L;const t=ee(),s=P(C=>C.users.user),[n,m]=c.useState([]),[u,l]=c.useState(!0),[a,r]=c.useState(null),{data:j,isLoading:y,error:o}=Oa(),[S,A]=c.useState(!1),[v,h]=c.useState(!1),[b,x]=c.useState(!1),{data:i,isSuccess:f,error:d}=Pa(a,{skip:u});c.useEffect(()=>{const C=JSON.parse(localStorage.getItem("tempForm"));(C==null?void 0:C.length)>0&&m(C)},[]);const g=(L=j==null?void 0:j.data)==null?void 0:L.map(C=>({key:C._id,formNumber:C.formNumber,status:C.status,date:M(C.createdAt).format("DD/MM/YYYY HH:MM"),company:C.company||"N/A"})),N=e.jsxs("div",{className:"",children:[e.jsx("p",{className:"",children:"Completar formulario"}),e.jsx("p",{className:"",children:"ó Editar antes de su aprobación"})]}),w=[{title:"Número",dataIndex:"formNumber",key:"formNumber",render:C=>e.jsx("a",{children:C})},{title:"Fecha",dataIndex:"date",key:"date"},{title:"Estado",dataIndex:"status",key:"status"},{title:"Compañía",dataIndex:"company",key:"company"},{title:"Acciones",key:"action",render:(C,I)=>e.jsxs(xe,{size:"middle",children:[e.jsx(te,{title:"Editar / Completar",content:N,children:e.jsx(je,{style:{fontSize:20,color:"#008000",marginRight:10},onClick:()=>E(I)})}),e.jsx(te,{title:"Eliminar",children:e.jsx(pe,{style:{fontSize:20,color:"#FF0000",marginRight:10},onClick:()=>T(I)})}),G.includes(s==null?void 0:s.role)&&I.status==="waiting"&&e.jsx(te,{title:"Aprobar",children:e.jsx(Ve,{style:{fontSize:20,color:"#0000FF"},onClick:()=>R(I)})}),G.includes(s==null?void 0:s.role)&&I.status==="approved"&&e.jsx(te,{title:"Completar",children:e.jsx(Qs,{style:{fontSize:20,color:"#008000"},onClick:()=>k(I)})}),G.includes(s==null?void 0:s.role)&&I.status==="completed"&&e.jsx(te,{title:"Vista Previa",children:e.jsx(Js,{style:{fontSize:20,color:"#FA9C0C"},onClick:()=>D(I)})})]})}],E=C=>{r(C.key),l(!1)},R=C=>{r(C.key),l(!1),A(!0)},k=C=>{r(C.key),l(!1),h(!0)},D=C=>{r(C.key),l(!1),x(!0)};c.useEffect(()=>{if(i){let C={};S?(C=JSON.stringify({id:i==null?void 0:i.formNumber,value:"5"}),t(`/form/${C}`)):v?(C=JSON.stringify({id:i==null?void 0:i.formNumber,value:"8"}),t(`/form/${C}`)):b?(C=JSON.stringify({id:i==null?void 0:i.formNumber,value:""}),t(`/preview/${C}`)):(C=JSON.stringify({id:i==null?void 0:i.formNumber,value:null}),t(`/form/${C}`))}},[f]);const T=C=>{console.log(C)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(ae,{dataSource:g,columns:w})})})})})},on=()=>e.jsxs(e.Fragment,{children:[e.jsxs(Y,{children:[e.jsx(U,{span:12,className:"text-center pt-2",children:e.jsx("h4",{children:"Administración de permisos"})}),e.jsx(U,{span:12,className:"text-center pt-2",children:e.jsx(ln,{})})]}),e.jsx(Y,{className:"pt-3",children:e.jsx(U,{span:24,children:e.jsx(rn,{})})})]}),cn={width:"100%",height:"100%",padding:"0px 10px 0px 10px",marginTop:"20px"},dn={display:"flex",justifyContent:"space-between",padding:"0px 10px 0px 10px",marginTop:"20px",marginBottom:"10px"},un={fontSize:"20px",fontWeight:500,color:"blue"},mn={fontSize:"20px",fontWeight:100,color:"black"},hn={marginLeft:"10px",fontSize:"20px",fontWeight:400,color:"red",border:"1px solid lightgrey",padding:"0px 20px 0px 20px",borderRadius:"5px"},xn={display:"flex",justifyContent:"space-between"},qe={marginBottom:"10px"},$e={fontSize:"1rem",fontWeight:500,color:"black",backgroundColor:"rgb(189, 198, 255)",padding:"5px 10px 5px 10px"},jn=({section1:t})=>e.jsxs(e.Fragment,{children:[e.jsxs("div",{className:"row section-label",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[e.jsxs("p",{children:["Fecha de solicitud:"," ",e.jsx("span",{children:M(t==null?void 0:t.updatedAt).format("DD/MM/YYYY")})]}),e.jsxs("p",{className:"ps-2",children:["Hora: ",e.jsx("span",{children:M(t==null?void 0:t.updatedAt).format("HH:mm")})]})]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Compañia que requiere el sercicio: ",e.jsx("span",{children:t==null?void 0:t.company})]})})]}),e.jsxs("div",{className:"row section-label mt-2",children:[e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Instalacion: ",e.jsx("span",{children:t==null?void 0:t.location})]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Area: ",e.jsx("span",{children:t==null?void 0:t.area})]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Equipos a intervenir: ",e.jsx("span",{children:t==null?void 0:t.equipment})]})})]}),e.jsx("div",{className:"row section-label mt-2",children:e.jsxs("p",{className:"",children:["Alcance del trabajo: ",e.jsx("span",{children:t==null?void 0:t.alcance})]})}),e.jsxs("div",{className:"row section-label mt-2",children:[e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Nivel potencial de peligro identificado:"," ",e.jsx("span",{children:t==null?void 0:t.warning})]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Equipos y herramientas a usar: ",e.jsx("span",{children:t==null?void 0:t.tools})]})})]})]}),pn=({section2:t})=>e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"section-subtitle",children:"ANALISIS DE RIESGOS REQUERIDOS"}),e.jsxs("div",{className:"row section-label mb-2",children:[e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Análisis de seguridad en el trabajo - AST:"," ",e.jsxs("span",{className:"",children:[t!=null&&t.check1?"si":""," ",t==null?void 0:t.astNumber]})]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Análisis de peligro en la etapa de Planificación - APP:"," ",e.jsx("span",{className:"",children:t==null?void 0:t.apep})]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{className:"",children:["Otro: ",t!=null&&t.check2?"si":"N/A",e.jsxs("span",{className:"ps-2",children:["Cual? : ",t==null?void 0:t.oAnalysisDescription]})]})})]}),e.jsx("div",{className:"section-subtitle",children:"CERTIFICADOS DE APOYO REQUERIDOS"}),e.jsxs("div",{className:"row section-label mt-2",children:[e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Certificado de apoyo Trabajo en Caliente: ",e.jsx("span",{}),e.jsx("span",{})]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Certificado de apoyo de Raciaciones: ",e.jsx("span",{}),e.jsx("span",{})]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Certificado de apoyo de Excavación: ",e.jsx("span",{}),e.jsx("span",{})]})})]}),e.jsxs("div",{className:"row section-label mt-2",children:[e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Certificado de apoyo Trabajo Trabajo en Altura: ",e.jsx("span",{}),e.jsx("span",{})]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Certificado de apoyo Izaje de Carga: ",e.jsx("span",{}),e.jsx("span",{})]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Certificado de apoyo Espacios Confinados: ",e.jsx("span",{}),e.jsx("span",{})]})})]}),e.jsx("div",{className:"row section-label mt-2",children:e.jsxs("p",{children:["Otro? : ",e.jsx("span",{className:"",children:"Cual? :"})]})})]}),fn=()=>{const t="https://myprop.joselimardo.com",s=P(v=>v.permits.permit),{token:n}=le(),m=c.useRef(null),[u,{isSuccess:l,error:a,reset:r}]=J(),j=async(v,h)=>{const b=await dt("upload",n,v);if(console.log("File name:",`${t}/${b.data.url}`),b.status===200){const x=`${t}/${b.data.url}`;y(x)}else console.log("ERROR PDF >>>",b)},y=async v=>{if(console.log("CREATE EVIDENCE:",v),!(s!=null&&s.more.file)){const h=await ot("create-evidence",n,{file:v});if(h.status===201){console.log("RESPONSE:",h);const b={...s,more:{...s.more,evidence:h.data.file,pdf:v}};u({id:s._id,data:b})}}},o=()=>{var h;const v=(h=s==null?void 0:s.more)==null?void 0:h.evidence;v&&window.open(v,"_blank")},S=()=>{var h;const v=(h=s==null?void 0:s.more)==null?void 0:h.pdf;console.log("URL:",v),v&&window.open(v,"_blank")};c.useEffect(()=>{var v;(v=s==null?void 0:s.more)!=null&&v.evidence||A()},[]);const A=()=>{Ws(m.current).then(v=>{const h=`permiso${s.formNumber}.pdf`,b=v.toDataURL("image/png",.8),x=new Ks,i=210,f=v.height*i/v.width;x.addImage(b,"PNG",0,5,i,f);const d=x.output("blob"),g=new FormData;console.log("Form Data:",g),g.append("pdf",d,h),x.save(h),j(g)})};return e.jsxs("div",{children:[e.jsxs("div",{ref:m,style:cn,children:[e.jsxs("div",{style:dn,children:[e.jsx("div",{style:un,children:"NORMA CONTROL DE TRABAJO"}),e.jsxs("div",{style:xn,children:[e.jsx("div",{style:mn,children:"PERMISO DE TRABAJO GENERAL"}),e.jsx("div",{style:hn,children:s==null?void 0:s.formNumber})]})]}),e.jsxs("div",{style:qe,children:[e.jsx("div",{style:$e,children:"SECCION 1"}),e.jsx(jn,{section1:s==null?void 0:s.section1})]}),e.jsxs("div",{style:qe,children:[e.jsx("div",{style:$e,children:"SECCION 2"}),e.jsx(pn,{section2:s==null?void 0:s.section2})]})]}),e.jsx("div",{className:"",children:e.jsx(te,{title:"Ver PDF",children:e.jsx(Pe,{onClick:S,icon:e.jsx(Xs,{style:{color:"red"}}),style:{right:94},children:"Descargar PDF"})})}),e.jsx("div",{className:"",children:e.jsx(te,{title:"Ver Evidencia",children:e.jsx(Pe,{onClick:o,icon:e.jsx(Zs,{style:{color:"green"}}),style:{right:24},children:"Ver Evidencia"})})})]})};function gn(){const{isLoggedIn:t,logout:s}=le(),[n,m]=c.useState(!1);c.useEffect(()=>{localStorage.setItem("lastActivity",Date.now().toString());const r=2*60*60*1e3,j=setTimeout(()=>{m(!0),s()},r),y=()=>{localStorage.setItem("lastActivity",Date.now().toString()),clearTimeout(j),setTimeout(()=>{m(!0),s()},r)};return document.addEventListener("mousemove",y),document.addEventListener("keydown",y),()=>{document.removeEventListener("mousemove",y),document.removeEventListener("keydown",y),clearTimeout(j)}},[]),c.useEffect(()=>{n===!0&&ga({title:"Sesión expirada",content:"Su sesión ha expirado. Por favor, vuelva a iniciar sesión."})},[n]);const u=Oe(Re(e.jsx(H,{element:e.jsx(an,{}),children:e.jsxs(H,{element:e.jsx(pa,{}),errorElement:e.jsx(Wt,{}),children:[e.jsx(H,{path:"/",element:e.jsx(Jt,{})}),e.jsx(H,{path:"/settings",element:e.jsx(Ea,{})}),e.jsx(H,{path:"/assets-settings",element:e.jsx(tn,{})}),e.jsx(H,{path:"/reports",element:e.jsx(Ia,{})}),e.jsx(H,{path:"/form/:id",element:e.jsx(Ga,{})}),e.jsx(H,{path:"/hot-work",element:e.jsx(nn,{})}),e.jsx(H,{path:"/add-user",element:e.jsx(ns,{})}),e.jsx(H,{path:"/permissions",element:e.jsx(on,{})}),e.jsx(H,{path:"/preview/:id",element:e.jsx(fn,{})}),e.jsx(H,{path:"*",element:e.jsx(Te,{})})]})}))),l=Oe(Re(e.jsxs(H,{children:[e.jsx(H,{path:"/",element:e.jsx(Wa,{})}),e.jsx(H,{path:"*",element:e.jsx(Te,{})})]}))),a=t?u:l;return e.jsx(e.Fragment,{children:e.jsx(et,{router:a})})}ue.defaults.baseURL="https://myprop.joselimardo.com/api";console.log("API SERVER: ",ue.defaults.baseURL);st.createRoot(document.getElementById("root")).render(e.jsx(tt.StrictMode,{children:e.jsx(at,{store:ye,children:e.jsx(Bt,{children:e.jsx(gn,{})})})}));
