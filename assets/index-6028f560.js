import{a as L,u as H,b as q,c as b,r as U,j as e,N as A,C as F,O as I,d as j,L as u,e as d,T as J,I as K,A as T,M as W,f,D as Y,g as y,h as Q,i as X,k as Z,l as ee,R as c,B as se,m as ne,n as l,o as te,p as re,t as ae,q as oe,P as le}from"./vendor-5dc834d7.js";(function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const o of document.querySelectorAll('link[rel="modulepreload"]'))t(o);new MutationObserver(o=>{for(const a of o)if(a.type==="childList")for(const x of a.addedNodes)x.tagName==="LINK"&&x.rel==="modulepreload"&&t(x)}).observe(document,{childList:!0,subtree:!0});function r(o){const a={};return o.integrity&&(a.integrity=o.integrity),o.referrerPolicy&&(a.referrerPolicy=o.referrerPolicy),o.crossOrigin==="use-credentials"?a.credentials="include":o.crossOrigin==="anonymous"?a.credentials="omit":a.credentials="same-origin",a}function t(o){if(o.ep)return;o.ep=!0;const a=r(o);fetch(o.href,a)}})();const ie="modulepreload",ce=function(s){return"/"+s},v={},h=function(n,r,t){if(!r||r.length===0)return n();const o=document.getElementsByTagName("link");return Promise.all(r.map(a=>{if(a=ce(a),a in v)return;v[a]=!0;const x=a.endsWith(".css"),S=x?'[rel="stylesheet"]':"";if(!!t)for(let m=o.length-1;m>=0;m--){const E=o[m];if(E.href===a&&(!x||E.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${a}"]${S}`))return;const p=document.createElement("link");if(p.rel=x?"stylesheet":ie,x||(p.as="script",p.crossOrigin=""),p.href=a,document.head.appendChild(p),x)return new Promise((m,E)=>{p.addEventListener("load",m),p.addEventListener("error",()=>E(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>n())},de="/assets/Logo1-9d7283fd.png",ue="CREATE_PROFILE",k="REGISTER_SUCCESS",he="REGISTER_FAIL",G="LOGIN_SUCCESS",me="LOGIN_FAIL",D="LOGOUT_SUCCESS",xe="LOGOUT_FAIL",pe="GET_ALL_USERS",_e="GET_ALL_USERS_FAIL",Ee="GET_USER",je="GET_USER_FAIL",fe="CREATE_PROFILE",Se="CREATE_PROFILE_FAIL",ge="UPDATE_PROFILE",Le="UPDATE_PROFILE_FAIL",Ae="CREATE_COMPENSATION",ye="CREATE_COMPENSATION_FAIL",Ie="GET_COMPENSATION",Te="GET_COMPENSATION_FAIL",Ce="GET_ALL_COMPENSATION",Ne="GET_ALL_COMPENSATION_FAIL",ve="CREATE_ASSET",Re="CREATE_ASSET_FAIL",Oe="GET_ASSET",Pe="GET_ASSET_FAIL",be="GET_ALL_ASSET",Ue="GET_ALL_ASSET_FAIL",Fe="UPDATE_ASSET",ke="UPDATE_ASSET_FAIL";function Ls(s){return console.log("axios.defaults.baseURL",L.defaults.baseURL),console.log("Create en actions",s),async n=>{try{let r=await L.post("/users",s);const t=r.data;return console.log("Response",t),n({type:k,payload:r})}catch(r){return console.log("ERROR: ",r.response.data),n({type:he,payload:r.response.data})}}}function As(s){return console.log("axios.defaults.baseURL",L.defaults.baseURL),async n=>{try{const t=(await L.post("/userlogin",s)).data;return t.data.token&&(localStorage.setItem("user",JSON.stringify(t.data)),localStorage.setItem("profile",JSON.stringify(t.data.user))),n({type:G,payload:t})}catch(r){return console.log(r),n({type:me,payload:r.response.data})}}}function Ge(s){return async n=>{try{return localStorage.removeItem("user"),n({type:D,payload:[]})}catch(r){return console.log(r),n({type:xe,payload:r})}}}function De(){var N;const s=H(),n=q(),r=b(g=>g.auth),t=(N=JSON.parse(localStorage.getItem("user")))==null?void 0:N.user;let o;r.avatar!==""&&(o=r.avatar);const[a,x]=U.useState(null),S=!!a,C=g=>{x(g.currentTarget)},p=()=>{x(null)},m=r.isLoggedIn,E=t==null?void 0:t.role,_="lg",w=()=>{s(Ge()).then(g=>{console.log("Respuesta del logout: ",g),n("/")})},z=()=>{n("/login")},M=()=>{n("/register")},V=()=>{n("/user-dashboard")},B=()=>{n("/")},$=()=>{n("/profile")};return e.jsx(e.Fragment,{children:e.jsx(A,{expand:_,className:"mb-3",bg:"dark",variant:"dark",children:e.jsxs(F,{fluid:!0,children:[e.jsx(A.Brand,{href:"/",children:e.jsx("img",{src:de,alt:"MyPropChain",width:"30",height:"30",className:"d-inline-block align-top"})}),e.jsx(A.Toggle,{"aria-controls":`offcanvasNavbar-expand-${_}`}),e.jsxs(A.Offcanvas,{id:`offcanvasNavbar-expand-${_}`,"aria-labelledby":`offcanvasNavbarLabel-expand-${_}`,placement:"end",children:[e.jsx(I.Header,{closeButton:!0,children:e.jsx(I.Title,{id:`offcanvasNavbarLabel-expand-${_}`,children:"MyPropChain"})}),e.jsxs(I.Body,{children:[e.jsxs(j,{className:"justify-content-start flex-grow-1 pe-3",children:[e.jsx(j.Link,{as:u,to:"/",children:"Home"}),e.jsx(j.Link,{as:u,to:"/about",children:"About us"}),e.jsx(j.Link,{as:u,to:"/news",children:"News"}),e.jsx(j.Link,{as:u,to:"/register",children:"Register"}),m?e.jsxs(d,{title:"My Account",id:`offcanvasNavbarDropdown-expand-${_}`,children:[e.jsx(d.Item,{as:u,to:"/user-dashboard",children:"Dashboard"}),e.jsx(d.Item,{as:u,to:"/user-dashboard",children:"Assets"}),e.jsx(d.Divider,{}),e.jsx(d.Item,{as:u,to:"/profile",children:"Profile"}),m&&E==="admin"?e.jsx(d.Divider,{}):null,m&&E==="admin"?e.jsx(d.Item,{as:u,to:"/admin-dashboard",children:"Admin panel"}):null]}):null,m?e.jsxs(d,{title:"Assets",id:`offcanvasNavbarDropdown-expand-${_}`,children:[e.jsx(d.Item,{as:u,to:"/assets",children:"Create Assets"}),e.jsx(d.Item,{as:u,to:"/assets",children:"Consult Assets"})]}):null,m?e.jsxs(d,{title:"Compensations",id:`offcanvasNavbarDropdown-expand-${_}`,children:[e.jsx(d.Item,{as:u,to:"/compensations",children:"Create Compensations"}),e.jsx(d.Item,{as:u,to:"/consult-compensations",children:"Consult Compenstions"})]}):null,m?e.jsxs(d,{title:"Managment",id:`offcanvasNavbarDropdown-expand-${_}`,children:[e.jsx(d.Item,{as:u,to:"gei-control",children:"Gestión de emisiones GEI"}),e.jsx(d.Item,{as:u,to:"/",children:"Modulo OKR"})]}):null]}),e.jsxs(j,{children:[e.jsx(J,{title:"Account settings",children:e.jsx(K,{onClick:C,size:"small",sx:{ml:2},"aria-controls":S?"account-menu":void 0,"aria-haspopup":"true","aria-expanded":S?"true":void 0,children:e.jsx(T,{sx:{width:32,height:32},children:o})})}),e.jsxs(W,{anchorEl:a,id:"account-menu",open:S,onClose:p,onClick:p,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[m?e.jsxs(f,{onClick:$,children:[e.jsx(T,{})," Profile"]}):null,e.jsxs(f,{onClick:V,children:[e.jsx(T,{})," My account"]}),e.jsx(Y,{}),e.jsxs(f,{onClick:M,children:[e.jsx(y,{children:e.jsx(Q,{fontSize:"small"})}),"Add another account"]}),e.jsxs(f,{onClick:B,children:[e.jsx(y,{children:e.jsx(X,{fontSize:"small"})}),"Settings"]}),m?e.jsxs(f,{onClick:w,children:[e.jsx(y,{children:e.jsx(Z,{fontSize:"small"})}),"Logout"]}):e.jsxs(f,{onClick:z,children:[e.jsx(y,{children:e.jsx(ee,{fontSize:"small"})}),"Login"]})]})]})]})]})]})},_)})}function we(){return e.jsx(e.Fragment,{children:e.jsx(De,{})})}const ze="/assets/LogoPart2-62813117.png";function Me(){return e.jsx(e.Fragment,{children:e.jsx(F,{fluid:!0,children:e.jsx("footer",{className:"py-5",children:e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-12 col-md",children:e.jsxs("div",{className:"d-flex flex-column",children:[e.jsx("a",{href:"/",className:"",children:e.jsx("img",{src:ze,alt:"",className:"",style:{width:30}})}),e.jsx("small",{className:"d-block mb-3 text-body-secondary",children:"© 2022–2023"})]})}),e.jsxs("div",{className:"col-6 col-md",children:[e.jsx("h5",{children:"Features"}),e.jsxs("ul",{className:"list-unstyled text-small",children:[e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"#",children:"Cool stuff"})}),e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"#",children:"Random feature"})}),e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"#",children:"Team feature"})}),e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"#",children:"Stuff for developers"})})]})]}),e.jsxs("div",{className:"col-6 col-md",children:[e.jsx("h5",{children:"Resources"}),e.jsxs("ul",{className:"list-unstyled text-small",children:[e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"#",children:"Proffesionals"})}),e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"#",children:"Handymans"})}),e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"#",children:"Another resource"})})]})]}),e.jsxs("div",{className:"col-6 col-md",children:[e.jsx("h5",{children:"Account"}),e.jsxs("ul",{className:"list-unstyled text-small",children:[e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"#",children:"My Accout"})}),e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"/register",children:"Create Account"})}),e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"/login",children:"Login"})})]})]}),e.jsxs("div",{className:"col-6 col-md",children:[e.jsx("h5",{children:"About"}),e.jsxs("ul",{className:"list-unstyled text-small",children:[e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"/about",children:"Team"})}),e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"/about",children:"Locations"})}),e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"#",children:"Privacy"})}),e.jsx("li",{children:e.jsx("a",{className:"link-secondary",href:"#",children:"Terms"})})]})]})]})})})})}const Ve="/assets/Vector-70c97ec3.svg";function Be({children:s}){const n={backgroundImage:`url(${Ve})`,backgroundSize:"contain",backgroundRepeat:"no-repeat",backgroundPosition:"center",minHeight:"100vh",minWidth:"95%",overflow:"hidden",margin:"0"};return e.jsxs(e.Fragment,{children:[e.jsx(we,{}),e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx("div",{style:n,children:s})}),e.jsx(Me,{})]})}function $e(){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center pt-5",children:[e.jsx("h1",{children:"404"}),e.jsx("h3",{children:"Oops! La página a la que intenta ingresar"}),e.jsx("h3",{children:"No existe o no tiene permiso de acceso."}),e.jsx("p",{children:"Aqui hay unos links que puede ayudarlo:"}),e.jsx(u,{to:"/",children:"Home"}),e.jsx(u,{to:"/contact",children:"Contact"})]})})}class He extends c.Component{constructor(n){super(n),this.state={tieneError:!1,mensajeError:""}}static getDerivedStateFromError(n){return{tieneError:!0,mensajeError:n.message}}componentDidCatch(n){console.log("Component did catch:",n.message)}render(){return this.state.tieneError?e.jsxs("div",{className:"px-4 py-2 m-4",children:[e.jsx("h1",{className:"mt-2 font-bold text-lg mb-1",children:"Hubo un error:"}),e.jsxs("p",{children:[" ",this.state.mensajeError," "]}),e.jsxs("button",{className:"px-4 py-2 rounded bg-blue-800 hover:bg-blue-700 active:outline text-sm",onClick:()=>window.location.href="/",children:["Recargar la página"," "]})]}):this.props.children}}const qe=c.lazy(()=>h(()=>import("./Home-7e6bd413.js"),["assets/Home-7e6bd413.js","assets/vendor-5dc834d7.js","assets/Home-07c959c0.css"])),Je=c.lazy(()=>h(()=>import("./Landing-09794e0b.js"),["assets/Landing-09794e0b.js","assets/vendor-5dc834d7.js"])),R=c.lazy(()=>h(()=>import("./Login-a8de6217.js"),["assets/Login-a8de6217.js","assets/vendor-5dc834d7.js","assets/LogoHorizontal-222b80f9.js","assets/sweetalert2.all-a46bd305.js"])),Ke=c.lazy(()=>h(()=>import("./Register-676b606e.js"),["assets/Register-676b606e.js","assets/vendor-5dc834d7.js","assets/LogoHorizontal-222b80f9.js","assets/sweetalert2.all-a46bd305.js","assets/FormHelper-26c37e11.js","assets/index.esm-d4c6dd44.js"])),We=c.lazy(()=>h(()=>import("./Profile-0eb2a36a.js"),["assets/Profile-0eb2a36a.js","assets/vendor-5dc834d7.js","assets/FormikDynamic-bda5871c.js","assets/users-e9791cf1.js","assets/compensation-4bc350ee.js","assets/sweetalert2.all-a46bd305.js","assets/index.esm-d4c6dd44.js"])),Ye=c.lazy(()=>h(()=>import("./About-13658041.js"),["assets/About-13658041.js","assets/vendor-5dc834d7.js"])),Qe=c.lazy(()=>h(()=>import("./Logout-4003587b.js"),["assets/Logout-4003587b.js","assets/vendor-5dc834d7.js"])),Xe=c.lazy(()=>h(()=>import("./Contact-7d9e4846.js"),["assets/Contact-7d9e4846.js","assets/vendor-5dc834d7.js"])),Ze=c.lazy(()=>h(()=>import("./News-4dacf228.js"),["assets/News-4dacf228.js","assets/vendor-5dc834d7.js"])),es=c.lazy(()=>h(()=>import("./Assets-367fd46d.js"),["assets/Assets-367fd46d.js","assets/vendor-5dc834d7.js","assets/FormikDynamic-bda5871c.js","assets/users-e9791cf1.js","assets/compensation-4bc350ee.js","assets/sweetalert2.all-a46bd305.js","assets/index.esm-d4c6dd44.js"])),ss=c.lazy(()=>h(()=>import("./Compensations-71c538c5.js"),["assets/Compensations-71c538c5.js","assets/vendor-5dc834d7.js","assets/sweetalert2.all-a46bd305.js","assets/FormikDynamic-bda5871c.js","assets/users-e9791cf1.js","assets/compensation-4bc350ee.js","assets/index.esm-d4c6dd44.js","assets/FormHelper-26c37e11.js"])),ns=c.lazy(()=>h(()=>import("./ConsultCompensations-fba7a50c.js"),["assets/ConsultCompensations-fba7a50c.js","assets/vendor-5dc834d7.js","assets/Table-6ae4dfb7.js","assets/compensation-4bc350ee.js"])),ts=c.lazy(()=>h(()=>import("./GeiControl-fe29f647.js"),["assets/GeiControl-fe29f647.js","assets/vendor-5dc834d7.js"])),rs=c.lazy(()=>h(()=>import("./index-c0f4dd92.js"),["assets/index-c0f4dd92.js","assets/vendor-5dc834d7.js","assets/users-e9791cf1.js","assets/Table-6ae4dfb7.js"])),as=c.lazy(()=>h(()=>import("./index-eb3cf9c6.js"),["assets/index-eb3cf9c6.js","assets/vendor-5dc834d7.js"]));function os(){var r;const s=b(t=>t.auth.isLoggedIn),n=(r=JSON.parse(localStorage.getItem("user")))==null?void 0:r.user;return console.log("<<<<LOGGED desde APP>>>>",s),e.jsx("div",{className:"App",children:e.jsx(U.Suspense,{fallback:e.jsx("div",{children:"Loading..."}),children:e.jsx(se,{children:e.jsx(He,{children:e.jsx(Be,{children:e.jsxs(ne,{children:[e.jsx(l,{path:"*",element:e.jsx($e,{})}),e.jsx(l,{path:"/login",element:e.jsx(R,{})}),e.jsx(l,{path:"/register",element:e.jsx(Ke,{})}),e.jsx(l,{path:"/home",element:e.jsx(qe,{})}),e.jsx(l,{path:"/",element:e.jsx(R,{})}),e.jsx(l,{path:"/about",element:e.jsx(Ye,{})}),e.jsx(l,{path:"/news",element:e.jsx(Ze,{})}),e.jsx(l,{path:"/contact",elemamt:e.jsx(Xe,{})}),e.jsx(l,{path:"/logout",element:e.jsx(Qe,{})}),n!==void 0?[e.jsx(l,{path:"/landing",element:e.jsx(Je,{})}),e.jsx(l,{path:"/profile",element:e.jsx(We,{})}),e.jsx(l,{path:"/assets",element:e.jsx(es,{})}),e.jsx(l,{path:"/compensations",element:e.jsx(ss,{})}),e.jsx(l,{path:"/consult-compensations",element:e.jsx(ns,{})}),e.jsx(l,{path:"/gei-control",element:e.jsx(ts,{})}),e.jsx(l,{path:"/user-dashboard",element:e.jsx(as,{})})]:null,(n==null?void 0:n.role)==="admin"?e.jsx(l,{path:"/admin-dashboard",element:e.jsx(rs,{})}):null]})})})})})})}const i=JSON.parse(localStorage.getItem("user"));var O,P;const ls=i?{isLoggedIn:!0,user:i,avatar:(P=i==null?void 0:i.user)==null?void 0:P.name.charAt(0).toUpperCase().concat((O=i==null?void 0:i.user)==null?void 0:O.lastname.charAt(0).toUpperCase())}:{isLoggedIn:!1,user:null,avatar:""};function is(s=ls,n){var o,a;const{type:r,payload:t}=n;switch(n.type){case k:return{...s,isLoggedIn:!1,user:t.data.data,avatar:""};case G:return console.log("<<<<REDUCER LOGIN_SUCCESS>>>>",i==null?void 0:i.user),{...s,isLoggedIn:!0,user:t,avatar:(a=i==null?void 0:i.user)==null?void 0:a.name.charAt(0).toUpperCase().concat((o=i==null?void 0:i.user)==null?void 0:o.lastname.charAt(0).toUpperCase())};case ue:return{...s,user:t};case D:return{...s,isLoggedIn:!1,user:null,avatar:""};default:return s}}const cs={userProfile:[],users:[],isLoading:!0};function ds(s=cs,n){const{type:r,payload:t}=n;switch(n.type){case fe:return{...s,userProfile:t.data.data};case Se:return{...s,userProfile:t};case ge:return console.log("Update profile success",t),{...s,userProfile:t};case Le:return{...s,userProfile:t};case pe:return{...s,isLoading:!1,users:t};case _e:return{...s,users:t};default:return s}}const us={user:[],isLoading:!0};function hs(s=us,n){const{type:r,payload:t}=n;switch(n.type){case Ee:return{...s,isLoading:!1,user:t};case je:return{...s,user:t};default:return s}}const ms={compensation:[]};function xs(s=ms,n){const{type:r,payload:t}=n;switch(n.type){case Ie:return{...s,isLoading:!1,compensation:t};case Te:return{...s,compensation:t};case Ce:return{...s,isLoading:!1,compensation:t};case Ne:return{...s,compensation:t};case Ae:return{...s,isLoading:!1,compensation:t};case ye:return{...s,compensation:t};default:return s}}const ps={assets:[]};function _s(s=ps,n){const{type:r,payload:t}=n;switch(r){case be:return{...s,assets:t};case Ue:return{...s,assets:[]};case Oe:return{...s,assets:t};case Pe:return{...s,assets:[]};case ve:return{...s,assets:t};case Re:return{...s,assets:[]};case Fe:return{...s,assets:t};case ke:return{...s,assets:[]};default:return s}}const Es=te({name:"userSlice",initialState:{users:[],user:[],isLoading:!1},reducers:{startLoading:s=>{s.isLoading=!0},setUsers:(s,n)=>{s.isLoading=!1,s.users=n.payload}}}),js=re({reducer:{auth:is,users:ds,user:hs,compensation:xs,assets:_s,userSlice:Es.reducer},middleware:s=>s().concat(ae)});const fs="https://myprop.joselimardo.com";L.defaults.baseURL=fs;const Ss=oe.createRoot(document.getElementById("root"));Ss.render(e.jsx(le,{store:js,children:e.jsx(c.StrictMode,{children:e.jsx(os,{})})}));export{ve as C,Ce as G,ge as U,Re as a,Te as b,Ls as c,Ae as d,ye as e,pe as f,_e as g,Le as h,ze as l,As as u};
