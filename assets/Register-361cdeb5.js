import{u as w,r,b as S,d as C,j as e,S as h}from"./vendor-c93ea81a.js";import{i as F,c as k}from"./index-34a725cc.js";import{i as B,v as R}from"./FormHelper-a63c7a15.js";function _(){const u=w(),[l,o]=r.useState(!1),x=S(),[j,b]=r.useState({name:"",lastname:"",email:"",password:"",role:"user",isActive:!0,privateKey:"",publicKey:""}),[n,g]=r.useState(""),[t,v]=r.useState(""),y="https://api.stamping.io/util/keys/create/?pwd=&token=8a9e26ffb25c2e3c4d69ec1b818eacb948bf7879e7358bdc5ebe08351fd4a5bd";r.useEffect(()=>{fetch(y).then(a=>a.json()).then(a=>{console.log(a),g(a.RSA.publicKey),v(a.RSA.privateKey)})},[]),console.log("CLAVES:",n,t);const s=C({initialValues:B,validationSchema:R,onSubmit:({name:a,lastname:c,email:d,password:p},{resetForm:f,setSubmitting:N})=>{b({name:a,lastname:c,email:d,password:p,role:"user",isActive:!0,privateKey:t,publicKey:n}),console.log("values",j),u(k({name:a,lastname:c,email:d,password:p,role:"user",isActive:!0,privateKey:t,publicKey:n})).then(m=>{console.log("values",m.payload);const i=m.payload;i.status===201?h.fire(i.data.message).then(()=>{x("/login"),N(!1),f()}):h.fire(i.message).then(()=>{})})}});return e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsx("div",{className:"",children:e.jsx("div",{className:"grid alignItem",children:e.jsxs("div",{className:"register",style:{marginTop:30,marginBottom:30},children:[e.jsx("img",{src:F,className:"siteLogo",width:"306",height:"84",alt:"siteLogo"}),e.jsx("p",{children:"Regístrate gratis para empezar"}),e.jsxs("form",{className:"form",onSubmit:s.handleSubmit,children:[e.jsx("label",{htmlFor:"name",children:"Nombre"}),e.jsx("div",{className:"formField",children:e.jsx("input",{type:"text",name:"name",placeholder:"Nombre",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.name})}),s.touched.name&&s.errors.name?e.jsx("span",{style:{color:"red",display:"block"},children:s.errors.name}):null,e.jsx("label",{htmlFor:"lastname",children:"Apellido"}),e.jsx("div",{className:"formField",children:e.jsx("input",{type:"text",name:"lastname",placeholder:"Lastname",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.lastname})}),s.touched.lastname&&s.errors.lastname?e.jsx("span",{style:{color:"red",display:"block"},children:s.errors.lastname}):null,e.jsx("label",{htmlFor:"email",children:"Correo electrónico"}),e.jsx("div",{className:"formField",children:e.jsx("input",{type:"email",name:"email",placeholder:"Correo electrónico",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.email})}),s.touched.email&&s.errors.email?e.jsx("span",{style:{color:"red",display:"block"},children:s.errors.email}):null,e.jsx("label",{htmlFor:"password",children:"Contraseña"}),e.jsx("div",{className:"formField",children:e.jsxs("div",{className:"inputWrapper",children:[e.jsx("input",{className:"inputRegister password",type:l?"text":"password",name:"password",placeholder:"Contraseña",onChange:s.handleChange,onBlur:s.handleBlur,value:s.values.password}),e.jsx("span",{className:"inputIcon password",onClick:()=>o(!l),children:l?e.jsx("i",{className:"bi bi-eye",style:{fontSize:"1.5rem"}}):e.jsx("i",{className:"bi bi-eye-slash ",style:{fontSize:"1.5rem"}})})]})}),s.touched.password&&s.errors.password?e.jsx("span",{style:{color:"red",display:"block"},children:s.errors.password}):null,e.jsx("label",{htmlFor:"password_repeat",children:"Repite tu contraseña"}),e.jsx("div",{className:"formField",children:e.jsxs("div",{className:"inputWrapper",children:[e.jsx("input",{type:l?"text":"password",name:"password_repeat",placeholder:"Repite tu contraseña",value:s.values.password_repeat,onChange:s.handleChange,onBlur:s.handleBlur,className:"inputRegister password"}),e.jsx("span",{className:"inputIcon password",onClick:()=>o(!l),children:l?e.jsx("i",{className:"bi bi-eye",style:{fontSize:"1.5rem"}}):e.jsx("i",{className:"bi bi-eye-slash",style:{fontSize:"1.5rem"}})})]})}),s.touched.password_repeat&&s.errors.password_repeat?e.jsx("span",{style:{color:"red",display:"block"},children:s.errors.password_repeat}):null,e.jsx("div",{className:"formField",children:e.jsx("input",{type:"submit",value:"ENVIAR",className:"btn btn-success btnLanding"})})]}),e.jsxs("p",{children:["¿Ya tienes una cuenta? ",e.jsx("a",{href:"/login",children:"Inicia sesión"})]})]})})})})})}export{_ as default};
