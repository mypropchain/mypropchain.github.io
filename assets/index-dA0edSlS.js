import{j as e,L as Ue,c as os,r as cs,f as ds,a as ye,b as qe,d as $e,e as re,g as ue,h as me,i as c,u as ie,k as O,M as ae,B as us,C as ms,X as hs,Y as xs,T as js,l as ps,m as fs,n as Ce,S as Ie,o as He,E as gs,p as Ns,q as vs,F as ys,s as Ss,t as bs,H as As,v as Cs,w as Z,x as P,y as ks,z as ws,A as Es,D as de,I as Is,G as Pe,U as Ps,J as Fs,O as Ye,K as x,N as T,P as Os,Q as ee,R as Ts,V as X,W as q,Z as Rs,_ as Ms,$ as Ls,a0 as Ds,a1 as Us,a2 as qs,a3 as he,a4 as xe,a5 as je,a6 as te,a7 as Y,a8 as U,a9 as D,aa as $s,ab as Hs,ac as Ys,ad as zs,ae as Vs,af as ce,ag as _s,ah as Bs,ai as Gs,aj as Fe,ak as Oe,al as Qs,am as H,an as Js,ao as Ks,ap as Ws}from"./vendor-bPEy7vjW.js";(function(){const s=document.createElement("link").relList;if(s&&s.supports&&s.supports("modulepreload"))return;for(const d of document.querySelectorAll('link[rel="modulepreload"]'))m(d);new MutationObserver(d=>{for(const l of d)if(l.type==="childList")for(const a of l.addedNodes)a.tagName==="LINK"&&a.rel==="modulepreload"&&m(a)}).observe(document,{childList:!0,subtree:!0});function n(d){const l={};return d.integrity&&(l.integrity=d.integrity),d.referrerPolicy&&(l.referrerPolicy=d.referrerPolicy),d.crossOrigin==="use-credentials"?l.credentials="include":d.crossOrigin==="anonymous"?l.credentials="omit":l.credentials="same-origin",l}function m(d){if(d.ep)return;d.ep=!0;const l=n(d);fetch(d.href,l)}})();const Te=()=>e.jsx(e.Fragment,{children:e.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center",children:[e.jsx("h1",{children:"404"}),e.jsx("p",{children:"Page not found"}),e.jsx("br",{className:""}),e.jsx("p",{children:"Something is wrong, the page you trying to acces do not exist"}),e.jsx("p",{children:"Or you have not enought rights"}),e.jsx("br",{className:""}),e.jsx(Ue,{to:"/",children:"Go to Home"})]})}),Xs="https://myprop.joselimardo.com/api",Q=os({baseQuery:cs(ds({baseUrl:Xs,prepareHeaders:(t,{getState:s})=>{const n=s().auth.token;if(n)return t.set("Authorization",`Bearer ${n}`),t.set("Content-Type","application/json"),t}})),keepUnusedDataFor:60,refetchOnMountOrArgChange:!0,refetchOnFocus:!0,refetchOnReconnect:!0,tagTypes:["Users","Tenants","Assets","Locations"],endpoints:t=>({})}),Zs=t=>ye.create({baseURL:"https://myprop.joselimardo.com/api",headers:{"Content-Type":"application/json",Authorization:`Bearer ${t}`}}),et=ye.create({baseURL:"https://myprop.joselimardo.com/api",headers:{"Content-Type":"application/json"}}),st=async(t,s,n)=>{try{return await Zs(s).post(`/${t}`,n)}catch(m){return m}},tt=async t=>{try{const s=await et.post("/auth/login",t);if(s.data.token){const n=qe(s.data.token),m={loading:!1,isLoggedIn:!0,token:s.data.token,active:n.user_active,deleted:n.user_is_deleted,error:null};sessionStorage.setItem("session",JSON.stringify(m,null,2))}return s.data}catch(s){throw s}};let J=JSON.parse(sessionStorage.getItem("session"));const Ne=$e("auth/loginUser",async(t,s)=>{try{return await tt(t)}catch(n){return s.rejectWithValue(n.response.data)}}),ze=$e("auth/logoutUser",async(t,s)=>{try{sessionStorage.removeItem("session")}catch(n){return s.rejectWithValue(n.response)}}),at={loading:J?J.loading:!1,isLoggedIn:J?J.isLoggedIn:!1,token:J?J.token:null,error:J?J.error:null},nt=re({name:"auth",initialState:at,extraReducers:t=>{t.addCase(Ne.pending,s=>{s.loading=!0,s.isLoggedIn=!1,s.token=null,s.error=null}).addCase(Ne.fulfilled,(s,n)=>{s.loading=!1,s.isLoggedIn=!0,s.token=n.payload.token,s.error=null}).addCase(Ne.rejected,(s,n)=>{s.loading=!1,s.isLoggedIn=!1,s.token=null,s.error=n.payload}).addCase(ze.fulfilled,s=>{s.loading=!1,s.isLoggedIn=!1,s.token=null,s.error=null})}}),lt=nt.reducer,rt=t=>t.auth.token,it=t=>t.auth.isLoggedIn,Ve=ue({}),ot=Ve.getInitialState(),_=Q.injectEndpoints({endpoints:t=>({getUsers:t.query({query:()=>"/users",providesTags:["Users"]}),getUser:t.query({query:s=>`/users/${s}`}),getMe:t.query({query:()=>"/users/me",extraOptions:{maxRetries:0}}),addNewUser:t.mutation({query:s=>({url:"/users",method:"POST",body:s}),invalidatesTags:["Users"],extraOptions:{maxRetries:0}}),updateUser:t.mutation({query:s=>({url:"/users",method:"PUT",body:{...s}}),invalidatesTags:["Users"]}),deleteUser:t.mutation({query:({id:s,email:n})=>({url:`/users/${s}/email/${n}`,method:"DELETE"}),invalidatesTags:["Users"]}),softDeleteUser:t.mutation({query:s=>({url:"/users/soft_delete/",method:"PUT",body:{...s}}),invalidatesTags:["Users"]}),changePassword:t.mutation({query:s=>({url:"/users/change_password/",method:"POST",body:{...s}}),invalidatesTags:["Users"]}),resetPassword:t.mutation({query:s=>({url:`/users/reset_password/${s}`,method:"POST"}),invalidatesTags:["Users"]})})}),{useGetUsersQuery:ct,useGetUserQuery:dt,useGetMeQuery:nn,useAddNewUserMutation:ut,useUpdateUserMutation:ln,useDeleteUserMutation:rn,useSoftDeleteUserMutation:on,useChangePasswordMutation:cn,useResetPasswordMutation:dn}=_,mt=_.endpoints.getUsers.select(),ht=me(mt,t=>t.data);Ve.getSelectors(t=>ht(t)??ot);const xt={users:[],user:null,loading:!1,error:null},_e=re({name:"users",initialState:xt,reducers:{setUser(t,s){t.user=s.payload},setUsers(t,s){t.users=s.payload}},extraReducers:t=>{t.addMatcher(_.endpoints.getUsers.matchFulfilled,(s,{payload:n})=>{s.users=n.users,s.loading=!1,s.error=null}),t.addMatcher(_.endpoints.getUsers.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(_.endpoints.getUsers.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n}),t.addMatcher(_.endpoints.getUser.matchFulfilled,(s,{payload:n})=>{s.user=n[0],s.loading=!1,s.error=null}),t.addMatcher(_.endpoints.getMe.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(_.endpoints.getMe.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n}),t.addMatcher(_.endpoints.getMe.matchFulfilled,(s,{payload:n})=>{s.user=n.user,s.loading=!1,s.error=null}),t.addMatcher(_.endpoints.getUser.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(_.endpoints.getUser.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n})}}),Re=_e.actions,jt=_e.reducer,Be=ue({}),pt=Be.getInitialState(),G=Q.injectEndpoints({endpoints:t=>({getLocations:t.query({query:()=>"/locations",providesTags:["Locations"]}),getLocation:t.query({query:s=>`/locations/${s}`}),addLocation:t.mutation({query:s=>({url:"/locations",method:"POST",body:s}),invalidatesTags:["Locations"],extraOptions:{maxRetries:0}})})}),{useGetLocationQuery:un,useGetLocationsQuery:ft,useAddLocationMutation:gt}=G,Nt=G.endpoints.getLocations.select(),vt=me(Nt,t=>t.data);Be.getSelectors(t=>vt(t)??pt);const yt={locations:[],location:null,loading:!1,error:null},Ge=re({name:"locations",initialState:yt,reducers:{setLocation(t,s){t.location=s.payload},setLocations(t,s){t.locations=s.payload.data}},extraReducers:t=>{t.addMatcher(G.endpoints.getLocations.matchFulfilled,(s,{payload:n})=>{s.locations=n.data,s.loading=!1,s.error=null}),t.addMatcher(G.endpoints.getLocations.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(G.endpoints.getLocations.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n}),t.addMatcher(G.endpoints.getLocation.matchFulfilled,(s,{payload:n})=>{s.location=n.data,s.loading=!1,s.error=null}),t.addMatcher(G.endpoints.getLocation.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(G.endpoints.getLocation.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n})}}),Me=Ge.actions,St=Ge.reducer,Qe=ue({}),bt=Qe.getInitialState(),K=Q.injectEndpoints({endpoints:t=>({getTenants:t.query({query:()=>"/tenants",providesTags:["Tenants"]}),getTenant:t.query({query:s=>`/tenants/${s}`}),addTenant:t.mutation({query:s=>({url:"/tenants",method:"POST",body:s}),invalidatesTags:["Tenants"],extraOptions:{maxRetries:0}})})}),{useGetTenantQuery:mn,useGetTenantsQuery:At,useAddTenantMutation:Ct}=K,kt=K.endpoints.getTenants.select(),wt=me(kt,t=>t.data);Qe.getSelectors(t=>wt(t)??bt);const Et={tenants:[],tenant:null,loading:!1,error:null},Je=re({name:"tenants",initialState:Et,reducers:{setTenant(t,s){t.tenant=s.payload},setTenants(t,s){t.tenants=s.payload.data}},extraReducers:t=>{t.addMatcher(K.endpoints.getTenants.matchFulfilled,(s,{payload:n})=>{s.tenants=n.data,s.loading=!1,s.error=null}),t.addMatcher(K.endpoints.getTenants.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(K.endpoints.getTenants.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n}),t.addMatcher(K.endpoints.getTenant.matchFulfilled,(s,{payload:n})=>{s.tenant=n.data,s.loading=!1,s.error=null}),t.addMatcher(K.endpoints.getTenant.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(K.endpoints.getTenant.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n})}}),Le=Je.actions,It=Je.reducer,Ke=ue({}),Pt=Ke.getInitialState(),W=Q.injectEndpoints({endpoints:t=>({getAssets:t.query({query:()=>"/assets",providesTags:["Assets"]}),getAsset:t.query({query:s=>`/assets/${s}`}),addAsset:t.mutation({query:s=>({url:"/assets",method:"POST",body:s}),invalidatesTags:["Assets"],extraOptions:{maxRetries:0}})})}),{useGetAssetQuery:hn,useGetAssetsQuery:Ft,useAddAssetMutation:Ot}=W,Tt=W.endpoints.getAssets.select(),Rt=me(Tt,t=>t.data);Ke.getSelectors(t=>Rt(t)??Pt);const Mt={assets:[],asset:null,loading:!1,error:null},We=re({name:"assets",initialState:Mt,reducers:{setAsset(t,s){t.asset=s.payload},setAssets(t,s){t.assets=s.payload.data}},extraReducers:t=>{t.addMatcher(W.endpoints.getAssets.matchFulfilled,(s,{payload:n})=>{s.assets=n.data,s.loading=!1,s.error=null}),t.addMatcher(W.endpoints.getAssets.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(W.endpoints.getAssets.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n}),t.addMatcher(W.endpoints.getAsset.matchFulfilled,(s,{payload:n})=>{s.asset=n.data,s.loading=!1,s.error=null}),t.addMatcher(W.endpoints.getAsset.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(W.endpoints.getAsset.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n})}}),De=We.actions,Lt=We.reducer,Xe=c.createContext(),Dt=({children:t})=>{const s=ie(),n=O(it),m=O(rt),[d,l]=c.useState(null),[a,r]=c.useState(!0),[h,v]=c.useState(null),[o,y]=c.useState(null),{data:k,error:C,isLoading:g,isSuccess:w}=dt(o,{skip:a});c.useEffect(()=>{if(m){const N=qe(m);v({role:N.role,email:N.email,tenantId:N.tenantId}),y(N.id),r(!1)}},[m]),c.useEffect(()=>{w&&(l(k),v({...h,name:k[0].name,lastName:k[0].lastname}))},[w,k]);const j=async N=>{await s(Ne(N)).then(f=>{var S;console.log("login",f),((S=f.error)==null?void 0:S.message)==="Rejected"&&ae.error({title:"Invalid login attempt",content:`${f.payload.message}`})})},i=()=>{r(!0),setSkipTenant(!0),s(De.setAssets([])),s(De.setAsset(null)),s(Me.setLocations([])),s(Me.setLocation(null)),s(Le.setTenants([])),s(Le.setTenant(null)),s(Re.setUsers([])),s(Re.setUser(null)),s(Q.util.resetApiState())},p=async()=>{await s(ze()).then(()=>{r(!0),i()})};if(g)return e.jsx("div",{children:"We are loading data, please wait..."});const u={isLoggedIn:n,token:m,login:j,logout:p,credentials:h};return e.jsx(Xe.Provider,{value:u,children:t})},ne=()=>c.useContext(Xe),Ut=[{name:"Enero",permisos:4e3,pv:2400,amt:2400},{name:"Febrero",permisos:3e3,pv:1398,amt:2210},{name:"Marzo",permisos:2e3,pv:9800,amt:2290},{name:"Abril",permisos:2780,pv:3908,amt:2e3},{name:"Mayo",permisos:1890,pv:4800,amt:2181},{name:"Junio",permisos:2390,pv:3800,amt:2500}];function Ze(){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"",children:[" ",e.jsx("h6",{className:"",children:"Cantidad de permisos por mes"}),e.jsxs(us,{width:500,height:300,data:Ut,margin:{top:5,right:30,left:20,bottom:5},children:[e.jsx(ms,{strokeDasharray:"3 3"}),e.jsx(hs,{dataKey:"name"}),e.jsx(xs,{}),e.jsx(js,{}),e.jsx(ps,{}),e.jsx(fs,{dataKey:"permisos",fill:"#82ca9d"})]})]})})}const es=()=>e.jsxs("div",{className:"row",children:[e.jsx("h6",{className:"mb-3",children:"Estadísticas en tiempo real"}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(Ce,{bordered:!0,style:{width:300},children:e.jsx(Ie,{title:"Completados",value:8e3,precision:0,valueStyle:{color:"#3f8600"},prefix:e.jsx(He,{}),suffix:""})})})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx(Ce,{bordered:!0,style:{width:300},children:e.jsx(Ie,{title:"En proceso",value:560,precision:0,valueStyle:{color:"#cf1322"},prefix:e.jsx(gs,{}),suffix:""})})})})]}),qt=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"",style:{marginTop:"20px"},children:[e.jsx("h3",{style:{color:"blue"},children:"Estadísticas"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col box1 me-1",children:e.jsx("div",{className:"d-flex justify-content-center mt-5",children:e.jsx(Ze,{})})}),e.jsx("div",{className:"col box1 ms-1",children:e.jsx("div",{className:"mt-5",children:e.jsx(es,{})})})]})]})})}),$t=()=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsxs("div",{className:"",style:{marginTop:"20px"},children:[e.jsx("h3",{style:{color:"blue"},children:"Estadísticas"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col box1 me-1",children:e.jsx("div",{className:"d-flex justify-content-center mt-5",children:e.jsx(Ze,{})})}),e.jsx("div",{className:"col box1 ms-1",children:e.jsx("div",{className:"mt-5",children:e.jsx(es,{})})})]})]})})}),Ht=()=>{const{credentials:t}=ne(),s=t==null?void 0:t.role;return e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsxs("div",{className:"",style:{marginTop:"20px"},children:[s==="root"&&e.jsx(qt,{}),s==="autoridadArea"&&e.jsx($t,{})]})})})};function Yt(){const t=Ns();return console.error(t),e.jsxs("div",{id:"error-page",children:[e.jsx("h1",{children:"Oops!"}),e.jsx("p",{children:"Sorry, an unexpected error has occurred."}),e.jsx("p",{children:e.jsx("i",{children:t.statusText||t.message})})]})}const zt=[{label:"Settings",key:"settings",icon:e.jsx(vs,{style:{fontSize:20}}),children:[]}],Vt=[{label:"Permisos",key:"permissions",icon:e.jsx(ys,{style:{fontSize:20}}),children:[]}],_t=[{label:"Reports",key:"reports",icon:e.jsx(Ss,{style:{fontSize:20}}),children:[]}],Bt=[{label:"Logout",key:"logout",icon:e.jsx(bs,{style:{fontSize:20,color:"#faad14"}}),children:[]}],Gt=[{label:"Home",key:"/",icon:e.jsx(As,{style:{fontSize:20}}),children:[]}],Qt=[{label:"Assets",key:"assets-settings",icon:e.jsx(Cs,{style:{fontSize:20}}),children:[]}],oe=(t,s,n,m,d,l)=>({key:s,icon:n,children:m,label:t,type:d,disabled:l}),Jt=Vt.map(t=>oe(t.label,t.key,t.icon)),Kt=_t.map(t=>oe(t.label,t.key,t.icon)),Wt=zt.map(t=>oe(t.label,t.key,t.icon)),Xt=Bt.map(t=>oe(t.label,t.key,t.icon)),Zt=Gt.map(t=>oe(t.label,t.key,t.icon)),ea=Qt.map(t=>oe(t.label,t.key,t.icon)),{Sider:sa}=de,ta=[Zt[0],Wt[0],ea[0],Jt[0],Kt[0],Xt[0]],aa=()=>{const t=Z(),{logout:s}=ne(),[n,m]=c.useState(!0);let d={};n?d={textAlign:"center",paddingTop:20,paddingBottom:10}:d={textAlign:"right",paddingTop:20,paddingBottom:10};const l={backgroundColor:"#333035",borderRadius:"0px 20px 20px 0px",height:"88vh"},a={backgroundColor:"#333035",color:"#fff",borderRadius:"0px 20px 20px 0px",maxWidth:200,minHeight:"50vh"},r=v=>{m(v)},h=()=>{t("/"),s()};return e.jsxs(sa,{breackpoint:"md",trigger:null,collapsible:!0,collapsed:n,onCollapse:r,style:l,children:[e.jsx("div",{style:d,children:e.jsx(P,{type:"text",icon:n?e.jsx(ks,{style:{fontSize:20,color:"#fff"}}):e.jsx(ws,{style:{fontSize:20,color:"#fff"}}),onClick:()=>m(!n)})}),e.jsx(Es,{style:a,mode:"inline",items:ta,onClick:({key:v})=>{v==="logout"?h():v==="openClose"?m(!n):t(v)},selectable:!0})]})},na="/assets/LogoHorizontal-aIQiJSsu.png",la=()=>{const t=Z(),n=O(d=>d.permits.permits).some(d=>d.status==="waiting"),m=()=>{t("/permissions")};return e.jsx("div",{children:n&&e.jsx(P,{className:"notification",onClick:m,children:"Hay pendientes de autorización!"})})},{Header:ra}=de,ge=["#f56a00","#7265e6","#ffbf00","#00a2ae"],ia=()=>{const[t,s]=c.useState("U"),[n,m]=c.useState(ge[1]);Z();const{isLoggedIn:d,credentials:l}=ne(),a=()=>{const h=Math.floor(Math.random()*4);m(h<ge.length-1?ge[h+1]:ge[0])},r=h=>h.split(" ").map(y=>y[0].toUpperCase()).join("");return c.useEffect(()=>{l!=null&&l.name&&(l!=null&&l.lastName)?s(r(`${l==null?void 0:l.name} ${l==null?void 0:l.lastName}`)):s("U")},[d,l]),e.jsxs(ra,{className:"header",children:[e.jsx(Ue,{to:"/",children:e.jsx(Is,{preview:!1,width:150,src:na})}),e.jsx(la,{}),e.jsx("div",{className:"",style:{paddingRight:20,paddingLeft:20},children:d?e.jsx(Pe,{style:{backgroundColor:n,cursor:"pointer"},size:35,onClick:a,children:t}):e.jsx(Pe,{style:{backgroundColor:n,cursor:"pointer"},size:35,icon:e.jsx(Ps,{style:{fontSize:35}}),onClick:a})})]})},oa=()=>{const{Header:t,Content:s,Footer:n}=de,{token:{colorBgContainer:m}}=Fs.useToken(),d={margin:"0px",background:m,textAlign:"center",height:"88vh",width:"100%"},l={padding:0,background:m,textAlign:"center",height:40,display:"flex",justifyContent:"center",alignItems:"center"},a={display:"flex",alignContent:"center",alignItems:"center",background:"#fff"},r={backgroundColor:"#fff",height:"100%"};return e.jsxs(de,{className:"conatiner-fluid",style:r,children:[e.jsx(ia,{}),e.jsxs(de,{style:a,children:[e.jsx(aa,{}),e.jsx(s,{style:d,children:e.jsx(Ye,{})})]}),e.jsx(n,{style:l,children:"MyPropChain © 2024 all rights reserved"})]})},{RangePicker:ca}=ee,pe=({fields:t,onFinish:s,formName:n,name:m,buttonTitle:d,layout:l})=>{l||(l="vertical");const a="DD/MM/YYYY HH:mm";return e.jsxs(x,{form:n,name:m,onFinish:s,layout:l,labelCol:{span:8},wrapperCol:{span:24},style:{maxWidth:600},children:[t.map((r,h)=>e.jsxs(x.Item,{label:r.label,name:r.name,rules:r.type==="confirmPassword"?[{required:!0,message:`Please input a ${r.label}`},{min:8,message:"Password must be at least 8 characters"},({getFieldValue:v})=>({validator(o,y){return!y||v("password")===y?Promise.resolve():Promise.reject(new Error("The two passwords that you entered do not match!"))}})]:[{required:!0,message:`Please input ${r.label}`},{type:`${r.type}`},r.type==="password"&&{min:8,message:"Password must be at least 8 characters"}],children:[r.type==="text"&&e.jsx(T,{id:r.name,placeholder:r.placeholder}),r.type==="inputnumber"&&e.jsx(Os,{min:"0",max:"1",step:"0.01",stringMode:!0,style:{width:"100%"},id:r.name,placeholder:r.placeholder}),r.type==="number"&&e.jsx(T,{type:"number",id:r.name,placeholder:r.placeholder}),r.type==="email"&&e.jsx(T,{type:"email",id:r.name,placeholder:r.placeholder}),r.type==="date"&&e.jsx(ee,{id:r.name,format:a}),r.type==="datetime"&&e.jsx(ca,{id:r.name,placeholder:r.placeholder}),r.type==="password"&&e.jsx(T.Password,{id:r.name,placeholder:r.placeholder}),r.type==="confirmPassword"&&e.jsx(T.Password,{id:r.name,placeholder:r.placeholder}),r.type==="textarea"&&e.jsx(T.TextArea,{id:r.name}),r.type==="select"&&e.jsx(Ts,{id:r.name,options:r.options,placeholder:r.placeholder}),r.type==="radio"&&e.jsx(X,{id:r.name}),r.type==="checkbox"&&e.jsx(q,{id:r.name}),r.type==="switch"&&e.jsx(Rs,{id:r.name}),r.type==="slider"&&e.jsx(Ms,{id:r.name}),r.type==="rate"&&e.jsx(Ls,{id:r.name}),r.type==="upload"&&e.jsx(Ds,{id:r.name}),r.type==="button"&&e.jsx(P,{id:r.name}),r.type==="treeselect"&&e.jsx(Us,{id:r.name}),r.type==="timepicker"&&e.jsx(qs,{id:r.name})]},h)),e.jsx(x.Item,{children:e.jsxs("div",{className:"",style:{display:"flex",flexDirection:"row"},children:[e.jsx(P,{type:"primary",htmlType:"submit",children:d}),e.jsx(P,{type:"",htmlType:"reset",style:{marginLeft:"20px"},children:"Reset"})]})})]})},Se=({message:t})=>e.jsx("div",{className:"alert alert-success",children:e.jsx("div",{className:"",children:t})}),be=({message:t})=>e.jsx("div",{className:"alert alert-danger",children:e.jsx("div",{className:"",children:t})}),ke=({title:t,content:s})=>{ae.success({title:t,content:s})},da=({title:t,content:s})=>{ae.info({title:t,content:s})},ss=()=>{const t=O(f=>f.tenants.tenants),[s]=x.useForm(),[n,m]=c.useState(!1);c.useState(null);const[d,l]=c.useState(!1),[a,r]=c.useState(!1),[h,v]=c.useState(null),[o,{isSuccess:y,error:k,reset:C}]=ut(),g=[{value:"admin",label:"Admin"},{value:"user",label:"User"},{value:"root",label:"Root"},{value:"operator",label:"Operator"},{value:"contractor",label:"Contractor"},{value:"autoridadEstatal",label:"Autoridad Estatal"},{value:"autoridadMunicipal",label:"Autoridad Municipal"},{value:"autoridadArea",label:"Autoridad de Area"},{value:"autoridadAreaLocal",label:"Autoridad de Area Local"},{value:"otraAutoridad",label:"Otra Autoridad"}],j=[{label:"Tenant",name:"tenant",type:"select",placeholder:"Tenant",options:t==null?void 0:t.map(f=>({value:f._id,label:f.name}))},{label:"Nombre",name:"name",type:"text",placeholder:"Nombre"},{label:"Apellido",name:"lastname",type:"text",placeholder:"Apellido"},{label:"Email",name:"email",type:"email",placeholder:"Email"},{label:"Password",name:"password",type:"password",placeholder:"Password"},{label:"Confirm password",name:"confirmPassword",type:"confirmPassword",placeholder:"Confirm password"},{label:"Role",name:"role",type:"select",placeholder:"Role",options:g}],i=()=>{r(!1),l(!1),m(!0)},p=()=>{r(!1),l(!1),s.resetFields(),m(!1)},u=()=>{r(!1),l(!1),s.resetFields(),m(!1)},N=f=>{const S={...f,isActive:!0};o(S).unwrap(),C()};return c.useEffect(()=>{y&&(l(!0),v("User added successfully"))},[y]),c.useEffect(()=>{k&&(r(!0),v("Error adding user"))},[k]),e.jsxs(e.Fragment,{children:[e.jsx("div",{className:"",children:e.jsx("div",{className:"col-md",children:e.jsx(P,{type:"primary",className:"",onClick:i,children:"Add User"})})}),e.jsxs(ae,{open:n,forceRender:!0,title:"Add user",onOk:p,onCancel:u,cancelButtonProps:{form:s,key:"cancel",htmlType:"reset"},footer:[e.jsx(P,{type:"default",onClick:u,children:"Exit"},"exit")],children:[e.jsx(pe,{fields:j,onFinish:N,name:"userForm",buttonTitle:"Submit",formName:s}),a&&be({message:h}),d&&Se({message:h})]})]})},ua=()=>{var j;c.useState([]);const t=O(i=>i.tenants.tenants);c.useState(!0),ie();const[s,n]=c.useState({}),[m,d]=c.useState({}),l=(i,p,u)=>{console.log("Various parameters",i,p,u),n(p),d(u)},{data:a=[],isSuccess:r,error:h,isFetching:v,refetch:o}=ct({}),y=t==null?void 0:t.map(i=>({text:i.name,value:i.name})),k=(j=a==null?void 0:a.users)==null?void 0:j.map(i=>{var p;return{key:i._id,name:i.name+" "+i.lastname,email:i.email,role:i.role,tenant:(p=i.tenant)==null?void 0:p.name}}),C=[{title:"Name",dataIndex:"name",key:"name",render:i=>e.jsx("a",{children:i}),sorter:(i,p)=>{var u,N;return((u=i.name)==null?void 0:u.length)-((N=p.name)==null?void 0:N.length)}},{title:"Email",dataIndex:"email",key:"email"},{title:"Role",dataIndex:"role",key:"role"},{title:"Organizacion",dataIndex:"tenant",key:"tenant",filters:y,filteredValue:s.tenant||null,onFilter:(i,p)=>p.tenant.includes(i),sorter:(i,p)=>{var u,N;return((u=i.tenant)==null?void 0:u.length)-((N=p.tenant)==null?void 0:N.length)},sortOrder:m.columnKey==="tenant"?m.order:null,ellipsis:!0},{title:"Action",key:"action",render:(i,p)=>e.jsxs(he,{size:"middle",children:[e.jsx(xe,{style:{fontSize:20,color:"#008000",marginRight:10},onClick:()=>g(p)}),e.jsx(je,{style:{fontSize:20,color:"#FF0000",marginRight:10},onClick:()=>w(p)})]})}],g=i=>{console.log(i)},w=i=>{console.log(i.tenant.length)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(te,{dataSource:k,columns:C,onChange:l})})})})})},ma=()=>e.jsxs(e.Fragment,{children:[e.jsxs(Y,{children:[e.jsx(U,{span:12,className:"text-center",children:e.jsx("h4",{children:"Users administration"})}),e.jsx(U,{span:12,className:"text-center",children:e.jsx(ss,{})})]}),e.jsx(Y,{className:"pt-3",children:e.jsx(U,{span:24,children:e.jsx(ua,{})})})]}),B=["autoridadArea","autoridadMunicipal","autoridadEstatal","autoridadAreaLocal","otraAutoridad","root"],ha=["owner","contractor","client"],xa=()=>{const[t]=x.useForm(),[s,n]=c.useState(!1);c.useState(null);const[m,d]=c.useState(!1),[l,a]=c.useState(!1),[r,h]=c.useState(null),[v,{isSuccess:o,error:y,reset:k}]=Ct(),g=[{label:"Tipo",name:"tenantType",type:"select",placeholder:"Tipo",options:ha.map(u=>({label:u,value:u}))},{label:"Nombre",name:"tenantName",type:"text",placeholder:"Nombre"},{label:"Nombre Legal",name:"tenantLegalname",type:"text",placeholder:"Nombre"},{label:"Email",name:"tenantEmail",type:"email",placeholder:"Email"}],w=()=>{a(!1),d(!1),n(!0)},j=()=>{a(!1),d(!1),t.resetFields(),n(!1)},i=()=>{a(!1),d(!1),t.resetFields(),n(!1)},p=u=>{const N={name:u.tenantName,legalName:u.tenantLegalname,email:u.tenantEmail,isActive:!0,more:{type:u.tenantType}};v(N).unwrap(),k()};return c.useEffect(()=>{o&&(d(!0),h("Tenant added successfully"))},[o]),c.useEffect(()=>{y&&(a(!0),h("Error adding tenant"))},[y]),e.jsxs(e.Fragment,{children:[e.jsx(P,{type:"primary",onClick:w,children:"Add new tenant"}),e.jsxs(ae,{open:s,forceRender:!0,title:"Add tenant",onOk:j,onCancel:i,cancelButtonProps:{form:t,key:"cancel",htmlType:"reset"},footer:[e.jsx(P,{type:"default",onClick:i,children:"Exit"},"exit")],children:[e.jsx(pe,{fields:g,onFinish:p,name:"tenantForm",buttonTitle:"Submit",formName:t}),l&&be({message:r}),m&&Se({message:r})]})]})},ja=()=>{var v;c.useState([]),c.useState(!0),ie();const{data:t=[],isSuccess:s,error:n,isFetching:m,refetch:d}=At({}),l=(v=t==null?void 0:t.data)==null?void 0:v.map(o=>({key:o._id,name:o.name,email:o.email})),a=[{title:"Name",dataIndex:"name",key:"name",render:o=>e.jsx("a",{children:o})},{title:"Email",dataIndex:"email",key:"email"},{title:"Action",key:"action",render:(o,y)=>e.jsxs(he,{size:"middle",children:[e.jsx(xe,{style:{fontSize:20,color:"#008000",marginRight:10},onClick:()=>r(y)}),e.jsx(je,{style:{fontSize:20,color:"#FF0000",marginRight:10},onClick:()=>h(y)})]})}],r=o=>{console.log(o)},h=o=>{console.log(o)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(te,{dataSource:l,columns:a})})})})})},pa=()=>e.jsxs(e.Fragment,{children:[e.jsxs(Y,{children:[e.jsx(U,{span:12,className:"text-center",children:e.jsx("h4",{children:"Tenants administration"})}),e.jsx(U,{span:12,className:"text-center",children:e.jsx(xa,{})})]}),e.jsx(Y,{className:"pt-3",children:e.jsx(U,{span:24,children:e.jsx(ja,{})})})]}),fa=()=>{const[t]=x.useForm(),[s,n]=c.useState(!1);c.useState(null);const[m,d]=c.useState(!1),[l,a]=c.useState(!1),[r,h]=c.useState(null),[v,{isSuccess:o,error:y,reset:k}]=gt(),C=[{label:"Nombre",name:"locationName",type:"text",placeholder:"Nombre"},{label:"Descripción",name:"description",type:"text",placeholder:"Descripcion"},{label:"Ciudad",name:"city",type:"text",placeholder:"Ciudad"},{label:"Departamento",name:"state",type:"text",placeholder:"Departamento"},{label:"Pais",name:"country",type:"text",placeholder:"Pais"}],g=()=>{a(!1),d(!1),n(!0)},w=()=>{a(!1),d(!1),t.resetFields(),n(!1)},j=()=>{a(!1),d(!1),t.resetFields(),n(!1)},i=p=>{const u={...p,isActive:!0};v(u).unwrap(),k()};return c.useEffect(()=>{o&&(d(!0),h("Location added successfully"))},[o]),c.useEffect(()=>{y&&(a(!0),h("Error adding location"))},[y]),e.jsxs(e.Fragment,{children:[e.jsx(P,{type:"primary",onClick:g,children:"Add location"}),e.jsxs(ae,{open:s,forceRender:!0,title:"Add tenant",onOk:w,onCancel:j,cancelButtonProps:{form:t,key:"cancel",htmlType:"reset"},footer:[e.jsx(P,{type:"default",onClick:j,children:"Exit"},"exit")],children:[e.jsx(pe,{fields:C,onFinish:i,name:"locationForm",buttonTitle:"Submit",formName:t}),l&&be({message:r}),m&&Se({message:r})]})]})},ga=()=>{var v;const{data:t=[],isSuccess:s,error:n,isFetching:m,refetch:d}=ft({}),l=(v=t==null?void 0:t.data)==null?void 0:v.map(o=>({key:o._id,name:o.locationName,city:o.city,state:o.state,country:o.country})),a=[{title:"Name",dataIndex:"name",key:"name",render:o=>e.jsx("a",{children:o})},{title:"Ciudad",dataIndex:"city",key:"city"},{title:"Departamento",dataIndex:"state",key:"state"},{title:"Action",key:"action",render:(o,y)=>e.jsxs(he,{size:"middle",children:[e.jsx(xe,{style:{fontSize:20,color:"#008000",marginRight:10},onClick:()=>r(y)}),e.jsx(je,{style:{fontSize:20,color:"#FF0000",marginRight:10},onClick:()=>h(y)})]})}],r=o=>{console.log(o)},h=o=>{console.log(o)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(te,{dataSource:l,columns:a})})})})})},Na=()=>e.jsxs(e.Fragment,{children:[e.jsxs(Y,{children:[e.jsx(U,{span:12,className:"text-center",children:e.jsx("h4",{children:"Location administration"})}),e.jsx(U,{span:12,className:"text-center",children:e.jsx(fa,{})})]}),e.jsx(Y,{className:"pt-3",children:e.jsx(U,{span:24,children:e.jsx(ga,{})})})]}),va=()=>{const t=O(h=>h.users.user),[s,n]=c.useState(!0),[m,d]=c.useState(!1),[l,a]=c.useState(!1);console.log("USER",t);const r=h=>{switch(h){case 1:n(!0),d(!1),a(!1);break;case 2:n(!1),d(!0),a(!1);break;case 3:n(!1),d(!1),a(!0);break;default:n(!0),d(!1),a(!1);break}};return e.jsxs("div",{className:"pageContainer",children:[e.jsx("div",{className:"tabs",children:e.jsxs("ul",{className:"tab-container",children:[e.jsx("li",{id:"tab1",className:s?"tab activeItem activeList":"tab",children:e.jsx("a",{onClick:()=>r(2),children:"Users settings"})}),(t==null?void 0:t.role)==="root"&&e.jsx("li",{id:"tab2",className:m?"tab activeItem activeList":"tab",children:e.jsx("a",{onClick:()=>r(1),children:"Tenants settings"})}),(t==null?void 0:t.role)==="root"&&e.jsx("li",{id:"tab3",className:l?"tab activeItem activeList":"tab",children:e.jsx("a",{onClick:()=>r(3),children:"Location settings"})})]})}),e.jsxs("div",{className:"blockBorder",children:[s&&e.jsx(ma,{}),m&&(t==null?void 0:t.role)==="root"&&e.jsx(pa,{}),l&&(t==null?void 0:t.role)==="root"&&e.jsx(Na,{})]})]})},ya=()=>e.jsx("div",{children:"Reports"}),ts=ue({}),Sa=ts.getInitialState(),z=Q.injectEndpoints({endpoints:t=>({getPermits:t.query({query:()=>"/permits",providesTags:["Permits"]}),getPermit:t.query({query:s=>`/permits/${s}`}),addPermit:t.mutation({query:s=>({url:"/permits",method:"POST",body:s}),invalidatesTags:["Permits"],extraOptions:{maxRetries:0}}),updatePermit:t.mutation({query:({id:s,data:n})=>({url:`/permits/${s}`,method:"PUT",body:n}),invalidatesTags:["Permits"],extraOptions:{maxRetries:0}})})}),{useGetPermitQuery:ba,useGetPermitsQuery:Aa,useAddPermitMutation:Ca,useUpdatePermitMutation:se}=z,ka=z.endpoints.getPermits.select(),wa=me(ka,t=>t.data);ts.getSelectors(t=>wa(t)??Sa);const Ea={permits:[],permit:null,loading:!1,error:null},as=re({name:"permits",initialState:Ea,reducers:{setPermit(t,s){t.permit=s.payload},setPermits(t,s){t.permits=s.payload.data}},extraReducers:t=>{t.addMatcher(z.endpoints.getPermits.matchFulfilled,(s,{payload:n})=>{s.permits=n.data,s.loading=!1,s.error=null}),t.addMatcher(z.endpoints.getPermits.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(z.endpoints.getPermits.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n}),t.addMatcher(z.endpoints.getPermit.matchFulfilled,(s,{payload:n})=>{s.permit=n,s.loading=!1,s.error=null}),t.addMatcher(z.endpoints.getPermit.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(z.endpoints.getPermit.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n}),t.addMatcher(z.endpoints.updatePermit.matchFulfilled,(s,{payload:n})=>{s.permit=n.data,s.loading=!1,s.error=null}),t.addMatcher(z.endpoints.updatePermit.matchPending,s=>{s.loading=!0,s.error=null}),t.addMatcher(z.endpoints.updatePermit.matchRejected,(s,{payload:n})=>{s.loading=!1,s.error=n})}}),Ae=as.actions,Ia=as.reducer,Pa=({setValue:t,number:s,setShow:n,show:m})=>{const[d]=x.useForm();ie();const l=O(E=>E.permits.permit),a=O(E=>E.users.user),[r,h]=c.useState({}),[v,o]=c.useState(s),[y,k]=c.useState(null);c.useState(!0);const[C,g]=c.useState(!1),[w,{isSuccess:j,error:i,reset:p}]=se(),u="DD/MM/YYYY HH:mm";c.useEffect(()=>{var E;if((l==null?void 0:l.formNumber)===parseInt(s)){const I={...l==null?void 0:l.section1,date:D((E=l==null?void 0:l.section1)==null?void 0:E.date)};(l==null?void 0:l.status)==="waiting"&&B.includes(a==null?void 0:a.role)?g(!0):g(!1),d.setFieldsValue(I)}},[]);const N=E=>{const I={...l,section1:{...E,completed:!0}};w({id:l._id,data:I}).then(A=>{A.data.status===200&&(n("2"),t("2"))})},f=[{label:"Alto",value:"alto",style:{color:"red"}},{label:"Medio",value:"medio",style:{color:"orange"}}],S=E=>{k(E.target.value)};return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"INFORMACION GENERAL"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",v]})]}),e.jsx("hr",{}),e.jsx("div",{style:{marginRight:50,marginTop:30},children:e.jsxs(x,{form:d,name:"seccion1",layout:"vertical",onFinish:N,initialValues:r,children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex flex-row justify-content-start",children:e.jsx(x.Item,{label:"Fecha de Solicitud",name:"date",rules:[{required:!0,message:"Please input!"}],children:e.jsx(ee,{format:u,disabled:C})})})}),e.jsx("div",{className:"col",children:e.jsx(x.Item,{label:"Compañía que requiere el servicio",name:"company",rules:[{required:!0,message:"Please input!"}],children:e.jsx(T,{disabled:C})})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsx(x.Item,{label:"Instalación",name:"location",rules:[{required:!0,message:"Please input!"}],children:e.jsx(T,{disabled:C})})}),e.jsx("div",{className:"col",children:e.jsx(x.Item,{label:"Area",name:"area",rules:[{required:!0,message:"Please input!"}],children:e.jsx(T,{disabled:C})})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsx(x.Item,{label:"Equipos a intervenir",name:"equipment",rules:[{required:!0,message:"Please input!"}],children:e.jsx(T,{disabled:C})})}),e.jsx("div",{className:"col",children:e.jsx(x.Item,{label:"Alcance del trabajo",name:"alcance",rules:[{required:!0,message:"Please input!"}],children:e.jsx(T,{disabled:C})})})]}),e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col",children:[e.jsx("div",{className:"d-flex flex-row justify-content-start",children:e.jsx(x.Item,{label:"Nivel Potencial de Peligro Identificado",name:"warning",rules:[{required:!0,message:"Please input!"}],children:e.jsx(X.Group,{options:f,optionType:"button",onChange:S,disabled:C})})}),e.jsxs($s,{children:[y==="alto"&&e.jsxs("p",{className:"textSubtitle",children:["Nivel de Peligro:"," ",e.jsx("span",{style:{color:"red"},children:y.toUpperCase()})]}),y==="medio"&&e.jsxs("p",{className:"textSubtitle",children:["Nivel de Peligro:"," ",e.jsx("span",{style:{color:"orange"},children:y.toUpperCase()})]})]})]}),e.jsx("div",{className:"col",children:e.jsx(x.Item,{label:"Equipos y Herramientas a Usar",name:"tools",rules:[{required:!0,message:"Please input!"}],children:e.jsx(T,{disabled:C})})})]}),e.jsx("div",{className:"d-flex justify-content-end mt-4",children:e.jsx(x.Item,{children:e.jsx(P,{type:"primary",htmlType:"submit",className:"float-right",children:"Seguir"})})})]})})]})},Fa=({value:t,setValue:s,number:n,setShow:m,show:d})=>{const[l]=x.useForm(),a=O($=>$.permits.permit),r=O($=>$.users.user),[h,v]=c.useState(n);c.useState(!1);const[o,y]=c.useState(!1),[k,C]=c.useState(!1),[g,w]=c.useState(!1),[j,i]=c.useState(!1),[p,u]=c.useState(!1),[N,f]=c.useState(!1),[S,E]=c.useState(!1),[I,A]=c.useState(!1),[R,M]=c.useState(!1),[L,b]=c.useState(!1),[F,V]=c.useState(!1),[fe,{isSuccess:we,error:Ee,reset:tn}]=se();c.useEffect(()=>{if((a==null?void 0:a.formNumber)===parseInt(n)){const $={...a==null?void 0:a.section2};l.setFieldsValue($),y($.check1),A($.check2),C($.check3),w($.check4),i($.check5),u($.check6),f($.check7),E($.check8),M($.check9),b($.check10),(a==null?void 0:a.status)==="waiting"&&B.includes(r==null?void 0:r.role)?V(!0):V(!1)}},[]);const ls=$=>{const rs={...a,section2:{...$,completed:!0}};fe({id:a._id,data:rs}).then(is=>{is.data.status===200&&(m([...d,"3"]),s("3"))})};return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"ANALISIS DE RIESGOS, CERTIFICADOS DE APOYO Y DOCUMENTOS SOPORTE REQUERIDOS"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",h]})]}),e.jsx("hr",{}),e.jsx("div",{style:{marginRight:10},children:e.jsxs(x,{form:l,name:"seccion2",layout:"horizontal",onFinish:ls,children:[e.jsxs("div",{children:[e.jsx("p",{className:"textFormItalic w-100",children:"ANALISIS DE RIESGOS REQUERIDOS"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[e.jsx(x.Item,{label:"Análisis de Seguridad en el Trabajo - AST",name:"check1",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{onChange:()=>y(!o),checked:o,disabled:F})}),e.jsx(x.Item,{label:"Nro.",name:"astNumber",style:{paddingLeft:20},rules:[o&&{required:!0,message:"Please input!"}],children:e.jsx(T,{disabled:!o})})]})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex flex-row",children:e.jsx(x.Item,{label:"Análisis de Peligro en la Etapa de Planificación - APEP",name:"apep",children:e.jsxs(X.Group,{disabled:F,children:[e.jsx(X,{value:"si",children:" Si "}),e.jsx(X,{value:"no",children:" No "})]})})})})]})]}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[e.jsx(x.Item,{label:"Otro",name:"check2",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{onChange:()=>A(!I),checked:I,disabled:F})}),e.jsx(x.Item,{label:"Cual?",name:"oAnalysisDescription",style:{paddingLeft:20},rules:[I&&{required:!0,message:"Please input!"}],children:e.jsx(T,{disabled:!I})})]})})}),e.jsxs("div",{children:[e.jsx("p",{className:"textFormItalic w-100",children:"CERTIFICADOS DE APOYO REQUERIDOS"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[e.jsx(x.Item,{label:"Certificado Apoyo de Trabajo en Caliente",name:"check3",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{onChange:()=>C(!k),checked:k,disabled:F})}),e.jsx(x.Item,{label:"Nro.",name:"atcNumber",style:{paddingLeft:20},rules:[k&&{required:!0,message:"Please input!"}],children:e.jsx(T,{disabled:!k})})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[" ",e.jsx(x.Item,{label:"Certificado Apoyo de Radiaciones",name:"check4",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{onChange:()=>w(!g),checked:g,disabled:F})}),e.jsx(x.Item,{label:"Nro.",name:"certARNumber",style:{paddingLeft:20},rules:[g&&{required:!0,message:"Please input!"}],children:e.jsx(T,{disabled:!g})})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[e.jsx(x.Item,{label:"Certificado Apoyo de Excavación",name:"check5",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{onChange:()=>i(!j),checked:j,disabled:F})}),e.jsx(x.Item,{label:"Nro.",name:"certAENumber",style:{paddingLeft:20},rules:[j&&{required:!0,message:"Please input!"}],children:e.jsx(T,{disabled:!j})})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[" ",e.jsx(x.Item,{label:"Certificado Apoyo Trabajo en Altura",name:"check6",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{onChange:()=>u(!p),checked:p,disabled:F})}),e.jsx(x.Item,{label:"Nro.",name:"certATANumber",style:{paddingLeft:20},rules:[p&&{required:!0,message:"Please input!"}],children:e.jsx(T,{disabled:!p})})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[e.jsx(x.Item,{label:"Certificado Apoyo Izaje de Carga",name:"check7",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{onChange:()=>f(!N),checked:N,disabled:F})}),e.jsx(x.Item,{label:"Nro.",name:"certAICNumber",style:{paddingLeft:20},rules:[N&&{required:!0,message:"Please input!"}],children:e.jsx(T,{disabled:!N})})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[" ",e.jsx(x.Item,{label:"Certificado Apoyo de Espacios Confinados",name:"check8",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{onChange:()=>E(!S),checked:S,disabled:F})}),e.jsx(x.Item,{label:"Nro.",name:"certAECNumber",style:{paddingLeft:20},rules:[S&&{required:!0,message:"Please input!"}],children:e.jsx(T,{disabled:!S})})]})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[e.jsx(x.Item,{label:"Certificado Apoyo Ahislamiento de Energías",name:"check9",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{onChange:()=>M(!R),checked:R,disabled:F})}),e.jsx(x.Item,{label:"Nro.",name:"certAAENumber",style:{paddingLeft:20},rules:[R&&{required:!0,message:"Please input!"}],children:e.jsx(T,{disabled:!R})})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[" ",e.jsx(x.Item,{label:"Otro",name:"check10",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{onChange:()=>b(!L),checked:L,disabled:F})}),e.jsx(x.Item,{label:"Cual",name:"certOtherDesc",style:{paddingLeft:20},rules:[L&&{required:!0,message:"Please input!"}],children:e.jsx(T,{disabled:!L})})]})})]}),e.jsxs("div",{className:"",children:[e.jsx("p",{className:"textFormItalic w-100",children:"DOCUMENTOS SOPORTE REQUERIDOS"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex flex-row",children:e.jsx(x.Item,{label:"Preoperacionales Equipos y Herramientas",name:"reqDocsPEH",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{disabled:F})})})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[" ",e.jsx(x.Item,{label:"Procedimientos/Instructivos",name:"reqDocsPI",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{disabled:F})})]})}),e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex flex-row",children:[" ",e.jsx(x.Item,{label:"FDS Productos químicos",name:"reqDocsFDS",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{disabled:F})})]})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex flex-row",children:e.jsx(x.Item,{label:"Otro",name:"reqDocsOther",valuePropName:"checked",rules:[{required:!1,message:"Please input!"}],children:e.jsx(q,{disabled:F})})})})]})]})]}),e.jsx("div",{className:"d-flex justify-content-end mt-5",children:e.jsx(x.Item,{children:e.jsx(P,{type:"primary",htmlType:"submit",className:"float-right",children:"Seguir"})})})]})})]})},Oa=({value:t,setValue:s,number:n,show:m,setShow:d})=>{const[l]=x.useForm(),a=O(u=>u.permits.permit),r=O(u=>u.users.user),[h,v]=c.useState(n);c.useState(!1),c.useState(!0);const[o,y]=c.useState(!1),k="DD/MM/YYYY HH:mm",[C,{isSuccess:g,error:w,reset:j}]=se();c.useEffect(()=>{var u,N,f,S,E,I,A,R,M,L,b,F,V,fe;if((a==null?void 0:a.formNumber)===parseInt(n)){const we={calibrationDate:(u=a==null?void 0:a.section3)!=null&&u.calibrationDate?D((N=a==null?void 0:a.section3)==null?void 0:N.calibrationDate):null,verificationDate:(f=a==null?void 0:a.section3)!=null&&f.verificationDate?D((S=a==null?void 0:a.section3)==null?void 0:S.verificationDate):null,row1Col1:(E=a==null?void 0:a.section3)!=null&&E.row1Col1?D((I=a==null?void 0:a.section3)==null?void 0:I.row1Col1):null,row1Col2:(A=a==null?void 0:a.section3)!=null&&A.row1Col2?D((R=a==null?void 0:a.section3)==null?void 0:R.row1Col2):null,row1Col3:(M=a==null?void 0:a.section3)!=null&&M.row1Col3?D((L=a==null?void 0:a.section3)==null?void 0:L.row1Col3):null,row1Col4:(b=a==null?void 0:a.section3)!=null&&b.row1Col4?D((F=a==null?void 0:a.section3)==null?void 0:F.row1Col4):null,row1Col5:(V=a==null?void 0:a.section3)!=null&&V.row1Col5?D((fe=a==null?void 0:a.section3)==null?void 0:fe.row1Col5):null},Ee={...a==null?void 0:a.section3,...we};l.setFieldsValue(Ee),(a==null?void 0:a.status)==="waiting"&&B.includes(r==null?void 0:r.role)?y(!0):y(!1)}},[]);const i=(u,N,f,S,E,I,A)=>e.jsx(e.Fragment,{children:f==="checkbox"?e.jsx(x.Item,{label:u,name:N,valuePropName:"checked",rules:[{type:f,message:`The input is not valid ${f}`},{required:E,message:`Please input a ${u}`}],children:e.jsx(q,{onChange:I,indeterminate:!1,disabled:A})},N):e.jsxs(x.Item,{name:N,label:u,rules:[{type:f,message:`The input is not valid ${f}`},{required:E,message:`Please input a ${u}`}],children:[f==="select"&&e.jsx(Select,{placeholder:`Input ${u}`,options:S,disabled:select}),f==="text"&&e.jsx(T,{placeholder:`Input ${u||"data"}`,disabled:A}),f==="radio"&&e.jsx(X.Group,{options:S,disabled:A}),f==="date"&&e.jsx(ee,{format:k,disabled:A})]},N)}),p=u=>{const N={...a,status:"waiting",section3:{...u,completed:!0}};C({id:a._id,data:N}).then(f=>{f.data.status===200&&(d([...m,"4"]),s("4"))})};return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"MONITOREO DE GASES"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",h]})]}),e.jsx("hr",{}),e.jsx("div",{style:{marginRight:10},children:e.jsxs(x,{form:l,name:"section3",onFinish:p,layout:"horizontal",children:[e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex",children:i("No Requerido","noRequired","checkbox",null,!1,null,o)})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex",children:i("Inicial","starter","checkbox",null,!1,null,o)})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex",children:i("Aleatorio","random","checkbox",null,!1,null,o)})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex",children:i("Continuo","continue","checkbox",null,!1,null,o)})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex",children:i("Registro cada(Min)","byMinutes","checkbox",null,!1,null,o)})})]}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col-4",children:e.jsx("div",{className:"d-flex",children:i("Nombre Inspector de Atmósfera","atmInspector","text",null,null,null,o)})}),e.jsx("div",{className:"col-3",children:e.jsx("div",{className:"d-flex",children:i("#Serial Equipo","idEquipment","text",null,null,null,o)})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex",children:i("Fecha Calibración","calibrationDate","date",null,null,null,o)})}),e.jsx("div",{className:"col",children:e.jsx("div",{className:"d-flex",children:i("Fecha Verificación","verificationDate","date",null,null,null,o)})})]}),e.jsxs("div",{className:"row gasHeight",children:[e.jsx("div",{className:"col-2",children:e.jsx("div",{className:"",children:"Fecha y Hora:"})}),e.jsxs("div",{className:"col-10",children:[" ",e.jsxs("div",{className:"d-flex flex-row justify-content-end",children:[i(null,"row1Col1","date",null,null,null,o),i(null,"row1Col2","date",null,null,null,o),i(null,"row1Col3","date",null,null,null,o),i(null,"row1Col4","date",null,null,null,o),i(null,"row1Col5","date",null,null,null,o)]})]})]}),e.jsxs("div",{className:"row gasHeight",children:[e.jsx("div",{className:"col-2",children:e.jsx("div",{className:"",children:"%LEL | 0%"})}),e.jsxs("div",{className:"col-10",children:[" ",e.jsxs("div",{className:"d-flex flex-row justify-content-end",children:[i(null,"row2Col1","text",null,null,null,o),i(null,"row2Col2","text",null,null,null,o),i(null,"row2Col3","text",null,null,null,o),i(null,"row2Col4","text",null,null,null,o),i(null,"row2Col5","text",null,null,null,o)]})]})]}),e.jsxs("div",{className:"row gasHeight",children:[e.jsx("div",{className:"col-2",children:e.jsx("div",{className:"",children:"%02 | 19.5% a 22.5%"})}),e.jsxs("div",{className:"col-10",children:[" ",e.jsxs("div",{className:"d-flex flex-row justify-content-end",children:[i(null,"row3Col1","text",null,null,null,o),i(null,"row3Col2","text",null,null,null,o),i(null,"row3Col3","text",null,null,null,o),i(null,"row3Col4","text",null,null,null,o),i(null,"row3Col5","text",null,null,null,o)]})]})]}),e.jsxs("div",{className:"row gasHeight",children:[e.jsx("div",{className:"col-2",children:e.jsx("div",{className:"",children:"CO (ppm) | s25"})}),e.jsxs("div",{className:"col-10",children:[" ",e.jsxs("div",{className:"d-flex flex-row justify-content-end",children:[i(null,"row4Col1","text",null,null,null,o),i(null,"row4Col2","text",null,null,null,o),i(null,"row4Col3","text",null,null,null,o),i(null,"row4Col4","text",null,null,null,o),i(null,"row4Col5","text",null,null,null,o)]})]})]}),e.jsxs("div",{className:"row gasHeight",children:[e.jsx("div",{className:"col-2",children:e.jsx("div",{className:"",children:"H2s (ppm) | s1"})}),e.jsxs("div",{className:"col-10",children:[" ",e.jsxs("div",{className:"d-flex flex-row justify-content-end",children:[i(null,"row5Col1","text",null,null,null,o),i(null,"row5Col2","text",null,null,null,o),i(null,"row5Col3","text",null,null,null,o),i(null,"row5Col4","text",null,null,null,o),i(null,"row5Col5","text",null,null,null,o)]})]})]}),e.jsxs("div",{className:"row gasHeight",children:[e.jsx("div",{className:"col-2",children:e.jsx("div",{className:"",children:"OTRO"})}),e.jsxs("div",{className:"col-10",children:[" ",e.jsxs("div",{className:"d-flex flex-row justify-content-end",children:[i(null,"row6Col1","text",null,null,null,o),i(null,"row6Col2","text",null,null,null,o),i(null,"row6Col3","text",null,null,null,o),i(null,"row6Col4","text",null,null,null,o),i(null,"row6Col5","text",null,null,null,o)]})]})]}),e.jsxs("div",{className:"row gasHeight",children:[e.jsx("div",{className:"col-2",children:e.jsx("div",{className:"",children:"FIRMA INSPECTOR"})}),e.jsxs("div",{className:"col-10",children:[" ",e.jsxs("div",{className:"d-flex flex-row justify-content-end",children:[i(null,"row7Col1","text",null,null,null,o),i(null,"row7Col2","text",null,null,null,o),i(null,"row7Col3","text",null,null,null,o),i(null,"row7Col4","text",null,null,null,o),i(null,"row7Col5","text",null,null,null,o)]})]})]}),e.jsx("div",{className:"d-flex justify-content-end mt-5",children:e.jsx(x.Item,{children:e.jsx(P,{type:"primary",htmlType:"submit",className:"float-right",children:"Seguir"})})})]})})]})};function le(t){function s(I,A){return I>>>A|I<<32-A}for(var n=Math.pow,m=n(2,32),d="length",l,a,r="",h=[],v=t[d]*8,o=le.h=le.h||[],y=le.k=le.k||[],k=y[d],C={},g=2;k<64;g++)if(!C[g]){for(l=0;l<313;l+=g)C[l]=g;o[k]=n(g,.5)*m|0,y[k++]=n(g,1/3)*m|0}for(t+="";t[d]%64-56;)t+="\0";for(l=0;l<t[d];l++){if(a=t.charCodeAt(l),a>>8)return;h[l>>2]|=a<<(3-l)%4*8}for(h[h[d]]=v/m|0,h[h[d]]=v,a=0;a<h[d];){var w=h.slice(a,a+=16),j=o;for(o=o.slice(0,8),l=0;l<64;l++){var i=w[l-15],p=w[l-2],u=o[0],N=o[4],f=o[7]+(s(N,6)^s(N,11)^s(N,25))+(N&o[5]^~N&o[6])+y[l]+(w[l]=l<16?w[l]:w[l-16]+(s(i,7)^s(i,18)^i>>>3)+w[l-7]+(s(p,17)^s(p,19)^p>>>10)|0),S=(s(u,2)^s(u,13)^s(u,22))+(u&o[1]^u&o[2]^o[1]&o[2]);o=[f+S|0].concat(o),o[4]=o[4]+f|0}for(l=0;l<8;l++)o[l]=o[l]+j[l]|0}for(l=0;l<8;l++)for(a=3;a+1;a--){var E=o[l]>>a*8&255;r+=(E<16?0:"")+E.toString(16)}return r}const Ta=({value:t,setValue:s,number:n,show:m,setShow:d})=>{const l=Z(),[a]=x.useForm(),r=O(A=>A.permits.permit),h=O(A=>A.users.user),[v,o]=c.useState({}),[y,k]=c.useState(n);c.useState(!1);const[C,g]=c.useState(!1),w="DD/MM/YYYY HH:mm",[j,{isSuccess:i,error:p,reset:u}]=se();c.useEffect(()=>{if((r==null?void 0:r.formNumber)===parseInt(n)){const A={...r==null?void 0:r.section4};a.setFieldsValue(A),(r==null?void 0:r.status)==="waiting"&&B.includes(h==null?void 0:h.role),g(!1)}},[]);const N=[{label:"Si",value:"si"},{label:"N/A",value:"na"}],f=(A,R,M,L,b,F,V)=>e.jsx(e.Fragment,{children:M==="checkbox"?e.jsx(x.Item,{label:A,name:R,valuePropName:"checked",rules:[{type:M,message:`The input is not valid ${M}`},{required:b,message:`Please input a ${A}`}],children:e.jsx(q,{onChange:F,indeterminate:!1,disabled:V})},R):e.jsxs(x.Item,{name:R,label:A,rules:[{type:M,message:`The input is not valid ${M}`},{required:b,message:`Please input a ${A}`}],children:[M==="select"&&e.jsx(Select,{placeholder:`Input ${A}`,options:L,disabled:select}),M==="text"&&e.jsx(T,{placeholder:`Input ${A||"data"}`,disabled:V}),M==="radio"&&e.jsx(X,{disabled:V}),M==="radiogroup"&&e.jsx(X.Group,{options:L,disabled:V}),M==="date"&&e.jsx(ee,{format:w,disabled:V})]},R)}),S=A=>{const R=[r==null?void 0:r.formNumber],M=[r==null?void 0:r.section1.equipment.trim().split(" ").join("")],L=R.concat(M),b=le(L);E(b,A)},E=(A,R)=>{const M=`https://api.stamping.io/util/keys/create/?pwd=${A}&token=1ff366eb140491c61d626af1238b09b5a284e143bf713026f3b8ca4038d`;fetch(M).then(L=>L.json()).then(L=>{const b={...r,status:"waiting",section4:{...R,completed:!0},more:{publicKey:L.RSA.publicKey,privateKey:L.RSA.privateKey}};I(b)})},I=A=>{j({id:r._id,data:A}).then(R=>{R.data.status===200&&(ke({title:"Solicitud Enviada",content:"La solicitud fue enviada exitosamente"}),l("/permissions"))}),u()};return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"REVISION CONDICIONES PREINICIO DE TRABAJO"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",y]})]}),e.jsx("hr",{}),e.jsx("div",{style:{marginRight:10},children:e.jsxs(x,{form:a,layout:"horizonatl",name:"section4",initialValues:v,onValuesChange:()=>{o(a.getFieldsValue())},onFinish:S,children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex justify-content-start align-items-baseline",children:[e.jsx("div",{className:"",children:"EL PERSONAL MANIFIESTA ENCONTRARSE EN BUENAS CONDICIONES DE SALUD"}),e.jsx("div",{className:"ms-4",children:f("","healthy","checkbox",null,!0,null,C)})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex justify-content-start align-items-baseline",children:[e.jsx("div",{className:"",children:"SE HA COMPLETADO EL AISLAMIENTO, BLOQUEO Y ETIQUETADO"}),e.jsx("div",{className:"ms-4",children:f("","isnulate","radiogroup",N,!0,null,C)})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex justify-content-start align-items-baseline",children:[e.jsx("div",{className:"",children:"LOS EQUIPOS SE ENCUENTRAN EN CONDICIONES SEGURAS PARA SER ITERVENIDOS"}),e.jsx("div",{className:"ms-4",children:f("","safety","radiogroup",N,!1,null,C)})]})})}),e.jsx("div",{className:"d-flex justify-content-end mt-5",children:e.jsx(x.Item,{children:e.jsx(P,{type:"primary",htmlType:"submit",className:"float-right",children:"Enviar Solicitud"})})})]})})]})},Ra=()=>{const t=Z(),[s,n,m,d]=x.useForm(),l=O(u=>u.permits.permit),a=O(u=>u.users.user),[r,h]=c.useState({}),[v,{isSuccess:o,error:y,reset:k}]=se(),C="DD/MM/YYYY HH:mm";c.useEffect(()=>{const u={nameAda:a==null?void 0:a.name,signAda:a==null?void 0:a.name,dateAda:D(),nameAal:a==null?void 0:a.name,signAal:a==null?void 0:a.name,dateAal:D(),nameAe:a==null?void 0:a.name,signAe:a==null?void 0:a.name,dateAe:D(),nameOa:a==null?void 0:a.name,signOa:a==null?void 0:a.name,dateOa:D()};s.setFieldsValue(u),h(u)},[]);const g=(u,N,f,S,E,I,A)=>e.jsx(e.Fragment,{children:e.jsxs(x.Item,{name:N,label:u,rules:[{type:f,message:`The input is not valid ${f}`},{required:E,message:`Please input a ${u}`}],children:[f==="text"&&e.jsx(T,{placeholder:`Input ${u||"data"}`,disabled:A}),f==="date"&&e.jsx(ee,{format:C,disabled:A})]},N)}),w=u=>{const N={...l,status:"approved",section5:{...u,completed:!0}};v({id:l._id,data:N}).then(S=>{S.data.status===200&&(console.log("Received values of form: ",S.data),ke({content:"Se ha aprobado el permiso",title:"Permiso Aprobado"}),k(),t("/permissions"))});const f=D(u.dateAda).format("DD/MM/YYYY HH:mm");console.log("fecha ",f)},j=u=>{console.log("Received values of form: ",u)},i=u=>{console.log("Received values of form: ",u)},p=u=>{console.log("Received values of form: ",u)};return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"APROBACION"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",l==null?void 0:l.formNumber]})]}),e.jsx("hr",{}),e.jsx("div",{style:{marginRight:10},children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Autoridad de Area"}),e.jsx("hr",{className:""}),e.jsxs(x,{form:s,name:"section51",layout:"vertical",initialValues:r,onFinish:w,children:[g("Nombre","nameAda","text","",!0,"",!1),g("Firma","signAda","text","",!0,"",!1),g("Fecha","dateAda","date","",!0,"",!1),e.jsx(P,{type:"primary",htmlType:"submit",children:"Firmar"})]})]}),e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Autoridad de Area Local"}),e.jsx("hr",{className:""}),e.jsxs(x,{form:n,name:"section52",layout:"vertical",initialValues:r,onFinish:j,children:[g("Nombre","nameAal","text","",!0,"",!1),g("Firma","signAal","text","",!0,"",!1),g("Fecha","dateAal","date","",!0,"",!1),e.jsx(P,{type:"primary",htmlType:"submit",children:"Firmar"})]})]}),e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Autoridad Ejecutante"}),e.jsx("hr",{className:""}),e.jsxs(x,{form:m,name:"section53",layout:"vertical",initialValues:r,onFinish:i,children:[g("Nombre","nameAe","text","",!0,"",!1),g("Firma","signAe","text","",!0,"",!1),g("Fecha","dateAe","date","",!0,"",!1),e.jsx(P,{type:"primary",htmlType:"submit",children:"Firmar"})]})]}),e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Otra Autoridad"}),e.jsx("hr",{className:""}),e.jsxs(x,{form:d,name:"section54",layout:"vertical",initialValues:r,onFinish:p,children:[g("Nombre","nameOa","text","",!0,"",!1),g("Firma","signOa","text","",!0,"",!1),g("Fecha","dateOa","date","",!0,"",!1),e.jsx(P,{type:"primary",htmlType:"submit",children:"Firmar"})]})]})]})})]})},Ma=()=>{x.useForm();const t=O(m=>m.permits.permit);O(m=>m.users.user),c.useState({}),se(),c.useEffect(()=>{},[]);const s=[{title:"Motivo",dataIndex:"motivo",key:"motivo"},{title:"Hora",dataIndex:"date",key:"date"},{title:"Firma AE",dataIndex:"signAe",key:"signAe"},{title:"Firma AAL",dataIndex:"signAal",key:"signAal"}],n=[{title:"Fecha",dataIndex:"rdate",key:"rdate"},{title:"Hora Inicio",dataIndex:"rstart",key:"rstart"},{title:"Hora Fin",dataIndex:"rend",key:"rend"},{title:"Firma AE",dataIndex:"signAe",key:"signAe"},{title:"Firma AAL",dataIndex:"signAal",key:"signAal"}];return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"SUSPENSIONES Y REVALIDACIONES"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",t==null?void 0:t.formNumber]})]}),e.jsx("hr",{}),e.jsxs("div",{style:{marginRight:10},children:[e.jsxs("div",{className:"row",children:[e.jsx("p",{className:"mb-2",children:"Suspenciones"}),e.jsx(te,{columns:s,dataSource:t==null?void 0:t.suspensions,pagination:!1})]}),e.jsxs("div",{className:"row",children:[e.jsx("p",{className:"mb-2 mt-2",children:"Revalidaciones"}),e.jsx(te,{columns:n,dataSource:t==null?void 0:t.suspensions,pagination:!1})]}),e.jsxs("div",{className:"d-flex justify-content-around mt-5",children:[e.jsx(P,{type:"primary",htmlType:"submit",className:"float-right",children:"Suspenciones"}),e.jsx(P,{type:"primary",htmlType:"submit",className:"float-right",children:"Revalidaciones"})]})]})]})},La=()=>{const[t]=x.useForm(),s=O(j=>j.permits.permit);O(j=>j.users.user);const[n,m]=c.useState({}),[d,l]=c.useState(!1),[a,r]=c.useState(!0),[h,v]=c.useState(!0),[o,y]=c.useState(!0);se();const k="DD/MM/YYYY HH:mm",C=j=>{j==="check1"&&r(!a),j==="check2"&&v(!h),j==="check3"&&y(!o)};c.useEffect(()=>{},[]);const g=(j,i,p,u,N,f,S)=>e.jsx(e.Fragment,{children:p==="checkbox"?e.jsx(x.Item,{label:j,name:i,valuePropName:"checked",rules:[{type:p,message:`The input is not valid ${p}`},{required:N,message:`Please input a ${j}`}],children:e.jsx(q,{onChange:()=>C(f),indeterminate:!1,disabled:S})},i):e.jsxs(x.Item,{name:i,label:j,rules:[{type:p,message:`The input is not valid ${p}`},{required:N,message:`Please input a ${j}`}],children:[p==="text"&&e.jsx(T,{placeholder:`Input ${j||"data"}`,disabled:S}),p==="date"&&e.jsx(ee,{format:k,disabled:S})]},i)}),w=j=>{console.log("Submit: ",j),{...s,section7:{...j}}};return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"REGISTRO ACOMPAÑAMIENTO DURANTE EJECUCION"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",s==null?void 0:s.formNumber]})]}),e.jsx("hr",{}),e.jsx("div",{style:{marginRight:10},children:e.jsxs(x,{form:t,layout:"horizonatl",name:"section7",initialValues:n,onValuesChange:()=>{m(t.getFieldsValue())},onFinish:w,children:[e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex justify-content-start align-items-baseline",children:[e.jsx("div",{className:"",children:"VISITA LIDERAZGO"}),e.jsx("div",{className:"ms-4",children:g("","visit","checkbox",null,!1,"check1",d)}),e.jsx("div",{className:"ms-4",children:g("Nombre","vname","text",null,!1,null,a)}),e.jsx("div",{className:"ms-4",children:g("Firma","vsign","text",null,!1,null,a)}),e.jsx("div",{className:"ms-4",children:g("Fecha","vdate","date",null,!0,null,a)})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex justify-content-start align-items-baseline",children:[e.jsx("div",{className:"",children:"CONVERSACION Y/O REFLEXXION"}),e.jsx("div",{className:"ms-4",children:g("","reflection","checkbox",null,!0,"check2",d)}),e.jsx("div",{className:"ms-4",children:g("Nombre","rname","text",null,!1,null,h)}),e.jsx("div",{className:"ms-4",children:g("Firma","rsign","text",null,!1,null,h)}),e.jsx("div",{className:"ms-4",children:g("Fecha","rdate","date",null,!1,null,h)})]})})}),e.jsx("div",{className:"row",children:e.jsx("div",{className:"col",children:e.jsxs("div",{className:"d-flex justify-content-start align-items-baseline",children:[e.jsx("div",{className:"",children:"REVISION DEL PERMISO"}),e.jsx("div",{className:"ms-4",children:g("","check","checkbox",null,!1,"check3",d)}),e.jsx("div",{className:"ms-4",children:g("Nombre","cname","text",null,!1,null,o)}),e.jsx("div",{className:"ms-4",children:g("Firma","csign","text",null,!1,null,o)}),e.jsx("div",{className:"ms-4",children:g("Fecha","cdate","date",null,!1,null,o)})]})})}),e.jsx("div",{className:"d-flex justify-content-end mt-5",children:e.jsx(x.Item,{children:e.jsx(P,{type:"primary",htmlType:"submit",className:"float-right",children:"Enviar Registro"})})})]})})]})},Da=()=>{const t=Z(),[s,n,m,d]=x.useForm(),l=O(S=>S.permits.permit),a=O(S=>S.users.user),[r,h]=c.useState({}),[v,o]=c.useState("");c.useState([]);const[y,{isSuccess:k,error:C,reset:g}]=se(),w="DD/MM/YYYY HH:mm",j=(S,E,I)=>{fetch(`https://api.stamping.io/stamp/?async=true&evidence=${S}&subject='permiso'&transactionType=Permiso de trabajo en caliente&data=COMPLETADO&token=1ff366eb140491c61d626af1238b09b5a284e143bf713026f3b8ca4038d`,{method:"POST",redirect:"follow"}).then(R=>R.text()).then(R=>{const M=JSON.parse(R);o(M.trxid);const L={...I,more:{publicKey:I.more.publicKey,privateKey:I.more.privateKey,file:I.more.file,evidence:M.trxid}};y({id:l._id,data:L}).then(b=>{b.data.status===200&&(console.log("REPUESTA",b.data),ke({title:"Trabajo completado",content:"El trabajo ha sido completado con éxito"}),t("/permissions"))})})};c.useEffect(()=>{const S={nameAda:a==null?void 0:a.name,signAda:a==null?void 0:a.name,dateAda:D(),nameAal:a==null?void 0:a.name,signAal:a==null?void 0:a.name,dateAal:D(),nameAe:a==null?void 0:a.name,signAe:a==null?void 0:a.name,dateAe:D(),nameOa:a==null?void 0:a.name,signOa:a==null?void 0:a.name,dateOa:D()};s.setFieldsValue(S),h(S)},[]);const i=(S,E,I,A,R,M,L)=>e.jsx(e.Fragment,{children:e.jsxs(x.Item,{name:E,label:S,rules:[{type:I,message:`The input is not valid ${I}`},{required:R,message:`Please input a ${S}`}],children:[I==="text"&&e.jsx(T,{placeholder:`Input ${S||"data"}`,disabled:L}),I==="date"&&e.jsx(ee,{format:w,disabled:L})]},E)}),p=S=>{const E={...l,status:"completed",section8:{...S,completed:!0}},I=window.btoa(`{
      "formNumber": ${E.formNumber}, "formDate": ${E.updatedAt}, "status": ${E.status}, "Nombre Autoridad de Area": ${E.section8.nameAda}
    }`),A=le(I);console.log("EVIDENCE",A),j(A,I,E)},u=S=>{console.log("Received values of form: ",S)},N=S=>{console.log("Received values of form: ",S)},f=S=>{console.log("Received values of form: ",S)};return e.jsxs("div",{className:"container-fluid pageContainer",children:[e.jsx("hr",{}),e.jsxs("div",{className:"d-flex justify-content-between ps-2 pe-2",children:[e.jsx("div",{className:"textSubtitle",children:"CIERRE"}),e.jsxs("div",{className:"textSubtitle",children:["Permiso Número: ",l==null?void 0:l.formNumber]})]}),e.jsx("hr",{}),e.jsx("div",{style:{marginRight:10},children:e.jsxs("div",{className:"row",children:[e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Autoridad de Area"}),e.jsx("hr",{className:""}),e.jsxs(x,{form:s,name:"section81",layout:"vertical",initialValues:r,onFinish:p,children:[i("Nombre","nameAda","text","",!0,"",!1),i("Firma","signAda","text","",!0,"",!1),i("Fecha","dateAda","date","",!0,"",!1),e.jsx(P,{type:"primary",htmlType:"submit",children:"Firmar"})]})]}),e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Autoridad de Area Local"}),e.jsx("hr",{className:""}),e.jsxs(x,{form:n,name:"section82",layout:"vertical",initialValues:r,onFinish:u,children:[i("Nombre","nameAal","text","",!0,"",!1),i("Firma","signAal","text","",!0,"",!1),i("Fecha","dateAal","date","",!0,"",!1),e.jsx(P,{type:"primary",htmlType:"submit",children:"Firmar"})]})]}),e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Autoridad Ejecutante"}),e.jsx("hr",{className:""}),e.jsxs(x,{form:m,name:"section83",layout:"vertical",initialValues:r,onFinish:N,children:[i("Nombre","nameAe","text","",!0,"",!1),i("Firma","signAe","text","",!0,"",!1),i("Fecha","dateAe","date","",!0,"",!1),e.jsx(P,{type:"primary",htmlType:"submit",children:"Firmar"})]})]}),e.jsxs("div",{className:"col box1 pt-2",children:[e.jsx("h6",{className:"",children:"Otra Autoridad"}),e.jsx("hr",{className:""}),e.jsxs(x,{form:d,name:"section84",layout:"vertical",initialValues:r,onFinish:f,children:[i("Nombre","nameOa","text","",!0,"",!1),i("Firma","signOa","text","",!0,"",!1),i("Fecha","dateOa","date","",!0,"",!1),e.jsx(P,{type:"primary",htmlType:"submit",children:"Firmar"})]})]})]})})]})},Ua=()=>{const{id:t}=Hs(),s=O(h=>h.users.user),[n,m]=c.useState("1"),[d,l]=c.useState([]),a=JSON.parse(t);c.useEffect(()=>{a!=null&&a.value&&m(a.value)},[a.value]);const r=[{label:e.jsx("div",{style:{color:"red"},children:"Seccion 1"}),value:"1"},{label:e.jsx("div",{style:{color:"red"},children:"Seccion 2"}),value:"2"},{label:e.jsx("div",{style:{color:"red"},children:"Seccion 3"}),value:"3"},{label:e.jsx("div",{style:{color:"red"},children:"Seccion 4"}),value:"4"},{label:e.jsx("div",{style:{color:"green"},children:"Seccion 5"}),value:"5"},{label:e.jsx("div",{style:{color:"green"},children:"Seccion 6"}),value:"6"},{label:e.jsx("div",{style:{color:"blue"},children:"Seccion 7"}),value:"7"},{label:e.jsx("div",{style:{color:"blue"},children:"Seccion 8"}),value:"8"}];return e.jsxs("div",{className:"pageContainer",children:[e.jsx(Y,{className:"d-flex justify-content-center",children:e.jsx(Ys,{options:r,value:n,onChange:m,size:"medium"})}),e.jsxs(Y,{children:[n==="1"&&e.jsx(Pa,{value:n,setValue:m,number:a==null?void 0:a.id,show:d,setShow:l}),n==="2"&&d.includes("2")&&e.jsx(Fa,{value:n,setValue:m,number:a==null?void 0:a.id,show:d,setShow:l}),n==="3"&&d.includes("3")&&e.jsx(Oa,{value:n,setValue:m,number:a==null?void 0:a.id,show:d,setShow:l}),n==="4"&&d.includes("4")&&e.jsx(Ta,{value:n,setValue:m,number:a==null?void 0:a.id,show:d,setShow:l}),n==="5"&&B.includes(s==null?void 0:s.role)&&e.jsx(Ra,{value:n,setValue:m,number:a==null?void 0:a.id,show:d,setShow:l}),n==="6"&&B.includes(s==null?void 0:s.role)&&e.jsx(Ma,{value:n,setValue:m,number:a==null?void 0:a.id,show:d,setShow:l}),n==="7"&&B.includes(s==null?void 0:s.role)&&e.jsx(La,{value:n,setValue:m,number:a==null?void 0:a.id,show:d,setShow:l}),n==="8"&&B.includes(s==null?void 0:s.role)&&e.jsx(Da,{value:n,setValue:m,number:a==null?void 0:a.id,show:d,setShow:l})]})]})},qa="/assets/LogoHorizontal-DH1awmUX.svg",$a=({children:t})=>e.jsx(e.Fragment,{children:e.jsx("div",{className:"container-fluid layoutContainer",children:e.jsx("div",{className:"subContent",children:e.jsx("div",{className:"abs-center",children:e.jsxs(Y,{children:[e.jsx(U,{className:"colStyle",children:e.jsx("div",{className:"",style:{marginBottom:20,marginTop:20},children:e.jsx("img",{src:qa,alt:"",className:"brandLogo"})})}),e.jsx(U,{className:"colStyle",children:e.jsxs(Ce,{className:"mainBox",children:[e.jsx("div",{className:"line"}),e.jsx("p",{className:"textStyle cardSubTitle",children:"¡Welcome!"}),e.jsx("p",{className:"textStyle text5 text-center mt-3",children:"Login to continue"}),e.jsx("div",{className:"line"}),e.jsx("div",{className:"formContainer pt-4",children:t})]})})]})})})})}),Ha=()=>{const{loading:t}=O(l=>l.auth),{login:s}=ne(),[n]=x.useForm(),m=[{label:"Email",name:"email",type:"email",placeholder:"Email"},{label:"Password",name:"password",type:"password",placeholder:"Password"}],d=l=>{const a={email:l.email,password:l.password};s(a)};return e.jsx(e.Fragment,{children:e.jsx(pe,{fields:m,onFinish:d,formName:n,buttonTitle:t?"Loading...":"Login",name:"login"})})},Ya=()=>e.jsx(e.Fragment,{children:e.jsx($a,{children:e.jsx(Ha,{})})}),ns=()=>{var w;c.useState([]);const t=O(j=>j.tenants.tenants);c.useState(!0),ie();const{data:s,isSuccess:n,error:m,isFetching:d,refetch:l}=Ft({}),[a,r]=c.useState({}),[h,v]=c.useState({}),o=(j,i,p)=>{console.log("Various parameters",j,i,p),r(i),v(p)};t==null||t.map(j=>({text:j.name,value:j.name}));const y=(w=s==null?void 0:s.data)==null?void 0:w.map(j=>{var i,p;return{key:j._id,name:j.assetName,internalId:j.internalId,location:(i=j.location)==null?void 0:i.locationName,city:(p=j.location)==null?void 0:p.city}}),k=[{title:"Name",dataIndex:"name",key:"name",render:j=>e.jsx("a",{children:j}),sorter:(j,i)=>{var p,u;return((p=j.name)==null?void 0:p.length)-((u=i.name)==null?void 0:u.length)}},{title:"Serial Equipo",dataIndex:"internalId",key:"internalId"},{title:"Ubicación",dataIndex:"location",key:"location"},{title:"Ciudad",dataIndex:"city",key:"city"},{title:"Action",key:"action",render:(j,i)=>e.jsxs(he,{size:"middle",children:[e.jsx(xe,{style:{fontSize:20,color:"#008000",marginRight:10},onClick:()=>C(i)}),e.jsx(je,{style:{fontSize:20,color:"#FF0000",marginRight:10},onClick:()=>g(i)})]})}],C=j=>{console.log(j)},g=j=>{console.log(j.tenant.length)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(te,{dataSource:y,columns:k,onChange:o})})})})})},za=["vehicle","property","equipment","machinery","other"],Va=()=>{const[t]=x.useForm(),{credentials:s}=ne(),n=O(f=>f.locations.locations),[m,d]=c.useState(!1);c.useState(null);const[l,a]=c.useState(!1),[r,h]=c.useState(!1),[v,o]=c.useState(null),[y,{isSuccess:k,error:C,reset:g}]=Ot(),w=n==null?void 0:n.map(f=>({label:f.locationName,value:f._id}));console.log("locations",w);const j=[{label:"Nombre",name:"assetName",type:"text",placeholder:"Nombre"},{label:"Serial Equipo",name:"internalId",type:"text",placeholder:"Serial del equipo"},{label:"Tipo",name:"assetType",type:"select",placeholder:"Tipo",options:za.map(f=>({label:f,value:f}))},{label:"Ubicacion",name:"location",type:"select",placeholder:"Ubicacion",options:n.map(f=>({label:f.locationName,value:f._id}))}],i=()=>{h(!1),a(!1),d(!0)},p=()=>{h(!1),a(!1),t.resetFields(),d(!1)},u=()=>{h(!1),a(!1),t.resetFields(),d(!1)},N=f=>{const S={...f,isActive:!0,tenant:s==null?void 0:s.tenantId};y(S).unwrap(),g()};return c.useEffect(()=>{k&&(a(!0),o("Asset created successfully")),C&&(h(!0),o("Error creating asset"))},[k,C]),e.jsxs(e.Fragment,{children:[e.jsx(P,{type:"primary",onClick:i,children:"Add Asset"}),e.jsxs(ae,{open:m,forceRender:!0,title:"Add assets",onOk:p,onCancel:u,cancelButtonProps:{form:t,key:"cancel",htmlType:"reset"},footer:[e.jsx(P,{type:"default",onClick:u,children:"Exit"},"exit")],children:[e.jsx(pe,{fields:j,onFinish:N,name:"assetForm",buttonTitle:"Submit",formName:t}),r&&be({message:v}),l&&Se({message:v})]})]})},_a=()=>e.jsxs(e.Fragment,{children:[e.jsxs(Y,{children:[e.jsx(U,{span:12,className:"text-center",children:e.jsx("h4",{children:"Assets administration"})}),e.jsx(U,{span:12,className:"text-center",children:e.jsx(Va,{})})]}),e.jsx(Y,{className:"pt-3",children:e.jsx(U,{span:24,children:e.jsx(ns,{})})})]}),Ba=()=>e.jsx("div",{children:"Maintenance"}),Ga=()=>e.jsxs(e.Fragment,{children:[e.jsxs(Y,{children:[e.jsx(U,{span:12,className:"text-center",children:e.jsx("h4",{children:"Assets maintenance"})}),e.jsx(U,{span:12,className:"text-center",children:e.jsx(Ba,{})})]}),e.jsx(Y,{className:"pt-3",children:e.jsx(U,{span:24,children:e.jsx(ns,{})})})]}),Qa=()=>{const[t,s]=c.useState(!0),[n,m]=c.useState(!1),d=l=>{switch(l){case 1:s(!0),m(!1);break;case 2:s(!1),m(!0);break;default:s(!0),m(!1);break}};return e.jsxs("div",{className:"pageContainer",children:[e.jsx("div",{className:"tabs",children:e.jsxs("ul",{className:"tab-container",children:[e.jsx("li",{id:"tab1",className:t?"tab activeItem activeList":"tab",children:e.jsx("a",{onClick:()=>d(1),children:"Administración"})}),e.jsx("li",{id:"tab2",className:n?"tab activeItem activeList":"tab",children:e.jsx("a",{onClick:()=>d(2),children:"Mantenimiento"})})]})}),e.jsxs("div",{className:"blockBorder",children:[t&&e.jsx(_a,{}),n&&e.jsx(Ga,{})]})]})},ve=zs({reducer:{auth:lt,users:jt,tenants:It,assets:Lt,locations:St,permits:Ia,[Q.reducerPath]:Q.reducer},middleware:t=>t().concat(Q.middleware),devTools:!0});Vs(ve.dispatch);const Ja=()=>(c.useEffect(()=>{console.log("subscribing");const t=ve.dispatch(G.endpoints.getLocations.initiate()),s=ve.dispatch(z.endpoints.getPermits.initiate());return()=>{console.log("unsubscribing"),t.unsubscribe(),s.unsubscribe()}},[]),e.jsx(Ye,{})),Ka=()=>e.jsx("div",{className:"pageContainer",children:e.jsx("div",{className:"tabs",children:e.jsxs("div",{className:"tab-container",children:[e.jsxs("div",{id:"tab1",className:"tab",children:[e.jsx("a",{href:"#tab1",children:"Seccion 1"}),e.jsx("div",{className:"tab-content",children:e.jsx("p",{className:"textSubtitle",children:"INFORMACION GENERAL"})})]}),e.jsxs("div",{id:"tab2",className:"tab",children:[e.jsx("a",{href:"#tab2",children:"Seccion 2"}),e.jsx("div",{className:"tab-content",children:e.jsx("p",{className:"textSubtitle",children:"ANALISIS DE RIESGO, CERTIFICADOS DE APOYO Y DOCUMENTOS SOPORTE REQUERIDOS"})})]}),e.jsxs("div",{id:"tab3",className:"tab",children:[e.jsx("a",{href:"#tab3",children:"Seccion 3"}),e.jsx("div",{className:"tab-content",children:e.jsx("p",{className:"textSubtitle",children:"MONITOREO DE GASES"})})]})]})})}),Wa=()=>{x.useForm();const t=ie(),s=O(p=>p.permits.permits),n=Z();c.useState(!0);const[m,d]=c.useState(!1),[l,a]=c.useState(!1);c.useState(null);const[r,h]=c.useState(0),[v,o]=c.useState({status:"pending",section1:{completed:!1},section2:{completed:!1},section3:{completed:!1},section4:{completed:!1},section5:{completed:!1},section6:{completed:!1},more:{}}),[y,{isSuccess:k,error:C,reset:g}]=Ca(),w=()=>{const p=(s==null?void 0:s.length)>0?s[s.length-1].formNumber:0,u=s.find(N=>N.formNumber===p);(u==null?void 0:u.formNumber)>0&&(u==null?void 0:u.status)!=="pending"?(y(v).then(N=>{t(Ae.setPermit(N.data.data))}),h(p+1),i(p+1)):p===0?(y(v).then(N=>{t(Ae.setPermit(N.data.data))}),h(p),i(p+1)):(console.log("Permiso creado completado",u),t(Ae.setPermit(u)),h(u==null?void 0:u.formNumber),i(u==null?void 0:u.formNumber))},j=()=>{w(),a(!1),d(!1)},i=p=>{const u=JSON.stringify({id:p,value:null});n(`/form/${u}`)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsx("div",{className:"col-md",children:e.jsx(P,{type:"primary",className:"",onClick:j,children:"Nuevo permiso"})})})})},Xa=()=>{var L;const t=Z(),s=O(b=>b.users.user),[n,m]=c.useState([]),[d,l]=c.useState(!0),[a,r]=c.useState(null),{data:h,isLoading:v,error:o}=Aa(),[y,k]=c.useState(!1),[C,g]=c.useState(!1),[w,j]=c.useState(!1),{data:i,isSuccess:p,error:u}=ba(a,{skip:d});c.useEffect(()=>{const b=JSON.parse(localStorage.getItem("tempForm"));(b==null?void 0:b.length)>0&&m(b)},[]);const N=(L=h==null?void 0:h.data)==null?void 0:L.map(b=>({key:b._id,formNumber:b.formNumber,status:b.status,date:D(b.createdAt).format("DD/MM/YYYY HH:MM"),company:b.company||"N/A"})),f=e.jsxs("div",{className:"",children:[e.jsx("p",{className:"",children:"Completar formulario"}),e.jsx("p",{className:"",children:"ó Editar antes de su aprobación"})]}),S=[{title:"Número",dataIndex:"formNumber",key:"formNumber",render:b=>e.jsx("a",{children:b})},{title:"Fecha",dataIndex:"date",key:"date"},{title:"Estado",dataIndex:"status",key:"status"},{title:"Compañía",dataIndex:"company",key:"company"},{title:"Acciones",key:"action",render:(b,F)=>e.jsxs(he,{size:"middle",children:[e.jsx(ce,{title:"Editar / Completar",content:f,children:e.jsx(xe,{style:{fontSize:20,color:"#008000",marginRight:10},onClick:()=>E(F)})}),e.jsx(ce,{title:"Eliminar",children:e.jsx(je,{style:{fontSize:20,color:"#FF0000",marginRight:10},onClick:()=>M(F)})}),B.includes(s==null?void 0:s.role)&&F.status==="waiting"&&e.jsx(ce,{title:"Aprobar",children:e.jsx(He,{style:{fontSize:20,color:"#0000FF"},onClick:()=>I(F)})}),B.includes(s==null?void 0:s.role)&&F.status==="approved"&&e.jsx(ce,{title:"Completar",children:e.jsx(_s,{style:{fontSize:20,color:"#008000"},onClick:()=>A(F)})}),B.includes(s==null?void 0:s.role)&&F.status==="completed"&&e.jsx(ce,{title:"Vista Previa",children:e.jsx(Bs,{style:{fontSize:20,color:"#FA9C0C"},onClick:()=>R(F)})})]})}],E=b=>{r(b.key),l(!1)},I=b=>{r(b.key),l(!1),k(!0)},A=b=>{r(b.key),l(!1),g(!0)},R=b=>{r(b.key),l(!1),j(!0)};c.useEffect(()=>{if(i){let b={};y?(b=JSON.stringify({id:i==null?void 0:i.formNumber,value:"5"}),t(`/form/${b}`)):C?(b=JSON.stringify({id:i==null?void 0:i.formNumber,value:"8"}),t(`/form/${b}`)):w?(b=JSON.stringify({id:i==null?void 0:i.formNumber,value:""}),t(`/preview/${b}`)):(b=JSON.stringify({id:i==null?void 0:i.formNumber,value:null}),t(`/form/${b}`))}},[p]);const M=b=>{console.log(b)};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container",children:e.jsx("div",{className:"row",children:e.jsx("div",{className:"col-12",children:e.jsx(te,{dataSource:N,columns:S})})})})})},Za=()=>e.jsxs(e.Fragment,{children:[e.jsxs(Y,{children:[e.jsx(U,{span:12,className:"text-center pt-2",children:e.jsx("h4",{children:"Administración de permisos"})}),e.jsx(U,{span:12,className:"text-center pt-2",children:e.jsx(Wa,{})})]}),e.jsx(Y,{className:"pt-3",children:e.jsx(U,{span:24,children:e.jsx(Xa,{})})})]}),en=()=>{const t="https://myprop.joselimardo.com",s=O(r=>r.permits.permit),{token:n}=ne(),m="DD/MM/YYYY HH:mm",d=async()=>{const h=await st("save-pdf",n,s),v=`${t}${h.data.pdfUrl}`;console.log("RESP",v)},l=()=>{const r="Permiso"+(s==null?void 0:s.formNumber)+".pdf",h=new Gs;h.text("Permiso de trabajo en caliente",10,10),h.text("Número: "+(s==null?void 0:s.formNumber),150,10),h.text("Fecha: "+D(s==null?void 0:s.updatedAt).format(m),10,20),h.text("Compañia que requiere el sercicio: "+(s==null?void 0:s.section1.company),10,30),h.text("Instalacion: "+(s==null?void 0:s.section1.location),10,40),h.text("Area: "+(s==null?void 0:s.section1.area),10,50),h.text("Equipos a intervenir: "+(s==null?void 0:s.section1.equipment),10,60),h.text("Alcance del trabajo: "+(s==null?void 0:s.section1.alcance),10,70),h.text("Nivel potencial de peligro identificado: "+(s==null?void 0:s.section1.warning),10,80),h.text("Equipos y herramientas a uasr: "+(s==null?void 0:s.section1.tools),10,90),d(),h.save(r)},a=()=>{var h;const r=(h=s==null?void 0:s.more)==null?void 0:h.file;r&&window.open(r,"_blank")};return e.jsxs("div",{children:[e.jsx("h3",{children:"Vista Previa"}),e.jsxs("div",{className:"row",children:[e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Fecha: ",D(s==null?void 0:s.updatedAt).format(m)]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Número de permiso: ",s==null?void 0:s.formNumber]})})]}),e.jsx("hr",{className:""}),e.jsx("p",{className:"",children:"SECCION 1"}),e.jsx("hr",{className:""}),e.jsxs("div",{className:"row pt-2",children:[e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Compañia que requiere el sercicio: ",s==null?void 0:s.section1.company]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Instalacion: ",s==null?void 0:s.section1.location]})})]}),e.jsxs("div",{className:"row pt-2",children:[e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Area: ",s==null?void 0:s.section1.area]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{children:["Equipos a intervenir: ",s==null?void 0:s.section1.equipment]})})]}),e.jsxs("div",{className:"row pt-2",children:[e.jsx("div",{className:"col",children:e.jsxs("p",{className:"",children:[" Alcance del trabajo: ",s==null?void 0:s.section1.alcance]})}),e.jsx("div",{className:"col",children:e.jsxs("p",{className:"",children:["Nivel potencial de peligro identificado: ",s==null?void 0:s.section1.warning]})})]}),e.jsx("div",{className:"row pt-2",children:e.jsx("div",{className:"col-6",children:e.jsxs("p",{className:"",children:["Equipos y herramientas a uasr: ",s==null?void 0:s.section1.tools]})})}),e.jsx("hr",{className:""}),e.jsx("p",{className:"",children:"SECCION 2"}),e.jsx("hr",{className:""}),e.jsx("div",{className:"row",children:e.jsxs("div",{className:"d-flex justify-content-around ",children:[e.jsx(P,{type:"primary",onClick:l,style:{width:200},children:"Descargar PDF"}),e.jsx(P,{type:"primary",onClick:a,style:{width:200},children:"Ver Evidencia"})]})})]})};function sn(){const{isLoggedIn:t,logout:s}=ne(),[n,m]=c.useState(!1);c.useEffect(()=>{localStorage.setItem("lastActivity",Date.now().toString());const r=2*60*60*1e3,h=setTimeout(()=>{m(!0),s()},r),v=()=>{localStorage.setItem("lastActivity",Date.now().toString()),clearTimeout(h),setTimeout(()=>{m(!0),s()},r)};return document.addEventListener("mousemove",v),document.addEventListener("keydown",v),()=>{document.removeEventListener("mousemove",v),document.removeEventListener("keydown",v),clearTimeout(h)}},[]),c.useEffect(()=>{n===!0&&da({title:"Sesión expirada",content:"Su sesión ha expirado. Por favor, vuelva a iniciar sesión."})},[n]);const d=Fe(Oe(e.jsx(H,{element:e.jsx(Ja,{}),children:e.jsxs(H,{element:e.jsx(oa,{}),errorElement:e.jsx(Yt,{}),children:[e.jsx(H,{path:"/",element:e.jsx(Ht,{})}),e.jsx(H,{path:"/settings",element:e.jsx(va,{})}),e.jsx(H,{path:"/assets-settings",element:e.jsx(Qa,{})}),e.jsx(H,{path:"/reports",element:e.jsx(ya,{})}),e.jsx(H,{path:"/form/:id",element:e.jsx(Ua,{})}),e.jsx(H,{path:"/hot-work",element:e.jsx(Ka,{})}),e.jsx(H,{path:"/add-user",element:e.jsx(ss,{})}),e.jsx(H,{path:"/permissions",element:e.jsx(Za,{})}),e.jsx(H,{path:"/preview/:id",element:e.jsx(en,{})}),e.jsx(H,{path:"*",element:e.jsx(Te,{})})]})}))),l=Fe(Oe(e.jsxs(H,{children:[e.jsx(H,{path:"/",element:e.jsx(Ya,{})}),e.jsx(H,{path:"*",element:e.jsx(Te,{})})]}))),a=t?d:l;return e.jsx(e.Fragment,{children:e.jsx(Qs,{router:a})})}ye.defaults.baseURL="https://myprop.joselimardo.com/api";console.log("API SERVER: ",ye.defaults.baseURL);Js.createRoot(document.getElementById("root")).render(e.jsx(Ks.StrictMode,{children:e.jsx(Ws,{store:ve,children:e.jsx(Dt,{children:e.jsx(sn,{})})})}));
