import{a as F,u as _e,b as de,c as ue,r as h,d as we,S as Oe,j as e,M as be,N as Y,C as ke,O as ae,e as ne,f as E,L as A,I as re,T as Re,A as oe,g as Pe,h as H,D as Fe,i as X,k as De,l as Ue,m as Me,n as Ge,o as Ce,R as b,E as ze,p as $e,q as Ve,s as Be,P as qe,t as He,v as Z,w as Je,F as y,x as I,y as We,z as Le,B as Ze,G as Ke,H as Qe,J as Ye,K as Xe,Q as es,U as ss,V as U,W as ts,X as as,Y as me,Z as ce,_ as ns,$ as rs,a0 as os,a1 as ls,a2 as is,a3 as he,a4 as j,a5 as cs,a6 as ds,a7 as us,a8 as ms,a9 as hs}from"./vendor-c93ea81a.js";(function(){const a=document.createElement("link").relList;if(a&&a.supports&&a.supports("modulepreload"))return;for(const s of document.querySelectorAll('link[rel="modulepreload"]'))r(s);new MutationObserver(s=>{for(const n of s)if(n.type==="childList")for(const i of n.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&r(i)}).observe(document,{childList:!0,subtree:!0});function o(s){const n={};return s.integrity&&(n.integrity=s.integrity),s.referrerPolicy&&(n.referrerPolicy=s.referrerPolicy),s.crossOrigin==="use-credentials"?n.credentials="include":s.crossOrigin==="anonymous"?n.credentials="omit":n.credentials="same-origin",n}function r(s){if(s.ep)return;s.ep=!0;const n=o(s);fetch(s.href,n)}})();const ps="modulepreload",xs=function(t){return"/"+t},pe={},L=function(a,o,r){if(!o||o.length===0)return a();const s=document.getElementsByTagName("link");return Promise.all(o.map(n=>{if(n=xs(n),n in pe)return;pe[n]=!0;const i=n.endsWith(".css"),p=i?'[rel="stylesheet"]':"";if(!!r)for(let l=s.length-1;l>=0;l--){const f=s[l];if(f.href===n&&(!i||f.rel==="stylesheet"))return}else if(document.querySelector(`link[href="${n}"]${p}`))return;const d=document.createElement("link");if(d.rel=i?"stylesheet":ps,i||(d.as="script",d.crossOrigin=""),d.href=n,document.head.appendChild(d),i)return new Promise((l,f)=>{d.addEventListener("load",l),d.addEventListener("error",()=>f(new Error(`Unable to preload CSS for ${n}`)))})})).then(()=>a()).catch(n=>{const i=new Event("vite:preloadError",{cancelable:!0});if(i.payload=n,window.dispatchEvent(i),!i.defaultPrevented)throw n})},gs="/assets/LogoHorizontal-ab16c970.png",js="CREATE_PROFILE",Ae="REGISTER_SUCCESS",ys="REGISTER_FAIL",Ie="LOGIN_SUCCESS",fs="LOGIN_FAIL",Te="LOGOUT_SUCCESS",vs="LOGOUT_FAIL",Es="GET_ALL_USERS",Ss="GET_ALL_USERS_FAIL",_s="GET_USER",bs="GET_USER_FAIL",Cs="CREATE_PROFILE",Ls="CREATE_PROFILE_FAIL",As="UPDATE_PROFILE",Is="UPDATE_PROFILE_FAIL",Ts="CREATE_COMPENSATION",Ns="CREATE_COMPENSATION_FAIL",ws="GET_COMPENSATION",Os="GET_COMPENSATION_FAIL",ks="GET_ALL_COMPENSATION",Rs="GET_ALL_COMPENSATION_FAIL",Ps="CREATE_ASSET",Fs="CREATE_ASSET_FAIL",Ds="GET_ASSET",Us="GET_ASSET_FAIL",Ms="GET_ALL_ASSET",Gs="GET_ALL_ASSET_FAIL",zs="UPDATE_ASSET",$s="UPDATE_ASSET_FAIL";function Ut(t){return console.log("axios.defaults.baseURL",F.defaults.baseURL),console.log("Create en actions",t),async a=>{try{let o=await F.post("/users",t);const r=o.data;return console.log("Response",r),a({type:Ae,payload:o})}catch(o){return console.log("ERROR: ",o.response.data),a({type:ys,payload:o.response.data})}}}function Vs(t){return console.log("axios.defaults.baseURL",F.defaults.baseURL),async a=>{try{const r=(await F.post("/userlogin",t)).data;return r.data.token&&(localStorage.setItem("user",JSON.stringify(r.data)),localStorage.setItem("profile",JSON.stringify(r.data.user))),a({type:Ie,payload:r})}catch(o){return console.log(o),a({type:fs,payload:o.response.data})}}}function Bs(t){return async a=>{try{return localStorage.removeItem("user"),a({type:Te,payload:[]})}catch(o){return console.log(o),a({type:vs,payload:o})}}}const qs=t=>{const a={},o=/(?=.*[0-9])/;return t.email?/^[A-Z0-9._%+-]+@[A-Z0-9.-]+\.[A-Z]{2,4}$/i.test(t.email)||(a.email="Correo electronico incorrecto"):a.email="Obligatorio",t.password?t.password.length<8?a.password="*Password must be 8 characters long.":o.test(t.password)||(a.password="La contraseña debe tener mínimo 1 número."):a.password="Obligatorio",a};function xe(){const t=_e();de();const a=ue(l=>l.auth.isLoggedIn);h.useState(a);const[o,r]=h.useState(!1),[s,n]=h.useState(""),i=()=>{r(!0)},p=()=>{r(!1)},g=()=>{r(!1)},d=we({initialValues:{email:"",password:""},validate:qs,onSubmit:({email:l,password:f})=>{t(Vs({email:l,password:f})).then(x=>{x.payload.status===200?n(x.payload.message):(n(x.payload.message),i())}).catch(x=>{Oe.fire(x)})}});return e.jsx(e.Fragment,{children:e.jsx("div",{className:"",children:e.jsxs("div",{className:"",children:[e.jsx("div",{className:"grid alignItem",children:e.jsxs("div",{className:"register",style:{marginTop:30,marginBottom:30},children:[e.jsx("img",{src:gs,className:"siteLogo",width:"306",height:"84",alt:"siteLogo"}),e.jsx("p",{children:"Inicia sesión a continuación con tu usuario y contraseña "}),e.jsxs("form",{className:"form ",style:{marginTop:"3rem"},onSubmit:d.handleSubmit,children:[e.jsx("label",{htmlFor:"email",children:"Usuario (email)"}),e.jsxs("div",{className:"formField",children:[e.jsx("input",{type:"text",name:"email",placeholder:"Usuario",onChange:d.handleChange,onBlur:d.handleBlur,value:d.values.email}),d.touched.email&&d.errors.email&&e.jsx("span",{style:{color:"red",display:"block"},children:d.errors.email})]}),e.jsx("label",{htmlFor:"password",children:"Contraseña"}),e.jsxs("div",{className:"formField",children:[e.jsx("input",{type:"password",name:"password",placeholder:"Contraseña",onChange:d.handleChange,onBlur:d.handleBlur,value:d.values.password}),d.touched.password&&d.errors.password&&e.jsx("span",{style:{color:"red",display:"block"},children:d.errors.password})]}),e.jsx("div",{className:"formField",style:{marginTop:"8rem"},children:e.jsx("input",{type:"submit",value:"INICIAR SESIÓN",className:"btn btn-success btnLanding"})})]}),e.jsxs("p",{children:["¿Aún no tienes cuenta? ",e.jsx("a",{href:"/register",children:"Regístrate"})]})]})}),e.jsx(be,{title:"Basic Modal",open:o,onOk:p,onCancel:g,children:e.jsx("p",{children:s})})]})})})}const ge="/assets/Logo Horizontal-99ad676a.png",Hs="/assets/bell-bc1913a6.svg",Js="/assets/settings-12873a6e.svg";function Ws(){var k;const t=_e(),a=de(),o=ue(_=>_.auth),r=(k=JSON.parse(localStorage.getItem("user")))==null?void 0:k.user,[s,n]=h.useState(!1);let i;o.avatar!==""&&(i=o.avatar);const[p,g]=h.useState(null),d=!!p,l=_=>{g(_.currentTarget)},f=()=>{g(null)},x=o.isLoggedIn,T=r==null?void 0:r.role,u="lg",v=()=>{t(Bs()).then(_=>{console.log("Respuesta del logout: ",_),a("/")})},M=()=>{a("/login")},O=()=>{a("/register")},N=()=>{a("/user-dashboard")},C=()=>{a("/")},w=()=>{a("/profile")};return h.useEffect(()=>{function _(){n(window.innerWidth<=768)}return _(),window.addEventListener("resize",_),()=>{window.removeEventListener("resize",_)}},[]),e.jsx(e.Fragment,{children:e.jsx(Y,{expand:u,className:"navBar-Container",sticky:"top",children:e.jsxs(ke,{fluid:!0,children:[e.jsx(Y.Brand,{href:"/",children:e.jsx("img",{src:ge,alt:"MyPropChain",height:"30",className:"d-inline-block align-top"})}),e.jsx(Y.Toggle,{"aria-controls":`offcanvasNavbar-expand-${u}`}),e.jsxs(Y.Offcanvas,{id:`offcanvasNavbar-expand-${u}`,"aria-labelledby":`offcanvasNavbarLabel-expand-${u}`,placement:"end",children:[e.jsx(ae.Header,{className:`${s?"d-flex align-items-start":""}`,closeButton:!0,children:e.jsx(ae.Title,{id:`offcanvasNavbarLabel-expand-${u}`,children:e.jsx("img",{src:ge,alt:"MyPropChain",width:"200",className:"d-inline-block align-top"})})}),e.jsxs(ae.Body,{className:`${s?"d-flex flex-column":""}`,children:[e.jsxs(ne,{className:`${s?"justify-content-start":"justify-content-center"}  flex-grow-1 pe-3 gap-3`,children:[e.jsx(ne.Link,{href:"/",target:"_blank",children:"Inicio"}),x?e.jsxs(E,{title:"Mi Cuenta",id:`offcanvasNavbarDropdown-expand-${u}`,children:[e.jsx(E.Item,{as:A,to:"/user-dashboard",children:"Dashboard"}),e.jsx(E.Item,{as:A,to:"/user-dashboard",children:"Activos"}),e.jsx(E.Divider,{}),e.jsx(E.Item,{as:A,to:"/profile",children:"Perfil"}),x&&T==="admin"?e.jsx(E.Divider,{}):null,x&&T==="admin"?e.jsx(E.Item,{as:A,to:"/admin-dashboard",children:"Admin panel"}):null]}):null,x?e.jsxs(E,{title:"Activos",id:`offcanvasNavbarDropdown-expand-${u}`,children:[e.jsx(E.Item,{as:A,to:"/assets",children:"Crear Activo"}),e.jsx(E.Item,{as:A,to:"/assets",children:"Consultar Activo"})]}):null,x?e.jsxs(E,{title:"Compensaciones",id:`offcanvasNavbarDropdown-expand-${u}`,children:[e.jsx(E.Item,{as:A,to:"/compensations",children:"Crear Compensación"}),e.jsx(E.Item,{as:A,to:"/consult-compensations",children:"Consultar Compensaciones"})]}):null,x?e.jsxs(E,{title:"Managment",id:`offcanvasNavbarDropdown-expand-${u}`,children:[e.jsx(E.Item,{as:A,to:"evidence",children:"Evidencias"}),e.jsx(E.Item,{as:A,to:"gei-control",children:"Gestión de emisiones GEI"}),e.jsx(E.Item,{as:A,to:"/",children:"Modulo OKR"})]}):null]}),e.jsxs(ne,{className:`${s?"justify-content-evenly":""} gap-3 d-flex flex-row`,children:[e.jsx(re,{onClick:C,className:"cursor-pointer",children:e.jsx("img",{src:Js,alt:"Settings",className:"cursor-pointer"})}),e.jsx(re,{className:"cursor-pointer",children:e.jsx("img",{src:Hs,alt:"Settings",className:"cursor-pointer"})}),e.jsx(Re,{title:"Account settings",children:e.jsx(re,{onClick:l,size:"small","aria-controls":d?"account-menu":void 0,"aria-haspopup":"true","aria-expanded":d?"true":void 0,children:e.jsx(oe,{sx:{width:32,height:32},children:i})})}),e.jsxs(Pe,{anchorEl:p,id:"account-menu",open:d,onClose:f,onClick:f,PaperProps:{elevation:0,sx:{overflow:"visible",filter:"drop-shadow(0px 2px 8px rgba(0,0,0,0.32))",mt:1.5,"& .MuiAvatar-root":{width:32,height:32,ml:-.5,mr:1},"&:before":{content:'""',display:"block",position:"absolute",top:0,right:14,width:10,height:10,bgcolor:"background.paper",transform:"translateY(-50%) rotate(45deg)",zIndex:0}}},transformOrigin:{horizontal:"right",vertical:"top"},anchorOrigin:{horizontal:"right",vertical:"bottom"},children:[x?e.jsxs(H,{onClick:w,children:[e.jsx(oe,{})," Perfil"]}):null,e.jsxs(H,{onClick:N,children:[e.jsx(oe,{})," Mi Cuenta"]}),e.jsx(Fe,{}),e.jsxs(H,{onClick:O,children:[e.jsx(X,{children:e.jsx(De,{fontSize:"small"})}),"Agregar cuenta nueva"]}),e.jsxs(H,{onClick:C,children:[e.jsx(X,{children:e.jsx(Ue,{fontSize:"small"})}),"Configuración"]}),x?e.jsxs(H,{onClick:v,children:[e.jsx(X,{children:e.jsx(Me,{fontSize:"small"})}),"Logout"]}):e.jsxs(H,{onClick:M,children:[e.jsx(X,{children:e.jsx(Ge,{fontSize:"small"})}),"Login"]})]})]})]})]})]})},u)})}const Zs="/assets/LogoPart2-62813117.png",{Header:Mt,Content:Ks,Footer:Qs}=Ce;function Ys({children:t}){const a={Height:"100vh",minWidth:"95%",overflow:"hidden",margin:"0"},o={textAlign:"center",height:"100vh",backgroundColor:"#fff",overflow:"auto"},r={backgroundColor:"#fff"};return e.jsx(e.Fragment,{children:e.jsxs(Ce,{style:{height:"100vh",overflow:"none"},children:[e.jsx(Ws,{}),e.jsx(Ks,{style:o,children:e.jsx("div",{className:"d-flex justify-content-center",children:e.jsx("div",{style:a,children:t})})}),e.jsx(Qs,{style:r,children:e.jsxs("div",{className:"d-flex flex-row text-center align-items-center justify-content-center",children:[e.jsx("div",{className:"me-3",children:"MyPropChain"}),e.jsx("a",{href:"/",className:"",children:e.jsx("img",{src:Zs,alt:"",className:"",style:{width:30}})}),e.jsx("small",{className:"d-block ms-3 text-body-secondary",children:"© 2022–2023"})]})})]})})}function Xs(){return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"d-flex flex-column justify-content-center align-items-center pt-5",children:[e.jsx("h1",{children:"404"}),e.jsx("h3",{children:"Oops! La página a la que intenta ingresar"}),e.jsx("h3",{children:"No existe o no tiene permiso de acceso."}),e.jsx("p",{children:"Aqui hay unos links que puede ayudarlo:"}),e.jsx(A,{to:"/",children:"Home"}),e.jsx(A,{to:"/contact",children:"Contact"})]})})}class et extends b.Component{constructor(a){super(a),this.state={tieneError:!1,mensajeError:""}}static getDerivedStateFromError(a){return{tieneError:!0,mensajeError:a.message}}componentDidCatch(a){console.log("Component did catch:",a.message)}render(){return this.state.tieneError?e.jsxs("div",{className:"px-4 py-2 m-4",children:[e.jsx("h1",{className:"mt-2 font-bold text-lg mb-1",children:"Hubo un error:"}),e.jsxs("p",{children:[" ",this.state.mensajeError," "]}),e.jsxs("button",{className:"px-4 py-2 rounded bg-blue-800 hover:bg-blue-700 active:outline text-sm",onClick:()=>window.location.href="/",children:["Recargar la página"," "]})]}):this.props.children}}function K(t){function a(G,V){return G>>>V|G<<32-V}for(var o=Math.pow,r=o(2,32),s="length",n,i,p="",g=[],d=t[s]*8,l=K.h=K.h||[],f=K.k=K.k||[],x=f[s],T={},u=2;x<64;u++)if(!T[u]){for(n=0;n<313;n+=u)T[n]=u;l[x]=o(u,.5)*r|0,f[x++]=o(u,1/3)*r|0}for(t+="";t[s]%64-56;)t+="\0";for(n=0;n<t[s];n++){if(i=t.charCodeAt(n),i>>8)return;g[n>>2]|=i<<(3-n)%4*8}for(g[g[s]]=d/r|0,g[g[s]]=d,i=0;i<g[s];){var v=g.slice(i,i+=16),M=l;for(l=l.slice(0,8),n=0;n<64;n++){var O=v[n-15],N=v[n-2],C=l[0],w=l[4],k=l[7]+(a(w,6)^a(w,11)^a(w,25))+(w&l[5]^~w&l[6])+f[n]+(v[n]=n<16?v[n]:v[n-16]+(a(O,7)^a(O,18)^O>>>3)+v[n-7]+(a(N,17)^a(N,19)^N>>>10)|0),_=(a(C,2)^a(C,13)^a(C,22))+(C&l[1]^C&l[2]^l[1]&l[2]);l=[k+_|0].concat(l),l[4]=l[4]+k|0}for(n=0;n<8;n++)l[n]=l[n]+M[n]|0}for(n=0;n<8;n++)for(i=3;i+1;i--){var $=l[n]>>i*8&255;p+=($<16?0:"")+$.toString(16)}return p}function je(t){const{header:a,content:o,fields:r,actions:s,onData:n,onDelete:i,onUpdate:p,onAdd:g,onShow:d,title:l,total:f,items:x,select:T}=t,[u,v]=h.useState([]),[M,O]=h.useState(1),[N]=h.useState(x),[C,w]=h.useState(null),[k,_]=h.useState("asc"),[$,G]=h.useState(!0);h.useEffect(()=>{t.content&&(v(t.content),G(!1))},[t.content]);const V=c=>{c===C?_(k==="asc"?"desc":"asc"):(w(c),_("asc"))};let J=[...u];C&&(J=J.sort((c,R)=>{const D=c[C],z=R[C];return k==="asc"?D.localeCompare(z):z.localeCompare(D)}));const W=M*N,Q=W-N,B=J.slice(Q,W),se=c=>{i(c)},m=c=>{p(c)},P=c=>{g(c)},q=c=>{d(c)},te=(c,R)=>{u[c].check=!u[c].check,n(o)};return e.jsx(e.Fragment,{children:$?e.jsx("div",{className:"d-flex justify-content-center align-items-center",style:{height:300},children:e.jsx("div",{className:"spinner-border text-primary",role:"status",children:e.jsx("span",{className:"sr-only",children:"Loading..."})})}):e.jsxs(e.Fragment,{children:[e.jsxs("table",{children:[e.jsx("thead",{style:{borderTop:"1px solid",borderBottom:"1px solid",background:"#fff",color:"#fff",position:"sticky",top:0,height:25},align:"left",children:e.jsxs("tr",{children:[T&&e.jsx("th",{className:"",style:{marginLeft:10,width:100,color:"#000"},children:"Select"}),a==null?void 0:a.map((c,R)=>e.jsxs("th",{onClick:D=>V(c.key),style:{cursor:"pointer",color:"#000"},children:[c.label," "]},R)),s&&e.jsx("th",{className:"",style:{paddingRight:20,color:"#000",textAlign:"right"},children:"Acciones"})]})}),e.jsx("tbody",{children:B==null?void 0:B.map((c,R)=>e.jsxs("tr",{className:"",style:{borderTop:"0.15rem solid #EEECED",lineHeight:"2em",color:"#000"},children:[T&&e.jsx("td",{className:"",style:{textAlign:"left",color:"#000"},children:e.jsx("div",{className:"d-flex align-items-center justify-content-center mt-2",children:e.jsx("input",{type:"checkbox",className:"",id:c.key,name:c.key,value:c.key,onChange:()=>te(R,c.key)})})},c.key),r==null?void 0:r.map((D,z)=>e.jsx("td",{style:{width:300,height:50,textAlign:"left",color:"#000"},children:c[`${D}`]?c[`${D}`]:"N/A"},z+1)),s&&e.jsx("td",{className:"",style:{textAlign:"right",color:"#000"},children:e.jsxs("div",{className:"actionStyle",children:[p&&e.jsx(ze,{style:{fontSize:20,color:"#008000",marginRight:10},onClick:()=>m(c.key)}),i&&e.jsx($e,{style:{fontSize:20,color:"#FF0000",marginRight:10},onClick:()=>se(c.key)}),g&&e.jsx(Ve,{style:{fontSize:20,color:"#4096ff",marginRight:10},onClick:()=>P(c.key)}),d&&e.jsx(Be,{style:{fontSize:20,color:"grey",marginRight:10},onClick:()=>q(c.key)})]})})]},c.key?c.key:c.id?c.id:c._id))})]}),u.length>0&&e.jsx("div",{className:"pt-3",children:e.jsx(qe,{pageSize:N,total:f,onChange:c=>{O(c)}})})]})})}F.defaults.baseURL="http://localhost:3001";async function st(t,a){try{return(await F.post(`/${a}`,t)).data}catch(o){console.log(o)}}async function le(t){try{return(await F.get(`/${t}`)).data}catch(a){console.log(a)}}async function ye(t,a){try{return(await F.get(`/${a}/${t}`)).data}catch(o){console.log(o)}}He({evidence:Z().required("El campo nombre es obligatorio").min(1,"El nombre tiene que tener al menos un carácter").max(100,"El nombre no puede superar los 100 carácteres"),lastname:Z().required("El campo nombre es obligatorio").min(1,"El nombre tiene que tener al menos un carácter").max(100,"El nombre no puede superar los 100 carácteres"),email:Z().required("El email es obligatorio").email("El email no tiene un formato válido"),password:Z().required("La contraseña es obligatoria").min(8,"La contraseña debe tener al menos 8 caracteres").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})/,"La contraseña debe tener al menos una letra mayúscula, una minúscula y un número"),password_repeat:Z().required("La contraseña es obligatoria").min(8,"La contraseña debe tener al menos 8 caracteres").matches(/^(?=.*[a-z])(?=.*[A-Z])(?=.*[0-9])(?=.{8,})/,"La contraseña debe tener al menos una letra mayúscula, una minúscula y un número").oneOf([Je("password"),null],"Las contraseñas no coinciden")});const fe="assets",ee="evidences",tt=()=>!!(typeof window<"u"&&window.document&&window.document.createElement),at=tt()?h.useLayoutEffect:h.useEffect,nt=t=>{const[a,o]=h.useState(!1),r=window.matchMedia(t),s=n=>{console.log("media",n.media,t,n.media===t),n.media===t&&o(r.matches)};return at(()=>(r.addEventListener("change",s),()=>r.removeEventListener("change",s)),[]),a},{RangePicker:rt}=Le,Ne=({fields:t,onFinish:a,formName:o,options:r})=>e.jsxs(y,{name:o,onFinish:a,layout:"vertical",children:[t.map((s,n)=>e.jsxs(y.Item,{label:s.label,name:s.name,rules:[{required:!0,message:`Por favor, ingrese ${s.label}`},{type:`${s.type}`}],children:[s.type==="text"&&e.jsx(I,{id:s.name}),s.type==="inputnumber"&&e.jsx(We,{min:"0",max:"100000",defaultValue:0,style:{width:"100%"},id:s.name}),s.type==="number"&&e.jsx(I,{type:"number",id:s.name,value:s.value,defaultValue:s.value}),s.type==="email"&&e.jsx(I,{type:"email",id:s.name,value:s.value,defaultValue:s.value}),s.type==="date"&&e.jsx(Le,{id:s.name,value:s.value,defaultValue:s.value}),s.type==="datetime"&&e.jsx(rt,{id:s.name,value:s.value,defaultValue:s.value}),s.type==="password"&&e.jsx(I.Password,{id:s.name,value:s.value,defaultValue:s.value}),s.type==="textarea"&&e.jsx(I.TextArea,{id:s.name}),s.type==="select"&&e.jsx(Ze,{id:s.name,value:s.value,defaultValue:s.value,options:r,placeholder:"Seleccione una opción"}),s.type==="radio"&&e.jsx(Ke,{id:s.name,value:s.value,defaultValue:s.value}),s.type==="checkbox"&&e.jsx(Qe,{id:s.name,value:s.value,defaultValue:s.value}),s.type==="switch"&&e.jsx(Ye,{id:s.name,value:s.value,defaultValue:s.value}),s.type==="slider"&&e.jsx(Xe,{id:s.name,value:s.value,defaultValue:s.value}),s.type==="rate"&&e.jsx(es,{id:s.name,value:s.value,defaultValue:s.value}),s.type==="upload"&&e.jsx(ss,{id:s.name,value:s.value,defaultValue:s.value}),s.type==="button"&&e.jsx(U,{id:s.name,value:s.value,defaultValue:s.value}),s.type==="treeselect"&&e.jsx(ts,{id:s.name,value:s.value,defaultValue:s.value}),s.type==="timepicker"&&e.jsx(as,{id:s.name,value:s.value,defaultValue:s.value})]},n)),e.jsx(y.Item,{children:e.jsx(U,{type:"primary",htmlType:"submit",children:"Enviar"})})]});function ot(){de();const[t,a]=h.useState([]),[o,r]=h.useState([]),[s,n]=h.useState(null),[i,p]=h.useState(null),[g,d]=h.useState(!1),[l,f]=h.useState(""),[x,T]=h.useState(null);let u=[],v=[];const M=nt("(min-width: 720px)"),[O]=y.useForm(),N=[{label:"Evidencia",name:"evidence",type:"text"},{label:"Descripcion",name:"desc",type:"text"},{label:"Cantidad",name:"qty",type:"inputnumber"},{label:"Tipo de evidencia",name:"transactionType",type:"select"}],C=[{value:"Carga combustible",label:"Carga combustible"},{value:"Distancia recorrida",label:"Distancia recorrida"}],w=async()=>{const m=await le(fe);r(m.data)};h.useEffect(()=>{w()},[]);const k=async m=>{const P=await ye(m,fe);n(P[0])};(o==null?void 0:o.length)>0&&(v=o==null?void 0:o.map(m=>({check:!1,key:m._id,name:m.name,type:m.more.type,plate:m.more.plate}))),h.useEffect(()=>{le(ee).then(m=>{a(m.data)}).catch(m=>{console.log(m)})},[]),h.useEffect(()=>{t&&t.length},[]),(t==null?void 0:t.length)>0&&(u=t==null?void 0:t.map(m=>({check:!1,key:m._id,evidence:m.evidence,transactionType:m.transactionType,qty:m.qty})),u.length);const _=()=>{d(!0)},$=()=>{d(!1)},G=()=>{d(!1)},V=async m=>{p(m),k(m),_()},J=async m=>{ye(m,ee).then(P=>{const q=P[0].trxid;window.open(`https://stamping.io/es/view/?${q}`)})},W={width:M?"90vw":"45vw",height:"100%",border:"1px solid #ccc"},Q={minHeight:"45vh",with:"100%",display:"flex",flexDirection:"column",justifyContent:"space-between",paddingBottom:"10px"},B={background:"#fff",fontSize:"1.5rem"},se=m=>{let P="";m.transactionType==="Carga combustible"?P="litros":P="km";const q=window.btoa(`{"asset":${s.name}, "owner":${s.more.owner},"value":${m.qty}, "unit":${P}}`),te=K(q);console.log("Assets values",s.image),fetch(`https://api.stamping.io/stamp/?evidence=${te}&async=true&transactionType=${m.transactionType}&url=${s.image}&data=${q}&token=8a9e26ffb25c2e3c4d69ec1b818eacb948bf7879e7358bdc5ebe08351fd4a5bd`,{method:"POST",redirect:"follow"}).then(c=>c.text()).then(c=>{console.log(JSON.parse(c));const R=JSON.parse(c);T(R),f(R.trxid);const D={evidence:m.evidence,desc:m.desc,qty:m.qty,transactionType:m.transactionType,asset:i,trxid:R.trxid};st(D,ee).then(z=>{console.log("Ress desde evidence",z),z.status===201&&(console.log("OK"),le(ee),G())})})};return e.jsx(e.Fragment,{children:e.jsxs("div",{className:"container-fluid",children:[e.jsx("div",{className:"pt-5 pb-3",children:e.jsx("div",{className:"row",children:e.jsx("h3",{className:"col",children:"Registro de evidencias"})})}),e.jsxs(me,{style:{display:"flex",justifyContent:"center",gap:"1rem",flexWrap:"wrap"},className:"",children:[e.jsx(ce,{title:"Activos",bordered:!0,style:W,headStyle:B,className:"",children:e.jsx("div",{style:Q,children:e.jsx(je,{content:v,fields:["name","type","plate"],actions:!0,onAdd:V,Title:"Activos",header:[{label:"Nombre",key:"name"},{label:"Tipo",key:"type"},{label:"Placa",key:"plate"}],total:v==null?void 0:v.length,items:5,select:!1})})}),e.jsx(ce,{title:"Evidencias",bordered:!0,style:W,headStyle:B,className:"",children:e.jsx("div",{style:Q,children:e.jsx(je,{content:u,actions:!0,onShow:J,total:u.length,title:"Evidencias",items:5,fields:["evidence","transactionType","qty"],header:[{label:"Evidencia",key:"evidence"},{label:"Tipo",key:"transactionType"},{label:"Catnidad",key:"qty"}]})})})]}),e.jsx(be,{title:"Registro de evidencia",open:g,onOk:$,onCancel:G,footer:null,cancelButtonProps:{form:O,key:"cancel",htmlType:"reset"},children:e.jsx(Ne,{fields:N,onFinish:se,formName:O,options:C})})]})})}function lt({fields:t,onFinish:a,formName:o,addField:r,removeField:s}){return e.jsxs(y,{form:o,name:"dynamic-form",onFinish:a,children:[t.map((n,i)=>e.jsxs(me,{style:{display:"flex",marginBottom:8},children:[h.createElement(y.Item,{...n,name:[n.name,"name"],key:[n.key,"name"],validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Nombre requerido"}]},e.jsx(I,{placeholder:"Nombre"})),h.createElement(y.Item,{...n,name:[n.name,"age"],key:[n.key,"age"],validateTrigger:["onChange","onBlur"],rules:[{required:!0,message:"Edad requerida"}]},e.jsx(I,{placeholder:"Edad"})),e.jsx(ns,{onClick:()=>s(i)})]},i)),e.jsx(y.Item,{children:e.jsx(U,{type:"dashed",onClick:r,icon:e.jsx(rs,{}),children:"Agregar Campo"})}),e.jsx(y.Item,{children:e.jsx(U,{type:"primary",htmlType:"submit",children:"Enviar"})})]})}function it({fields:t,onFinish:a,formName:o}){const{TextArea:r}=I;return e.jsxs(y,{labelCol:{span:6},wrapperCol:{span:18},form:o,name:"dynamic_form_complex",style:{maxWidth:600},autoComplete:"off",initialValues:{items:[{}]},onFinish:a,children:[e.jsx(y.Item,{label:"Bloque",name:"bloque",rules:[{required:!0,message:"Missing bloque field"}],children:e.jsx(I,{})}),e.jsx(y.List,{name:"items",children:(s,{add:n,remove:i})=>e.jsxs("div",{style:{display:"flex",rowGap:16,flexDirection:"column"},children:[s.map(p=>e.jsxs(ce,{size:"small",title:`Atributo ${p.name+1}`,extra:e.jsx(os,{onClick:()=>{i(p.name)}}),children:[e.jsx(y.Item,{label:"Atributo",name:[p.name,"name"],children:e.jsx(I,{placeholder:"ingrese el atributo"})}),e.jsx(y.Item,{label:"Métricas",children:e.jsx(y.List,{name:[p.name,"list"],children:(g,d)=>e.jsxs("div",{style:{display:"flex",flexDirection:"column",rowGap:16},children:[g.map(l=>e.jsxs(me,{direction:"vertical",children:[e.jsx(y.Item,{noStyle:!0,name:[l.name,"name"],children:e.jsx(I,{placeholder:"ingrese el nombre"})}),e.jsx(y.Item,{noStyle:!0,name:[l.name,"description"],children:e.jsx(r,{placeholder:"ingrese la descripción"})}),e.jsx(y.Item,{noStyle:!0,name:[l.name,"sense"],children:e.jsx(I,{placeholder:"ingrese el sentido"})}),e.jsx(y.Item,{noStyle:!0,name:[l.name,"weight"],children:e.jsx(I,{placeholder:"ingrese el peso"})}),e.jsx(U,{type:"dashed",danger:!0,onClick:()=>{d.remove(l.name)},block:!0,children:"- Eliminar métricas"})]},l.key)),e.jsx(U,{type:"dashed",style:{border:"1px dashed #389e0d",color:"#389e0d"},onClick:()=>d.add(),block:!0,children:"+ Agregar métricas"})]})})})]},p.key)),e.jsx(U,{type:"dashed",onClick:()=>n(),block:!0,children:"+ Agregar Atributo"}),e.jsx(y.Item,{noStyle:!0,children:e.jsx(U,{type:"primary",htmlType:"submit",children:"Enviar"})})]})})]})}function ct(){const t={border:"1px solid #000",height:"50vh",width:"25vw",overflow:"auto"},a={border:"1px solid #000",width:"80vw"},o={border:"1px solid #000",width:"80vw",height:"10vh"},r={margin:"auto",display:"flex",flexDirection:"column",alignContent:"center",backgroundColor:"#fff",height:"80vh"},[s,n,i]=y.useForm(),[p,g]=h.useState([]),d=[{label:"Nombre",name:"name",type:"text"},{label:"Correo Electrónico",name:"email",type:"email"},{label:"Teléfono",name:"phone",type:"text"},{label:"Direccion",name:"addresses",type:"text"},{label:"peso",name:"weight",type:"inputnumber"}],l=u=>{console.log("Valores del formulario:",u),alert(JSON.stringify(u))},f=()=>{const u=[...p,{name:void 0,age:void 0}];g(u)},x=u=>{const v=[...p];v.splice(u,1),g(v)},T=u=>{console.log("Formulario enviado:",u),alert(JSON.stringify(u))};return e.jsx(e.Fragment,{children:e.jsx("div",{className:"container-fluid ",style:r,children:e.jsx("div",{className:"subContent",children:e.jsxs("div",{className:"abs-center",children:[e.jsxs("div",{className:"row ",style:a,children:[e.jsxs("div",{className:"col-md m-3",style:t,children:[e.jsx("h3",{children:"Formulario dinamico"}),e.jsx(lt,{fields:p,onFinish:l,formName:s,addField:f,removeField:x})]}),e.jsx("div",{className:"col-md m-3",style:t,children:e.jsxs("div",{children:[e.jsx("h3",{children:"Formulario generico"}),e.jsx(Ne,{fields:d,onFinish:T,formName:n})]})}),e.jsxs("div",{className:"col-md m-3",style:t,children:[e.jsx("h3",{children:"Formulario Multi"}),e.jsx(it,{fields:p,onFinish:l,formName:i,addField:f,removeField:x})]})]}),e.jsx("div",{className:"row mt-3 mx-3",style:o})]})})})})}const dt=b.lazy(()=>L(()=>import("./Home-f5299b41.js"),["assets/Home-f5299b41.js","assets/vendor-c93ea81a.js","assets/Home-07c959c0.css"])),ut=b.lazy(()=>L(()=>import("./Landing-07d46656.js"),["assets/Landing-07d46656.js","assets/vendor-c93ea81a.js"])),ve=b.lazy(()=>L(()=>import("./Register-90816c28.js"),["assets/Register-90816c28.js","assets/vendor-c93ea81a.js","assets/FormHelper-a63c7a15.js"])),mt=b.lazy(()=>L(()=>import("./Profile-7c2d332a.js"),["assets/Profile-7c2d332a.js","assets/vendor-c93ea81a.js","assets/FormikDynamic-a0319b39.js","assets/users-c00250ac.js","assets/compensation-a67fe469.js"])),ht=b.lazy(()=>L(()=>import("./About-d72e3c1e.js"),["assets/About-d72e3c1e.js","assets/vendor-c93ea81a.js"])),pt=b.lazy(()=>L(()=>import("./Logout-3f5fe5e8.js"),["assets/Logout-3f5fe5e8.js","assets/vendor-c93ea81a.js"])),xt=b.lazy(()=>L(()=>import("./Contact-195ae86e.js"),["assets/Contact-195ae86e.js","assets/vendor-c93ea81a.js"])),gt=b.lazy(()=>L(()=>import("./News-cfcd7416.js"),["assets/News-cfcd7416.js","assets/vendor-c93ea81a.js"])),jt=b.lazy(()=>L(()=>import("./Assets-c7ad17c2.js"),["assets/Assets-c7ad17c2.js","assets/vendor-c93ea81a.js","assets/FormikDynamic-a0319b39.js","assets/users-c00250ac.js","assets/compensation-a67fe469.js"])),yt=b.lazy(()=>L(()=>import("./Compensations-cbb0f8d6.js"),["assets/Compensations-cbb0f8d6.js","assets/vendor-c93ea81a.js","assets/FormikDynamic-a0319b39.js","assets/users-c00250ac.js","assets/compensation-a67fe469.js","assets/FormHelper-a63c7a15.js"])),ft=b.lazy(()=>L(()=>import("./ConsultCompensations-081fa730.js"),["assets/ConsultCompensations-081fa730.js","assets/vendor-c93ea81a.js","assets/compensation-a67fe469.js"])),vt=b.lazy(()=>L(()=>import("./GeiControl-a238d249.js"),["assets/GeiControl-a238d249.js","assets/vendor-c93ea81a.js"])),Et=b.lazy(()=>L(()=>import("./index-d750c041.js"),["assets/index-d750c041.js","assets/vendor-c93ea81a.js","assets/users-c00250ac.js"])),ie=b.lazy(()=>L(()=>import("./index-6ea290cf.js"),["assets/index-6ea290cf.js","assets/vendor-c93ea81a.js","assets/compensation-a67fe469.js"]));function St(){var o;const t=ue(r=>r.auth.isLoggedIn),a=(o=JSON.parse(localStorage.getItem("user")))==null?void 0:o.user;return e.jsx("div",{className:"App",children:e.jsx(h.Suspense,{fallback:e.jsx("div",{className:"example",children:e.jsx(ls,{size:"large"})}),children:e.jsx(is,{children:e.jsx(et,{children:t?e.jsx(Ys,{children:e.jsxs(he,{children:[e.jsx(j,{path:"/",element:e.jsx(ie,{})}),",",e.jsx(j,{index:!0,element:e.jsx(ie,{})}),",",e.jsx(j,{path:"*",element:e.jsx(Xs,{})}),e.jsx(j,{path:"/register",element:e.jsx(ve,{})}),e.jsx(j,{path:"/home",element:e.jsx(dt,{})}),e.jsx(j,{path:"/about",element:e.jsx(ht,{})}),e.jsx(j,{path:"/news",element:e.jsx(gt,{})}),e.jsx(j,{path:"/contact",elemamt:e.jsx(xt,{})}),e.jsx(j,{path:"/logout",element:e.jsx(pt,{})}),e.jsx(j,{path:"/landing",element:e.jsx(ut,{})}),",",e.jsx(j,{path:"/profile",element:e.jsx(mt,{})}),",",e.jsx(j,{path:"/assets",element:e.jsx(jt,{})}),",",e.jsx(j,{path:"/compensations",element:e.jsx(yt,{})}),",",e.jsx(j,{path:"/evidence",element:e.jsx(ot,{})}),",",e.jsx(j,{path:"/consult-compensations",element:e.jsx(ft,{})}),",",e.jsx(j,{path:"/gei-control",element:e.jsx(vt,{})}),",",e.jsx(j,{path:"/user-dashboard",element:e.jsx(ie,{})}),",",(a==null?void 0:a.role)==="admin"?e.jsxs(e.Fragment,{children:[e.jsx(j,{path:"/admin-dashboard",element:e.jsx(Et,{})}),e.jsx(j,{path:"/test",element:e.jsx(ct,{})})]}):null]})}):e.jsxs(he,{children:[e.jsx(j,{path:"/",element:e.jsx(xe,{})}),e.jsx(j,{path:"/login",element:e.jsx(xe,{})}),e.jsx(j,{path:"/register",element:e.jsx(ve,{})})]})})})})})}const S=JSON.parse(localStorage.getItem("user"));var Ee,Se;const _t=S?{isLoggedIn:!0,user:S,avatar:(Se=S==null?void 0:S.user)==null?void 0:Se.name.charAt(0).toUpperCase().concat((Ee=S==null?void 0:S.user)==null?void 0:Ee.lastname.charAt(0).toUpperCase())}:{isLoggedIn:!1,user:null,avatar:""};function bt(t=_t,a){var s,n;const{type:o,payload:r}=a;switch(a.type){case Ae:return{...t,isLoggedIn:!1,user:r.data.data,avatar:""};case Ie:return console.log("<<<<REDUCER LOGIN_SUCCESS>>>>",S==null?void 0:S.user),{...t,isLoggedIn:!0,user:r,avatar:(n=S==null?void 0:S.user)==null?void 0:n.name.charAt(0).toUpperCase().concat((s=S==null?void 0:S.user)==null?void 0:s.lastname.charAt(0).toUpperCase())};case js:return{...t,user:r};case Te:return{...t,isLoggedIn:!1,user:null,avatar:""};default:return t}}const Ct={userProfile:[],users:[],isLoading:!0};function Lt(t=Ct,a){const{type:o,payload:r}=a;switch(a.type){case Cs:return{...t,userProfile:r.data.data};case Ls:return{...t,userProfile:r};case As:return console.log("Update profile success",r),{...t,userProfile:r};case Is:return{...t,userProfile:r};case Es:return{...t,isLoading:!1,users:r};case Ss:return{...t,users:r};default:return t}}const At={user:[],isLoading:!0};function It(t=At,a){const{type:o,payload:r}=a;switch(a.type){case _s:return{...t,isLoading:!1,user:r};case bs:return{...t,user:r};default:return t}}const Tt={compensation:[]};function Nt(t=Tt,a){const{type:o,payload:r}=a;switch(a.type){case ws:return{...t,isLoading:!1,compensation:r};case Os:return{...t,compensation:r};case ks:return{...t,isLoading:!1,compensation:r};case Rs:return{...t,compensation:r};case Ts:return{...t,isLoading:!1,compensation:r};case Ns:return{...t,compensation:r};default:return t}}const wt={assets:[]};function Ot(t=wt,a){const{type:o,payload:r}=a;switch(o){case Ms:return{...t,assets:r};case Gs:return{...t,assets:[]};case Ds:return{...t,assets:r};case Us:return{...t,assets:[]};case Ps:return{...t,assets:r};case Fs:return{...t,assets:[]};case zs:return{...t,assets:r};case $s:return{...t,assets:[]};default:return t}}const kt=cs({name:"userSlice",initialState:{users:[],user:[],isLoading:!1},reducers:{startLoading:t=>{t.isLoading=!0},setUsers:(t,a)=>{t.isLoading=!1,t.users=a.payload}}}),Rt=ds({reducer:{auth:bt,users:Lt,user:It,compensation:Nt,assets:Ot,userSlice:kt.reducer},middleware:t=>t().concat(us)});const Pt="https://myprop.joselimardo.com";F.defaults.baseURL=Pt;const Ft=ms.createRoot(document.getElementById("root"));Ft.render(e.jsx(hs,{store:Rt,children:e.jsx(b.StrictMode,{children:e.jsx(St,{})})}));export{Ps as C,Es as G,je as T,As as U,Fs as a,Ss as b,Ut as c,Is as d,ks as e,Os as f,le as g,Ts as h,gs as i,Ns as j,Zs as l,K as s,nt as u};
