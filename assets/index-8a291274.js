import{u as E,c as _,r as x,j as e,P as I,W as M,B as P,M as J}from"./vendor-3430416b.js";import{T as q}from"./Table-b7a40be8.js";import{g as W}from"./index-2b6999c1.js";import{g as z}from"./compensation-5673c79f.js";function C(p){function n(S,T){return S>>>T|S<<32-T}for(var i=Math.pow,j=i(2,32),c="length",t,o,N="",l=[],d=p[c]*8,s=C.h=C.h||[],r=C.k=C.k||[],v=r[c],u={},h=2;v<64;h++)if(!u[h]){for(t=0;t<313;t+=h)u[t]=h;s[v]=i(h,.5)*j|0,r[v++]=i(h,1/3)*j|0}for(p+="";p[c]%64-56;)p+="\0";for(t=0;t<p[c];t++){if(o=p.charCodeAt(t),o>>8)return;l[t>>2]|=o<<(3-t)%4*8}for(l[l[c]]=d/j|0,l[l[c]]=d,o=0;o<l[c];){var m=l.slice(o,o+=16),O=s;for(s=s.slice(0,8),t=0;t<64;t++){var b=m[t-15],k=m[t-2],y=s[0],f=s[4],g=s[7]+(n(f,6)^n(f,11)^n(f,25))+(f&s[5]^~f&s[6])+r[t]+(m[t]=t<16?m[t]:m[t-16]+(n(b,7)^n(b,18)^b>>>3)+m[t-7]+(n(k,17)^n(k,19)^k>>>10)|0),B=(n(y,2)^n(y,13)^n(y,22))+(y&s[1]^y&s[2]^s[1]&s[2]);s=[g+B|0].concat(s),s[4]=s[4]+g|0}for(t=0;t<8;t++)s[t]=s[t]+O[t]|0}for(t=0;t<8;t++)for(o=3;o+1;o--){var w=s[t]>>o*8&255;N+=(w<16?0:"")+w.toString(16)}return N}function F(){var D;const p=E();_(a=>a.auth.isLoggedIn);const n=_(a=>a.compensation.compensation.data),i=(D=JSON.parse(localStorage.getItem("user")))==null?void 0:D.user;x.useState("");const[j,c]=x.useState(""),[t,o]=x.useState(null),[N,l]=x.useState(!1),[d,s]=x.useState([]);x.useState([]);let r=[];console.log("Compensation: ",n);const v={background:"#fff",fontSize:"1.5rem"},u={width:500,height:"55vh",border:"1px solid #ccc"},h={height:"45vh",display:"flex",flexDirection:"column",justifyContent:"space-between",paddingBottom:"10px"},m={height:"45vh",display:"flex",flexDirection:"column",justifyContent:"space-between",paddingBottom:"10px",overflow:"auto"},O=()=>{l(!0)},b=()=>{l(!1)},k=()=>{l(!1)},y=()=>{O()};x.useEffect(()=>{p(z())},[]);const f=async()=>{const a=await W("assets");s(a.data),console.log(a.data)};(d==null?void 0:d.length)>0&&(r=d==null?void 0:d.map(a=>({check:!1,key:a._id,name:a.name,type:a.more.type,plate:a.more.plate}))),console.log("DATOS",r),x.useEffect(()=>{f()},[]);const g=window.btoa(`{"asset":"camion #1", "owner":${i.email},"value":100, "unit":"km"}`),B="carga.vehiculo.com",w=C(g),S="https://upload.wikimedia.org/wikipedia/commons/1/11/Freightliner_M2_106_6x4_2014_(14240376744).jpg",T=()=>{fetch(`https://api.stamping.io/stamp/?evidence=${w}&async=true&transactionType=${B}&url=${S}&data=${g}&token=8a9e26ffb25c2e3c4d69ec1b818eacb948bf7879e7358bdc5ebe08351fd4a5bd`,{method:"POST",redirect:"follow"}).then(a=>a.text()).then(a=>{console.log(JSON.parse(a));const R=JSON.parse(a);o(R),c(R.trxid)})},$=a=>{window.open(`https://stamping.io/es/view/?${a}`)},A=[{id:1,name:"Recorrido",qty:"100km"},{id:2,name:"Recorrido",qty:"90km"},{id:3,name:"Combustible",qty:"10 Gl"},{id:4,name:"Combustible",qty:"35 Gl"}];return e.jsx("div",{children:e.jsxs("div",{className:"",children:[e.jsx("div",{className:"row text-center pt-5",children:e.jsxs("h2",{children:["Dashboard de:"," ",e.jsxs("span",{style:{fontStyle:"italic"},children:[i==null?void 0:i.name," ",i==null?void 0:i.lastname]})]})}),e.jsx("br",{className:""}),e.jsx("div",{className:"p-5",children:e.jsxs(I,{size:"large",style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[e.jsx(M,{title:"Activos",bordered:!0,style:u,headStyle:v,children:e.jsxs("div",{className:"",style:h,children:[e.jsx("div",{className:"",children:e.jsx(q,{content:r,fields:["name","type","plate"],actions:!0,Title:"Activos",header:[{label:"Nombre",key:"name"},{label:"Tipo",key:"type"},{label:"Placa",key:"plate"}],total:r==null?void 0:r.length,items:5})}),e.jsx("div",{className:"pt-3",children:e.jsx(P,{style:{width:"200px"},type:"primary",onClick:()=>T(),children:"Registrar evidencia"})})]})}),e.jsx(M,{title:"Evidencias",bordered:!0,style:u,headStyle:v,children:e.jsxs("div",{style:h,children:[e.jsx("div",{className:"",children:e.jsx(q,{content:A,fields:["name","qty"],actions:!0,Title:"Activos",header:[{label:"Nombrte",key:"name"},{label:"Cantidad",key:"qty"}],total:A==null?void 0:A.length,items:5})}),e.jsx("div",{className:"pt-3 mb-0",children:e.jsx(P,{style:{width:"200px"},type:"primary",onClick:()=>$(j),children:"Ver evidencia"})})]})}),e.jsx(M,{title:"Compensaciones",bordered:!0,style:u,headStyle:v,children:e.jsx("div",{style:m,children:e.jsx("div",{className:"",children:e.jsx(q,{content:n,fields:["compensation","activity"],actions:!0,Title:"Activos",header:[{label:"Compensación",key:"compensation"},{label:"Actividad",key:"activity"}],total:n==null?void 0:n.length,items:5})})})})]})}),e.jsx("div",{className:"d-flex flex-row justify-content-around w-100",children:e.jsx("div",{className:"",children:e.jsx(P,{style:{width:"200px"},type:"primary",onClick:()=>y(),children:"Ver claves"})})}),e.jsx(J,{title:"Claves",open:N,onOk:b,onCancel:k,children:e.jsxs("div",{className:"",children:[e.jsx("div",{className:"px-5",children:"Clave Publica: "}),e.jsx("div",{className:"hash px-5",style:{width:"500px",color:"red"},children:i==null?void 0:i.publicKey}),e.jsx("div",{className:"px-5",children:"Clave Privada: "}),e.jsx("div",{className:"hash px-5",style:{width:"500px",color:"red"},children:i==null?void 0:i.privateKey})]})})]})})}export{F as default};
