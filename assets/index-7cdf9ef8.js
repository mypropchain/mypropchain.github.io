import{u as E,c as _,r as x,j as e,P as I,W as M,B as P,M as J}from"./vendor-3430416b.js";import{T as q}from"./Table-5f2ab6d9.js";import{g as W}from"./index-ce2fa43e.js";import{g as z}from"./compensation-cc6ccbe0.js";function C(p){function l(S,T){return S>>>T|S<<32-T}for(var i=Math.pow,j=i(2,32),c="length",t,n,N="",o=[],d=p[c]*8,s=C.h=C.h||[],r=C.k=C.k||[],v=r[c],u={},h=2;v<64;h++)if(!u[h]){for(t=0;t<313;t+=h)u[t]=h;s[v]=i(h,.5)*j|0,r[v++]=i(h,1/3)*j|0}for(p+="";p[c]%64-56;)p+="\0";for(t=0;t<p[c];t++){if(n=p.charCodeAt(t),n>>8)return;o[t>>2]|=n<<(3-t)%4*8}for(o[o[c]]=d/j|0,o[o[c]]=d,n=0;n<o[c];){var m=o.slice(n,n+=16),O=s;for(s=s.slice(0,8),t=0;t<64;t++){var b=m[t-15],k=m[t-2],f=s[0],y=s[4],g=s[7]+(l(y,6)^l(y,11)^l(y,25))+(y&s[5]^~y&s[6])+r[t]+(m[t]=t<16?m[t]:m[t-16]+(l(b,7)^l(b,18)^b>>>3)+m[t-7]+(l(k,17)^l(k,19)^k>>>10)|0),B=(l(f,2)^l(f,13)^l(f,22))+(f&s[1]^f&s[2]^s[1]&s[2]);s=[g+B|0].concat(s),s[4]=s[4]+g|0}for(t=0;t<8;t++)s[t]=s[t]+O[t]|0}for(t=0;t<8;t++)for(n=3;n+1;n--){var w=s[t]>>n*8&255;N+=(w<16?0:"")+w.toString(16)}return N}function F(){var D;const p=E();_(a=>a.auth.isLoggedIn);const l=_(a=>a.compensation.compensation.data),i=(D=JSON.parse(localStorage.getItem("user")))==null?void 0:D.user;x.useState("");const[j,c]=x.useState(""),[t,n]=x.useState(null),[N,o]=x.useState(!1),[d,s]=x.useState([]);x.useState([]);let r=[];console.log("Compensation: ",l);const v={background:"#fff",fontSize:"1.5rem"},u={width:400,height:"60vh",border:"1px solid #ccc"},h={height:"50vh",display:"flex",flexDirection:"column",justifyContent:"space-between",paddingBottom:"10px"},m={height:"50vh",display:"flex",flexDirection:"column",justifyContent:"space-between",paddingBottom:"10px",overflow:"auto"},O=()=>{o(!0)},b=()=>{o(!1)},k=()=>{o(!1)},f=()=>{O()};x.useEffect(()=>{p(z())},[]);const y=async()=>{const a=await W("assets");s(a.data),console.log(a.data)};(d==null?void 0:d.length)>0&&(r=d==null?void 0:d.map(a=>({check:!1,key:a._id,name:a.name,type:a.more.type,plate:a.more.plate}))),console.log("DATOS",r),x.useEffect(()=>{y()},[]);const g=window.btoa(`{"asset":"camion #1", "owner":${i.email},"value":100, "unit":"km"}`),B="carga.vehiculo.com",w=C(g),S="https://upload.wikimedia.org/wikipedia/commons/1/11/Freightliner_M2_106_6x4_2014_(14240376744).jpg",T=()=>{fetch(`https://api.stamping.io/stamp/?evidence=${w}&async=true&transactionType=${B}&url=${S}&data=${g}&token=8a9e26ffb25c2e3c4d69ec1b818eacb948bf7879e7358bdc5ebe08351fd4a5bd`,{method:"POST",redirect:"follow"}).then(a=>a.text()).then(a=>{console.log(JSON.parse(a));const R=JSON.parse(a);n(R),c(R.trxid)})},$=a=>{window.open(`https://stamping.io/es/view/?${a}`)},A=[{id:1,name:"Recorrido",qty:"100km"},{id:2,name:"Recorrido",qty:"90km"},{id:3,name:"Combustible",qty:"10 Gl"},{id:4,name:"Combustible",qty:"35 Gl"}];return e.jsx("div",{children:e.jsxs("div",{className:"",children:[e.jsx("div",{className:"row text-center pt-4",children:e.jsxs("h2",{children:["Dashboard de:"," ",e.jsxs("span",{style:{fontStyle:"italic"},children:[i==null?void 0:i.name," ",i==null?void 0:i.lastname]})]})}),e.jsx("br",{className:""}),e.jsx("div",{className:"p-3",children:e.jsxs(I,{size:"large",style:{display:"flex",justifyContent:"space-between",flexWrap:"wrap"},children:[e.jsx(M,{title:"Activos",bordered:!0,style:u,headStyle:v,children:e.jsxs("div",{className:"",style:h,children:[e.jsx("div",{className:"",children:e.jsx(q,{content:r,fields:["name","type","plate"],actions:!1,Title:"Activos",header:[{label:"Nombre",key:"name"},{label:"Tipo",key:"type"},{label:"Placa",key:"plate"}],total:r==null?void 0:r.length,items:5,select:!1})}),e.jsx("div",{className:"pt-3",children:e.jsx(P,{style:{width:"200px"},type:"primary",onClick:()=>T(),children:"Registrar evidencia"})})]})}),e.jsx(M,{title:"Evidencias",bordered:!0,style:u,headStyle:v,children:e.jsxs("div",{style:h,children:[e.jsx("div",{className:"",children:e.jsx(q,{content:A,fields:["name","qty"],actions:!1,Title:"Activos",header:[{label:"Nombrte",key:"name"},{label:"Cantidad",key:"qty"}],total:A==null?void 0:A.length,items:5,select:!1})}),e.jsx("div",{className:"pt-3 mb-0",children:e.jsx(P,{style:{width:"200px"},type:"primary",onClick:()=>$(j),children:"Ver evidencia"})})]})}),e.jsx(M,{title:"Compensaciones",bordered:!0,style:u,headStyle:v,children:e.jsx("div",{style:m,children:e.jsx("div",{className:"",children:e.jsx(q,{content:l,fields:["compensation","activity"],actions:!1,Title:"Activos",header:[{label:"Compensación",key:"compensation"},{label:"Actividad",key:"activity"}],total:l==null?void 0:l.length,items:5,select:!1})})})})]})}),e.jsx("div",{className:"d-flex flex-row justify-content-around w-100",children:e.jsx("div",{className:"",children:e.jsx(P,{style:{width:"200px"},type:"primary",onClick:()=>f(),children:"Ver claves"})})}),e.jsx(J,{title:"Claves",open:N,onOk:b,onCancel:k,children:e.jsxs("div",{className:"",children:[e.jsx("div",{className:"px-5",children:"Clave Publica: "}),e.jsx("div",{className:"hash px-5",style:{width:"500px",color:"red"},children:i==null?void 0:i.publicKey}),e.jsx("div",{className:"px-5",children:"Clave Privada: "}),e.jsx("div",{className:"hash px-5",style:{width:"500px",color:"red"},children:i==null?void 0:i.privateKey})]})})]})})}export{F as default};
